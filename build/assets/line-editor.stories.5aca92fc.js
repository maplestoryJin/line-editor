var kd=Object.defineProperty;var Td=(l,e,n)=>e in l?kd(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var ls=(l,e,n)=>(Td(l,typeof e!="symbol"?e+"":e,n),n);import{r as it,s as zi,g as Rd,j as Ot,R as Yt}from"./index.09ab5444.js";var Ad=Math.PI/180;function Md(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Yr=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},U={_global:Yr,version:"8.3.14",isBrowser:Md(),isUnminified:/param/.test(function(l){}.toString()),dblClickWindow:400,getAngle(l){return U.angleDeg?l*Ad:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return U.DD.isDragging},isDragReady(){return!!U.DD.node},releaseCanvasOnDestroy:!0,document:Yr.document,_injectGlobal(l){Yr.Konva=l}},Pe=l=>{U[l.prototype.getClassName()]=l};U._injectGlobal(U);class nt{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new nt(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),i=Math.sin(e),s=this.m[0]*n+this.m[2]*i,h=this.m[1]*n+this.m[3]*i,u=this.m[0]*-i+this.m[2]*n,f=this.m[1]*-i+this.m[3]*n;return this.m[0]=s,this.m[1]=h,this.m[2]=u,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var i=this.m[0]+this.m[2]*n,s=this.m[1]+this.m[3]*n,h=this.m[2]+this.m[0]*e,u=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=s,this.m[2]=h,this.m[3]=u,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],h=this.m[1]*e.m[2]+this.m[3]*e.m[3],u=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=i,this.m[2]=s,this.m[3]=h,this.m[4]=u,this.m[5]=f,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,i=-this.m[1]*e,s=-this.m[2]*e,h=this.m[0]*e,u=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=i,this.m[2]=s,this.m[3]=h,this.m[4]=u,this.m[5]=f,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],i=this.m[2],s=this.m[3],h=this.m[4],u=this.m[5],f=e*s-n*i;let c={x:h,y:u,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var p=Math.sqrt(e*e+n*n);c.rotation=n>0?Math.acos(e/p):-Math.acos(e/p),c.scaleX=p,c.scaleY=f/p,c.skewX=(e*i+n*s)/f,c.skewY=0}else if(i!=0||s!=0){var v=Math.sqrt(i*i+s*s);c.rotation=Math.PI/2-(s>0?Math.acos(-i/v):-Math.acos(i/v)),c.scaleX=f/v,c.scaleY=v,c.skewX=0,c.skewY=(e*i+n*s)/f}return c.rotation=E._getRotation(c.rotation),c}}var Ld="[object Array]",Nd="[object Number]",Id="[object String]",Od="[object Boolean]",Dd=Math.PI/180,Gd=180/Math.PI,hs="#",zd="",Fd="0",Hd="Konva warning: ",Tl="Konva error: ",Bd="rgb(",us={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},bd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,ki=[];const Wd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(l){setTimeout(l,60)},E={_isElement(l){return!!(l&&l.nodeType==1)},_isFunction(l){return!!(l&&l.constructor&&l.call&&l.apply)},_isPlainObject(l){return!!l&&l.constructor===Object},_isArray(l){return Object.prototype.toString.call(l)===Ld},_isNumber(l){return Object.prototype.toString.call(l)===Nd&&!isNaN(l)&&isFinite(l)},_isString(l){return Object.prototype.toString.call(l)===Id},_isBoolean(l){return Object.prototype.toString.call(l)===Od},isObject(l){return l instanceof Object},isValidSelector(l){if(typeof l!="string")return!1;var e=l[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(l){return l===0||l>0?1:-1},requestAnimFrame(l){ki.push(l),ki.length===1&&Wd(function(){const e=ki;ki=[],e.forEach(function(n){n()})})},createCanvasElement(){var l=document.createElement("canvas");try{l.style=l.style||{}}catch{}return l},createImageElement(){return document.createElement("img")},_isInDocument(l){for(;l=l.parentNode;)if(l==document)return!0;return!1},_urlToImage(l,e){var n=E.createImageElement();n.onload=function(){e(n)},n.src=l},_rgbToHex(l,e,n){return((1<<24)+(l<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(l){l=l.replace(hs,zd);var e=parseInt(l,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var l=(Math.random()*16777215<<0).toString(16);l.length<6;)l=Fd+l;return hs+l},getRGB(l){var e;return l in us?(e=us[l],{r:e[0],g:e[1],b:e[2]}):l[0]===hs?this._hexToRgb(l.substring(1)):l.substr(0,4)===Bd?(e=bd.exec(l.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(l){return l=l||"black",E._namedColorToRBA(l)||E._hex3ColorToRGBA(l)||E._hex6ColorToRGBA(l)||E._rgbColorToRGBA(l)||E._rgbaColorToRGBA(l)||E._hslColorToRGBA(l)},_namedColorToRBA(l){var e=us[l.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(l){if(l.indexOf("rgb(")===0){l=l.match(/rgb\(([^)]+)\)/)[1];var e=l.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(l){if(l.indexOf("rgba(")===0){l=l.match(/rgba\(([^)]+)\)/)[1];var e=l.split(/ *, */).map((n,i)=>n.slice(-1)==="%"?i===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(l){if(l[0]==="#"&&l.length===7)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:1}},_hex3ColorToRGBA(l){if(l[0]==="#"&&l.length===4)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:1}},_hslColorToRGBA(l){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(l)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(l),i=Number(n[0])/360,s=Number(n[1])/100,h=Number(n[2])/100;let u,f,c;if(s===0)return c=h*255,{r:Math.round(c),g:Math.round(c),b:Math.round(c),a:1};h<.5?u=h*(1+s):u=h+s-h*s;const p=2*h-u,v=[0,0,0];for(let S=0;S<3;S++)f=i+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?c=p+(u-p)*6*f:2*f<1?c=u:3*f<2?c=p+(u-p)*(2/3-f)*6:c=p,v[S]=c*255;return{r:Math.round(v[0]),g:Math.round(v[1]),b:Math.round(v[2]),a:1}}},haveIntersection(l,e){return!(e.x>l.x+l.width||e.x+e.width<l.x||e.y>l.y+l.height||e.y+e.height<l.y)},cloneObject(l){var e={};for(var n in l)this._isPlainObject(l[n])?e[n]=this.cloneObject(l[n]):this._isArray(l[n])?e[n]=this.cloneArray(l[n]):e[n]=l[n];return e},cloneArray(l){return l.slice(0)},degToRad(l){return l*Dd},radToDeg(l){return l*Gd},_degToRad(l){return E.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),E.degToRad(l)},_radToDeg(l){return E.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),E.radToDeg(l)},_getRotation(l){return U.angleDeg?E.radToDeg(l):l},_capitalize(l){return l.charAt(0).toUpperCase()+l.slice(1)},throw(l){throw new Error(Tl+l)},error(l){console.error(Tl+l)},warn(l){!U.showWarnings||console.warn(Hd+l)},each(l,e){for(var n in l)e(n,l[n])},_inRange(l,e,n){return e<=l&&l<n},_getProjectionToSegment(l,e,n,i,s,h){var u,f,c,p=(l-n)*(l-n)+(e-i)*(e-i);if(p==0)u=l,f=e,c=(s-n)*(s-n)+(h-i)*(h-i);else{var v=((s-l)*(n-l)+(h-e)*(i-e))/p;v<0?(u=l,f=e,c=(l-s)*(l-s)+(e-h)*(e-h)):v>1?(u=n,f=i,c=(n-s)*(n-s)+(i-h)*(i-h)):(u=l+v*(n-l),f=e+v*(i-e),c=(u-s)*(u-s)+(f-h)*(f-h))}return[u,f,c]},_getProjectionToLine(l,e,n){var i=E.cloneObject(l),s=Number.MAX_VALUE;return e.forEach(function(h,u){if(!(!n&&u===e.length-1)){var f=e[(u+1)%e.length],c=E._getProjectionToSegment(h.x,h.y,f.x,f.y,l.x,l.y),p=c[0],v=c[1],S=c[2];S<s&&(i.x=p,i.y=v,s=S)}}),i},_prepareArrayForTween(l,e,n){var i,s=[],h=[];if(l.length>e.length){var u=e;e=l,l=u}for(i=0;i<l.length;i+=2)s.push({x:l[i],y:l[i+1]});for(i=0;i<e.length;i+=2)h.push({x:e[i],y:e[i+1]});var f=[];return h.forEach(function(c){var p=E._getProjectionToLine(c,s,n);f.push(p.x),f.push(p.y)}),f},_prepareToStringify(l){var e;l.visitedByCircularReferenceRemoval=!0;for(var n in l)if(!!(l.hasOwnProperty(n)&&l[n]&&typeof l[n]=="object")){if(e=Object.getOwnPropertyDescriptor(l,n),l[n].visitedByCircularReferenceRemoval||E._isElement(l[n]))if(e.configurable)delete l[n];else return null;else if(E._prepareToStringify(l[n])===null)if(e.configurable)delete l[n];else return null}return delete l.visitedByCircularReferenceRemoval,l},_assign(l,e){for(var n in e)l[n]=e[n];return l},_getFirstPointerId(l){return l.touches?l.changedTouches[0].identifier:l.pointerId||999},releaseCanvas(...l){!U.releaseCanvasOnDestroy||l.forEach(e=>{e.width=0,e.height=0})}};function ar(l){return E._isString(l)?'"'+l+'"':Object.prototype.toString.call(l)==="[object Number]"||E._isBoolean(l)?l:Object.prototype.toString.call(l)}function nh(l){return l>255?255:l<0?0:Math.round(l)}function G(){if(U.isUnminified)return function(l,e){return E._isNumber(l)||E.warn(ar(l)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),l}}function ih(l){if(U.isUnminified)return function(e,n){let i=E._isNumber(e),s=E._isArray(e)&&e.length==l;return!i&&!s&&E.warn(ar(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+l+")"),e}}function Ts(){if(U.isUnminified)return function(l,e){var n=E._isNumber(l),i=l==="auto";return n||i||E.warn(ar(l)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),l}}function Vr(){if(U.isUnminified)return function(l,e){return E._isString(l)||E.warn(ar(l)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),l}}function ah(){if(U.isUnminified)return function(l,e){const n=E._isString(l),i=Object.prototype.toString.call(l)==="[object CanvasGradient]"||l&&l.addColorStop;return n||i||E.warn(ar(l)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),l}}function Ud(){if(U.isUnminified)return function(l,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&l instanceof n||(E._isArray(l)?l.forEach(function(i){E._isNumber(i)||E.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):E.warn(ar(l)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),l}}function Pt(){if(U.isUnminified)return function(l,e){var n=l===!0||l===!1;return n||E.warn(ar(l)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),l}}function Yd(l){if(U.isUnminified)return function(e,n){return e==null||E.isObject(e)||E.warn(ar(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+l),e}}var mn="get",yn="set";const w={addGetterSetter(l,e,n,i,s){w.addGetter(l,e,n),w.addSetter(l,e,i,s),w.addOverloadedGetterSetter(l,e)},addGetter(l,e,n){var i=mn+E._capitalize(e);l.prototype[i]=l.prototype[i]||function(){var s=this.attrs[e];return s===void 0?n:s}},addSetter(l,e,n,i){var s=yn+E._capitalize(e);l.prototype[s]||w.overWriteSetter(l,e,n,i)},overWriteSetter(l,e,n,i){var s=yn+E._capitalize(e);l.prototype[s]=function(h){return n&&h!==void 0&&h!==null&&(h=n.call(this,h,e)),this._setAttr(e,h),i&&i.call(this),this}},addComponentsGetterSetter(l,e,n,i,s){var h=n.length,u=E._capitalize,f=mn+u(e),c=yn+u(e),p,v;l.prototype[f]=function(){var _={};for(p=0;p<h;p++)v=n[p],_[v]=this.getAttr(e+u(v));return _};var S=Yd(n);l.prototype[c]=function(_){var C=this.attrs[e],y;i&&(_=i.call(this,_)),S&&S.call(this,_,e);for(y in _)!_.hasOwnProperty(y)||this._setAttr(e+u(y),_[y]);return _||n.forEach(A=>{this._setAttr(e+u(A),void 0)}),this._fireChangeEvent(e,C,_),s&&s.call(this),this},w.addOverloadedGetterSetter(l,e)},addOverloadedGetterSetter(l,e){var n=E._capitalize(e),i=yn+n,s=mn+n;l.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(l,e,n,i){E.error("Adding deprecated "+e);var s=mn+E._capitalize(e),h=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[s]=function(){E.error(h);var u=this.attrs[e];return u===void 0?n:u},w.addSetter(l,e,i,function(){E.error(h)}),w.addOverloadedGetterSetter(l,e)},backCompat(l,e){E.each(e,function(n,i){var s=l.prototype[i],h=mn+E._capitalize(n),u=yn+E._capitalize(n);function f(){s.apply(this,arguments),E.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}l.prototype[n]=f,l.prototype[h]=f,l.prototype[u]=f})},afterSetFilter(){this._filterUpToDate=!1}};function Xd(l){var e=[],n=l.length,i=E,s,h;for(s=0;s<n;s++)h=l[s],i._isNumber(h)?h=Math.round(h*1e3)/1e3:i._isString(h)||(h=h+""),e.push(h);return e}var Rl=",",jd="(",Vd=")",qd="([",Qd="])",Kd=";",Jd="()",Zd="=",Al=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],$d=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const ef=100;class Wi{constructor(e){this.canvas=e,U.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var i=this.traceArr,s=i.length,h="",u,f,c,p;for(u=0;u<s;u++)f=i[u],c=f.method,c?(p=f.args,h+=c,e?h+=Jd:E._isArray(p[0])?h+=qd+p.join(Rl)+Qd:(n&&(p=p.map(v=>typeof v=="number"?Math.floor(v):v)),h+=jd+p.join(Rl)+Vd)):(h+=f.property,e||(h+=Zd+f.val)),h+=Kd;return h}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,i;n.push(e),i=n.length,i>=ef&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){var n=e.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){var n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,s,h,u){this._context.arc(e,n,i,s,h,u)}arcTo(e,n,i,s,h){this._context.arcTo(e,n,i,s,h)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,s,h,u){this._context.bezierCurveTo(e,n,i,s,h,u)}clearRect(e,n,i,s){this._context.clearRect(e,n,i,s)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,s){return this._context.createLinearGradient(e,n,i,s)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,s,h,u){return this._context.createRadialGradient(e,n,i,s,h,u)}drawImage(e,n,i,s,h,u,f,c,p){var v=arguments,S=this._context;v.length===3?S.drawImage(e,n,i):v.length===5?S.drawImage(e,n,i,s,h):v.length===9&&S.drawImage(e,n,i,s,h,u,f,c,p)}ellipse(e,n,i,s,h,u,f,c){this._context.ellipse(e,n,i,s,h,u,f,c)}isPointInPath(e,n){return this._context.isPointInPath(e,n)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,i,s){this._context.fillRect(e,n,i,s)}strokeRect(e,n,i,s){this._context.strokeRect(e,n,i,s)}fillText(e,n,i,s){s?this._context.fillText(e,n,i,s):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,s){return this._context.getImageData(e,n,i,s)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,s){this._context.rect(e,n,i,s)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,s){this._context.quadraticCurveTo(e,n,i,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,s,h,u){this._context.setTransform(e,n,i,s,h,u)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,s){this._context.strokeText(e,n,i,s)}transform(e,n,i,s,h,u){this._context.transform(e,n,i,s,h,u)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=Al.length,i=this.setAttr,s,h,u=function(f){var c=e[f],p;e[f]=function(){return h=Xd(Array.prototype.slice.call(arguments,0)),p=c.apply(e,arguments),e._trace({method:f,args:h}),p}};for(s=0;s<n;s++)u(Al[s]);e.setAttr=function(){i.apply(e,arguments);var f=arguments[0],c=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:f,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}$d.forEach(function(l){Object.defineProperty(Wi.prototype,l,{get(){return this._context[l]},set(e){this._context[l]=e}})});class tf extends Wi{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){var n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){var n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}var s=e.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(e);return}var h=e.getFillLinearGradientColorStops();if(h&&i==="linear-gradient"){this._fillLinearGradient(e);return}var u=e.getFillRadialGradientColorStops();if(u&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):s?this._fillPattern(e):h?this._fillLinearGradient(e):u&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),h=this.createLinearGradient(n.x,n.y,i.x,i.y);if(s){for(var u=0;u<s.length;u+=2)h.addColorStop(s[u],s[u+1]);this.setAttr("strokeStyle",h)}}_stroke(e){var n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var h=e.getStrokeLinearGradientColorStops();h?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,s,h=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",u=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},c=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),v=c.x*p,S=c.y*p;this.setAttr("shadowColor",h),this.setAttr("shadowBlur",u*Math.min(Math.abs(v),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*v),this.setAttr("shadowOffsetY",f.y*S)}}class rf extends Wi{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var n=e.getStrokeScaleEnabled();if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e);var s=e.hitStrokeWidth(),h=s==="auto"?e.strokeWidth():s;this.setAttr("lineWidth",h),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}var Ti;function nf(){if(Ti)return Ti;var l=E.createCanvasElement(),e=l.getContext("2d");return Ti=function(){var n=U._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i}(),E.releaseCanvas(l),Ti}class Ui{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},i=n.pixelRatio||U.pixelRatio||nf();this.pixelRatio=i,this._canvas=E.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(s){return E.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}w.addGetterSetter(Ui,"pixelRatio",void 0,G());class Xr extends Ui{constructor(e={width:0,height:0}){super(e),this.context=new tf(this),this.setSize(e.width,e.height)}}class Rs extends Ui{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new rf(this),this.setSize(e.width,e.height)}}const le={get isDragging(){var l=!1;return le._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(l=!0)}),l},justDragged:!1,get node(){var l;return le._dragElements.forEach(e=>{l=e.node}),l},_dragElements:new Map,_drag(l){const e=[];le._dragElements.forEach((n,i)=>{const{node:s}=n,h=s.getStage();h.setPointersPositions(l),n.pointerId===void 0&&(n.pointerId=E._getFirstPointerId(l));const u=h._changedPointerPositions.find(p=>p.id===n.pointerId);if(!!u){if(n.dragStatus!=="dragging"){var f=s.dragDistance(),c=Math.max(Math.abs(u.x-n.startPointerPos.x),Math.abs(u.y-n.startPointerPos.y));if(c<f||(s.startDrag({evt:l}),!s.isDragging()))return}s._setDragPosition(l,n),e.push(s)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:l},!0)})},_endDragBefore(l){const e=[];le._dragElements.forEach(n=>{const{node:i}=n,s=i.getStage();if(l&&s.setPointersPositions(l),!s._changedPointerPositions.find(f=>f.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(le.justDragged=!0,U._mouseListenClick=!1,U._touchListenClick=!1,U._pointerListenClick=!1,n.dragStatus="stopped");const u=n.node.getLayer()||n.node instanceof U.Stage&&n.node;u&&e.indexOf(u)===-1&&e.push(u)}),e.forEach(n=>{n.draw()})},_endDragAfter(l){le._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:l},!0),e.dragStatus!=="dragging"&&le._dragElements.delete(n)})}};U.isBrowser&&(window.addEventListener("mouseup",le._endDragBefore,!0),window.addEventListener("touchend",le._endDragBefore,!0),window.addEventListener("mousemove",le._drag),window.addEventListener("touchmove",le._drag),window.addEventListener("mouseup",le._endDragAfter,!1),window.addEventListener("touchend",le._endDragAfter,!1));var Fi="absoluteOpacity",Ri="allEventListeners",Ut="absoluteTransform",Ml="absoluteScale",_r="canvas",af="Change",sf="children",of="konva",ys="listening",Ll="mouseenter",Nl="mouseleave",Il="set",Ol="Shape",Hi=" ",Dl="stage",ir="transform",lf="Stage",_s="visible",hf=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Hi);let uf=1;class z{constructor(e){this._id=uf++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ir||e===Ut)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var i=this._cache.get(e),s=e===ir||e===Ut,h=i===void 0||s&&i.dirty===!0;return h&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const s=n.map(h=>h+"Change.konva").join(Hi);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(_r)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ut&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(_r)){const{scene:e,filter:n,hit:i}=this._cache.get(_r);E.releaseCanvas(e,n,i),this._cache.delete(_r)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(n.width||i.width),h=Math.ceil(n.height||i.height),u=n.pixelRatio,f=n.x===void 0?Math.floor(i.x):n.x,c=n.y===void 0?Math.floor(i.y):n.y,p=n.offset||0,v=n.drawBorder||!1,S=n.hitCanvasPixelRatio||1;if(!s||!h){E.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=p*2+1,h+=p*2+1,f-=p,c-=p;var _=new Xr({pixelRatio:u,width:s,height:h}),C=new Xr({pixelRatio:u,width:0,height:0}),y=new Rs({pixelRatio:S,width:s,height:h}),A=_.getContext(),k=y.getContext();return y.isCache=!0,_.isCache=!0,this._cache.delete(_r),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,C.getContext()._context.imageSmoothingEnabled=!1),A.save(),k.save(),A.translate(-f,-c),k.translate(-f,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Fi),this._clearSelfAndDescendantCache(Ml),this.drawScene(_,this),this.drawHit(y,this),this._isUnderCache=!1,A.restore(),k.restore(),v&&(A.save(),A.beginPath(),A.rect(0,0,s,h),A.closePath(),A.setAttr("strokeStyle","red"),A.setAttr("lineWidth",5),A.stroke(),A.restore()),this._cache.set(_r,{scene:_,filter:C,hit:y,x:f,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(_r)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s,h,u,f,c=this.getAbsoluteTransform(n);return i.forEach(function(p){var v=c.point(p);s===void 0&&(s=u=v.x,h=f=v.y),s=Math.min(s,v.x),h=Math.min(h,v.y),u=Math.max(u,v.x),f=Math.max(f,v.y)}),{x:s,y:h,width:u-s,height:f-h}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),s=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/s,i.height/s),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),i=n.scene,s=n.filter,h=s.getContext(),u,f,c,p;if(e){if(!this._filterUpToDate){var v=i.pixelRatio;s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(u=e.length,h.clear(),h.drawImage(i._canvas,0,0,i.getWidth()/v,i.getHeight()/v),f=h.getImageData(0,0,s.getWidth(),s.getHeight()),c=0;c<u;c++){if(p=e[c],typeof p!="function"){E.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,f),h.putImageData(f,0,0)}}catch(S){E.error("Unable to apply filter. "+S.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return i}on(e,n){if(this._cache&&this._cache.delete(Ri),arguments.length===3)return this._delegate.apply(this,arguments);var i=e.split(Hi),s=i.length,h,u,f,c,p;for(h=0;h<s;h++)u=i[h],f=u.split("."),c=f[0],p=f[1]||"",this.eventListeners[c]||(this.eventListeners[c]=[]),this.eventListeners[c].push({name:p,handler:n});return this}off(e,n){var i=(e||"").split(Hi),s=i.length,h,u,f,c,p,v;if(this._cache&&this._cache.delete(Ri),!e)for(u in this.eventListeners)this._off(u);for(h=0;h<s;h++)if(f=i[h],c=f.split("."),p=c[0],v=c[1],p)this.eventListeners[p]&&this._off(p,v,n);else for(u in this.eventListeners)this._off(u,v,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){var s=this;this.on(e,function(h){for(var u=h.target.findAncestors(n,!0,s),f=0;f<u.length;f++)h=E.cloneObject(h),h.currentTarget=u[f],i.call(u[f],h)})}remove(){return this.isDragging()&&this.stopDrag(),le._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ut),this._clearSelfAndDescendantCache(Fi),this._clearSelfAndDescendantCache(Ml),this._clearSelfAndDescendantCache(Dl),this._clearSelfAndDescendantCache(_s),this._clearSelfAndDescendantCache(ys)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+E._capitalize(e);return E._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,i;if(!e)return this;for(n in e)n!==sf&&(i=Il+E._capitalize(n),E._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(ys,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(_s,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var i=this.getLayer(),s=!1;le._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(u.node.nodeType==="Stage"||u.node.getLayer()===i)&&(s=!0)});var h=!n&&!U.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!h}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,i=0,s,h,u,f;function c(p){for(s=[],h=p.length,u=0;u<h;u++)f=p[u],i++,f.nodeType!==Ol&&(s=s.concat(f.getChildren().slice())),f._id===n._id&&(u=h);s.length>0&&s[0].getDepth()<=e&&c(s)}return n.nodeType!==lf&&c(n.getStage().getChildren()),i}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ir),this._clearSelfAndDescendantCache(Ut)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var s=this.getAbsoluteTransform(e).getMatrix(),h=new nt,u=this.offset();return h.m=s.slice(),h.translate(u.x,u.y),h.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(ir);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(ir),this._clearSelfAndDescendantCache(Ut),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,i=e.y,s=this.x(),h=this.y();return n!==void 0&&(s+=n),i!==void 0&&(h+=i),this.setPosition({x:s,y:h}),this}_eachAncestorReverse(e,n){var i=[],s=this.getParent(),h,u;if(!(n&&n._id===this._id)){for(i.unshift(this);s&&(!n||s._id!==n._id);)i.unshift(s),s=s.parent;for(h=i.length,u=0;u<h;u++)e(i[u])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return E.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return E.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return E.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return E.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return E.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&E.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Fi,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),i,s,h,u,f;e.attrs={};for(i in n)s=n[i],f=E.isObject(s)&&!E._isPlainObject(s)&&!E._isArray(s),!f&&(h=typeof this[i]=="function"&&this[i],delete n[i],u=h?h.call(this):null,n[i]=s,u!==s&&(e.attrs[i]=s));return e.className=this.getClassName(),E._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){var s=[];n&&this._isMatch(e)&&s.push(this);for(var h=this.parent;h;){if(h===i)return s;h._isMatch(e)&&s.push(h),h=h.parent}return s}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),i=n.length,s,h;for(s=0;s<i;s++)if(h=n[s],E.isValidSelector(h)||(E.warn('Selector "'+h+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),E.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),E.warn("Konva is awesome, right?")),h.charAt(0)==="#"){if(this.id()===h.slice(1))return!0}else if(h.charAt(0)==="."){if(this.hasName(h.slice(1)))return!0}else if(this.className===h||this.nodeType===h)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Dl,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ut,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new nt,this._eachAncestorReverse(function(s){var h=s.transformsEnabled();h==="all"?n.multiply(s.getTransform()):h==="position"&&n.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},e),n;n=this._cache.get(Ut)||new nt,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,h=this.attrs.y||0,u=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(s-u,h-f)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ir,this._getTransform)}_getTransform(){var e,n,i=this._cache.get(ir)||new nt;i.reset();var s=this.x(),h=this.y(),u=U.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,v=this.attrs.skewY||0,S=this.attrs.offsetX||0,_=this.attrs.offsetY||0;return(s!==0||h!==0)&&i.translate(s,h),u!==0&&i.rotate(u),(p!==0||v!==0)&&i.skew(p,v),(f!==1||c!==1)&&i.scale(f,c),(S!==0||_!==0)&&i.translate(-1*S,-1*_),i.dirty=!1,i}clone(e){var n=E.cloneObject(this.attrs),i,s,h,u,f;for(i in e)n[i]=e[i];var c=new this.constructor(n);for(i in this.eventListeners)for(s=this.eventListeners[i],h=s.length,u=0;u<h;u++)f=s[u],f.name.indexOf(of)<0&&(c.eventListeners[i]||(c.eventListeners[i]=[]),c.eventListeners[i].push(f));return c}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),i=this.getStage(),s=e.x!==void 0?e.x:Math.floor(n.x),h=e.y!==void 0?e.y:Math.floor(n.y),u=e.pixelRatio||1,f=new Xr({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:u}),c=f.getContext();return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(s||h)&&c.translate(-1*s,-1*h),this.drawScene(f),c.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,i=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(s),s}toImage(e){return new Promise((n,i)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,E._urlToImage(this.toDataURL(e),function(h){n(h),s==null||s(h)})}catch(s){i(s)}})}toBlob(e){return new Promise((n,i)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,this.toCanvas(e).toBlob(h=>{n(h),s==null||s(h)})}catch(s){i(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():U.dragDistance}_off(e,n,i){var s=this.eventListeners[e],h,u,f;for(h=0;h<s.length;h++)if(u=s[h].name,f=s[h].handler,(u!=="konva"||n==="konva")&&(!n||u===n)&&(!i||i===f)){if(s.splice(h,1),s.length===0){delete this.eventListeners[e];break}h--}}_fireChangeEvent(e,n,i){this._fire(e+af,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){var n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){var i=this[Il+E._capitalize(e)];return E._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(U.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var i=this.attrs[e];i===n&&!E.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){var s;i!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,s,i))}_fireAndBubble(e,n,i){n&&this.nodeType===Ol&&(n.target=this);var s=(e===Ll||e===Nl)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!s){this._fire(e,n);var h=(e===Ll||e===Nl)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!h&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(Ri);if(!n){n={};let s=Object.getPrototypeOf(this);for(;s;){if(!s.eventListeners){s=Object.getPrototypeOf(s);continue}for(var i in s.eventListeners){const h=s.eventListeners[i],u=n[i]||[];n[i]=h.concat(u)}s=Object.getPrototypeOf(s)}this._cache.set(Ri,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(var s=0;s<i.length;s++)i[s].handler.call(this,n);const h=this.eventListeners[e];if(h)for(var s=0;s<h.length;s++)h[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition(),h=i._getPointerById(n)||i._changedPointerPositions[0]||s;le._dragElements.set(this._id,{node:this,startPointerPos:h,offset:{x:h.x-s.x,y:h.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){le._dragElements.has(this._id)||this._createDragElement(e);const i=le._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(!!i){var s={x:i.x-n.offset.x,y:i.y-n.offset.y},h=this.dragBoundFunc();if(h!==void 0){const u=h.call(this,s,e);u?s=u:E.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(e){const n=le._dragElements.get(this._id);n&&(n.dragStatus="stopped"),le._endDragBefore(e),le._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=le._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,i=!n||U.dragButtons.indexOf(e.evt.button)>=0;if(!!i&&!this.isDragging()){var s=!1;le._dragElements.forEach(h=>{this.isAncestorOf(h.node)&&(s=!0)}),s||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=le._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";i?this.stopDrag():s&&le._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return E.haveIntersection(i,this.getClientRect())}static create(e,n){return E._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var i=z.prototype.getClassName.call(e),s=e.children,h,u,f;n&&(e.attrs.container=n),U[i]||(E.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const c=U[i];if(h=new c(e.attrs),s)for(u=s.length,f=0;f<u;f++)h.add(z._createNode(s[f]));return h}}z.prototype.nodeType="Node";z.prototype._attrsAffectingSize=[];z.prototype.eventListeners={};z.prototype.on.call(z.prototype,hf,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ir),this._clearSelfAndDescendantCache(Ut)});z.prototype.on.call(z.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(_s)});z.prototype.on.call(z.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ys)});z.prototype.on.call(z.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Fi)});const ge=w.addGetterSetter;ge(z,"zIndex");ge(z,"absolutePosition");ge(z,"position");ge(z,"x",0,G());ge(z,"y",0,G());ge(z,"globalCompositeOperation","source-over",Vr());ge(z,"opacity",1,G());ge(z,"name","",Vr());ge(z,"id","",Vr());ge(z,"rotation",0,G());w.addComponentsGetterSetter(z,"scale",["x","y"]);ge(z,"scaleX",1,G());ge(z,"scaleY",1,G());w.addComponentsGetterSetter(z,"skew",["x","y"]);ge(z,"skewX",0,G());ge(z,"skewY",0,G());w.addComponentsGetterSetter(z,"offset",["x","y"]);ge(z,"offsetX",0,G());ge(z,"offsetY",0,G());ge(z,"dragDistance",null,G());ge(z,"width",0,G());ge(z,"height",0,G());ge(z,"listening",!0,Pt());ge(z,"preventDefault",!0,Pt());ge(z,"filters",null,function(l){return this._filterUpToDate=!1,l});ge(z,"visible",!0,Pt());ge(z,"transformsEnabled","all",Vr());ge(z,"size");ge(z,"dragBoundFunc");ge(z,"draggable",!1,Pt());w.backCompat(z,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class at extends z{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(s){e(s)&&i.push(s)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var i=[];return this._descendants(s=>{const h=s._isMatch(e);return h&&i.push(s),!!(h&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const s of i){if(n=e(s),n)return!0;if(!!s.hasChildren()&&(n=s._descendants(e),n))return!0}return!1}toObject(){var e=z.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=z.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(i){i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n){var i=this.getLayer(),s=e||i&&i.getCanvas(),h=s&&s.getContext(),u=this._getCanvasCache(),f=u&&u.scene,c=s&&s.isCache;if(!this.isVisible()&&!c)return this;if(f){h.save();var p=this.getAbsoluteTransform(n).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",s,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),s=e||i&&i.hitCanvas,h=s&&s.getContext(),u=this._getCanvasCache(),f=u&&u.hit;if(f){h.save();var c=this.getAbsoluteTransform(n).getMatrix();h.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(e,n,i){var s,h=n&&n.getContext(),u=this.clipWidth(),f=this.clipHeight(),c=this.clipFunc(),p=u&&f||c;const v=i===this;if(p){h.save();var S=this.getAbsoluteTransform(i),_=S.getMatrix();if(h.transform(_[0],_[1],_[2],_[3],_[4],_[5]),h.beginPath(),c)c.call(this,h,this);else{var C=this.clipX(),y=this.clipY();h.rect(C,y,u,f)}h.clip(),_=S.copy().invert().getMatrix(),h.transform(_[0],_[1],_[2],_[3],_[4],_[5])}var A=!v&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";A&&(h.save(),h._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(k){k[e](n,i)}),A&&h.restore(),p&&h.restore()}getClientRect(e){var n;e=e||{};var i=e.skipTransform,s=e.relativeTo,h,u,f,c,p={x:1/0,y:1/0,width:0,height:0},v=this;(n=this.children)===null||n===void 0||n.forEach(function(A){if(!!A.visible()){var k=A.getClientRect({relativeTo:v,skipShadow:e.skipShadow,skipStroke:e.skipStroke});k.width===0&&k.height===0||(h===void 0?(h=k.x,u=k.y,f=k.x+k.width,c=k.y+k.height):(h=Math.min(h,k.x),u=Math.min(u,k.y),f=Math.max(f,k.x+k.width),c=Math.max(c,k.y+k.height)))}});for(var S=this.find("Shape"),_=!1,C=0;C<S.length;C++){var y=S[C];if(y._isVisible(this)){_=!0;break}}return _&&h!==void 0?p={x:h,y:u,width:f-h,height:c-u}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,s)}}w.addComponentsGetterSetter(at,"clip",["x","y","width","height"]);w.addGetterSetter(at,"clipX",void 0,G());w.addGetterSetter(at,"clipY",void 0,G());w.addGetterSetter(at,"clipWidth",void 0,G());w.addGetterSetter(at,"clipHeight",void 0,G());w.addGetterSetter(at,"clipFunc");const Mn=new Map,sh=U._global.PointerEvent!==void 0;function ds(l){return Mn.get(l)}function As(l){return{evt:l,pointerId:l.pointerId}}function oh(l,e){return Mn.get(l)===e}function lh(l,e){Tn(l),e.getStage()&&(Mn.set(l,e),sh&&e._fire("gotpointercapture",As(new PointerEvent("gotpointercapture"))))}function Tn(l,e){const n=Mn.get(l);if(!n)return;const i=n.getStage();i&&i.content,Mn.delete(l),sh&&n._fire("lostpointercapture",As(new PointerEvent("lostpointercapture")))}var df="Stage",ff="string",Gl="px",cf="mouseout",hh="mouseleave",uh="mouseover",dh="mouseenter",fh="mousemove",ch="mousedown",gh="mouseup",Cn="pointermove",xn="pointerdown",Ur="pointerup",Pn="pointercancel",gf="lostpointercapture",Ai="pointerout",Mi="pointerleave",Li="pointerover",Ni="pointerenter",Ss="contextmenu",ph="touchstart",vh="touchend",mh="touchmove",yh="touchcancel",ws="wheel",pf=5,vf=[[dh,"_pointerenter"],[ch,"_pointerdown"],[fh,"_pointermove"],[gh,"_pointerup"],[hh,"_pointerleave"],[ph,"_pointerdown"],[mh,"_pointermove"],[vh,"_pointerup"],[yh,"_pointercancel"],[uh,"_pointerover"],[ws,"_wheel"],[Ss,"_contextmenu"],[xn,"_pointerdown"],[Cn,"_pointermove"],[Ur,"_pointerup"],[Pn,"_pointercancel"],[gf,"_lostpointercapture"]];const fs={mouse:{[Ai]:cf,[Mi]:hh,[Li]:uh,[Ni]:dh,[Cn]:fh,[xn]:ch,[Ur]:gh,[Pn]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Ai]:"touchout",[Mi]:"touchleave",[Li]:"touchover",[Ni]:"touchenter",[Cn]:mh,[xn]:ph,[Ur]:vh,[Pn]:yh,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Ai]:Ai,[Mi]:Mi,[Li]:Li,[Ni]:Ni,[Cn]:Cn,[xn]:xn,[Ur]:Ur,[Pn]:Pn,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},En=l=>l.indexOf("pointer")>=0?"pointer":l.indexOf("touch")>=0?"touch":"mouse",br=l=>{const e=En(l);if(e==="pointer")return U.pointerEventsEnabled&&fs.pointer;if(e==="touch")return fs.touch;if(e==="mouse")return fs.mouse};function zl(l={}){return(l.clipFunc||l.clipWidth||l.clipHeight)&&E.warn("Stage does not support clipping. Please use clip for Layers or Groups."),l}const mf="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Bi=[];class Yi extends at{constructor(e){super(zl(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Bi.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{zl(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",i=e.getType()==="FastLayer";n||i||E.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===ff){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var i;e.charAt(0)!=="#"?i=e:i=e.slice(1),e=document.getElementById(i)}if(!e)throw"Can not find container in document with id "+i}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,i;for(i=0;i<n;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),at.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&E._isInDocument(e)&&this.container().removeChild(e);var n=Bi.indexOf(this);return n>-1&&Bi.splice(n,1),E.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(E.warn(mf),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Xr({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=n.getContext()._context,s=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),s.forEach(function(h){if(!!h.isVisible()){var u=h._toKonvaCanvas(e);i.drawImage(u._canvas,e.x,e.y,u.getWidth()/u.getPixelRatio(),u.getHeight()/u.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,i=n.length,s=i-1,h;for(h=s;h>=0;h--){const u=n[h].getIntersection(e);if(u)return u}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+Gl,this.content.style.height=n+Gl),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(i=>{i.setSize({width:e,height:n}),i.draw()})}add(e,...n){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}super.add(e);var s=this.children.length;return s>pf&&E.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),U.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return oh(e,this)}setPointerCapture(e){lh(e,this)}releaseCapture(e){Tn(e)}getLayers(){return this.children}_bindContentEvents(){!U.isBrowser||vf.forEach(([e,n])=>{this.content.addEventListener(e,i=>{this[n](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=br(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=br(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=br(e.type),i=En(e.type);if(!!n){this.setPointersPositions(e);var s=this._getTargetShape(i),h=!le.isDragging||U.hitOnDragEnabled;s&&h?(s._fireAndBubble(n.pointerout,{evt:e}),s._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):h&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=br(e.type),i=En(e.type);if(!!n){this.setPointersPositions(e);var s=!1;this._changedPointerPositions.forEach(h=>{var u=this.getIntersection(h);if(le.justDragged=!1,U["_"+i+"ListenClick"]=!0,!(u&&u.isListening()))return;U.capturePointerEventsEnabled&&u.setPointerCapture(h.id),this[i+"ClickStartShape"]=u,u._fireAndBubble(n.pointerdown,{evt:e,pointerId:h.id}),s=!0;const c=e.type.indexOf("touch")>=0;u.preventDefault()&&e.cancelable&&c&&e.preventDefault()}),s||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=br(e.type),i=En(e.type);if(!n)return;le.isDragging&&le.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var s=!le.isDragging||U.hitOnDragEnabled;if(!s)return;var h={};let u=!1;var f=this._getTargetShape(i);this._changedPointerPositions.forEach(c=>{const p=ds(c.id)||this.getIntersection(c),v=c.id,S={evt:e,pointerId:v};var _=f!==p;if(_&&f&&(f._fireAndBubble(n.pointerout,Object.assign({},S),p),f._fireAndBubble(n.pointerleave,Object.assign({},S),p)),p){if(h[p._id])return;h[p._id]=!0}p&&p.isListening()?(u=!0,_&&(p._fireAndBubble(n.pointerover,Object.assign({},S),f),p._fireAndBubble(n.pointerenter,Object.assign({},S),f),this[i+"targetShape"]=p),p._fireAndBubble(n.pointermove,Object.assign({},S))):f&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:v}),this[i+"targetShape"]=null)}),u||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=br(e.type),i=En(e.type);if(!n)return;this.setPointersPositions(e);const s=this[i+"ClickStartShape"],h=this[i+"ClickEndShape"];var u={};let f=!1;this._changedPointerPositions.forEach(c=>{const p=ds(c.id)||this.getIntersection(c);if(p){if(p.releaseCapture(c.id),u[p._id])return;u[p._id]=!0}const v=c.id,S={evt:e,pointerId:v};let _=!1;U["_"+i+"InDblClickWindow"]?(_=!0,clearTimeout(this[i+"DblTimeout"])):le.justDragged||(U["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){U["_"+i+"InDblClickWindow"]=!1},U.dblClickWindow),p&&p.isListening()?(f=!0,this[i+"ClickEndShape"]=p,p._fireAndBubble(n.pointerup,Object.assign({},S)),U["_"+i+"ListenClick"]&&s&&s===p&&(p._fireAndBubble(n.pointerclick,Object.assign({},S)),_&&h&&h===p&&p._fireAndBubble(n.pointerdblclick,Object.assign({},S)))):(this[i+"ClickEndShape"]=null,U["_"+i+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:v}),_&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:v}))}),f||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),U["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Ss,{evt:e}):this._fire(Ss,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(ws,{evt:e}):this._fire(ws,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=ds(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Ur,As(e)),Tn(e.pointerId)}_lostpointercapture(e){Tn(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),i=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,h=>{this._pointerPositions.push({id:h.identifier,x:(h.clientX-n.left)/n.scaleX,y:(h.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,h=>{this._changedPointerPositions.push({id:h.identifier,x:(h.clientX-n.left)/n.scaleX,y:(h.clientY-n.top)/n.scaleY})})):(i=(e.clientX-n.left)/n.scaleX,s=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:E._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:s,id:E._getFirstPointerId(e)}])}_setPointerPosition(e){E.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Xr({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Rs({pixelRatio:1,width:this.width(),height:this.height()}),!!U.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return E.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Yi.prototype.nodeType=df;Pe(Yi);w.addGetterSetter(Yi,"container");var _h="hasShadow",Sh="shadowRGBA",wh="patternImage",Ch="linearGradient",xh="radialGradient";let Ii;function cs(){return Ii||(Ii=E.createCanvasElement().getContext("2d"),Ii)}const Rn={};function yf(l){l.fill()}function _f(l){l.stroke()}function Sf(l){l.fill()}function wf(l){l.stroke()}function Cf(){this._clearCache(_h)}function xf(){this._clearCache(Sh)}function Pf(){this._clearCache(wh)}function Ef(){this._clearCache(Ch)}function kf(){this._clearCache(xh)}class I extends z{constructor(e){super(e);let n;for(;n=E.getRandomColor(),!(n&&!(n in Rn)););this.colorKey=n,Rn[n]=this}getContext(){return E.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return E.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(_h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(wh,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=cs();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const i=new nt;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(U.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),h=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);n.setTransform(h)}return n}}_getLinearGradient(){return this._getCache(Ch,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=cs(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),h=n.createLinearGradient(i.x,i.y,s.x,s.y),u=0;u<e.length;u+=2)h.addColorStop(e[u],e[u+1]);return h}}_getRadialGradient(){return this._getCache(xh,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=cs(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),h=n.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius()),u=0;u<e.length;u+=2)h.addColorStop(e[u],e[u+1]);return h}}getShadowRGBA(){return this._getCache(Sh,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var e=E.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),i=n.bufferHitCanvas,s;return i.getContext().clear(),this.drawHit(i,null,!0),s=i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,s[3]>0}destroy(){return z.prototype.destroy.call(this),delete Rn[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const s=e||this.hasFill(),h=this.hasStroke(),u=this.getAbsoluteOpacity()!==1;if(s&&h&&u)return!0;const f=this.hasShadow(),c=this.shadowForStrokeEnabled();return!!(s&&h&&f&&c)}setStrokeHitEnabled(e){E.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,i=e.relativeTo,s=this.getSelfRect(),u=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,f=s.width+u,c=s.height+u,p=!e.skipShadow&&this.hasShadow(),v=p?this.shadowOffsetX():0,S=p?this.shadowOffsetY():0,_=f+Math.abs(v),C=c+Math.abs(S),y=p&&this.shadowBlur()||0,A=_+y*2,k=C+y*2,O={width:A,height:k,x:-(u/2+y)+Math.min(v,0)+s.x,y:-(u/2+y)+Math.min(S,0)+s.y};return n?O:this._transformedRect(O,i)}drawScene(e,n){var i=this.getLayer(),s=e||i.getCanvas(),h=s.getContext(),u=this._getCanvasCache(),f=this.getSceneFunc(),c=this.hasShadow(),p,v,S,_=s.isCache,C=n===this;if(!this.isVisible()&&!C)return this;if(u){h.save();var y=this.getAbsoluteTransform(n).getMatrix();return h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(h),h.restore(),this}if(!f)return this;if(h.save(),this._useBufferCanvas()&&!_){p=this.getStage(),v=p.bufferCanvas,S=v.getContext(),S.clear(),S.save(),S._applyLineJoin(this);var A=this.getAbsoluteTransform(n).getMatrix();S.transform(A[0],A[1],A[2],A[3],A[4],A[5]),f.call(this,S,this),S.restore();var k=v.pixelRatio;c&&h._applyShadow(this),h._applyOpacity(this),h._applyGlobalCompositeOperation(this),h.drawImage(v._canvas,0,0,v.width/k,v.height/k)}else{if(h._applyLineJoin(this),!C){var A=this.getAbsoluteTransform(n).getMatrix();h.transform(A[0],A[1],A[2],A[3],A[4],A[5]),h._applyOpacity(this),h._applyGlobalCompositeOperation(this)}c&&h._applyShadow(this),f.call(this,h,this)}return h.restore(),this}drawHit(e,n,i=!1){if(!this.shouldDrawHit(n,i))return this;var s=this.getLayer(),h=e||s.hitCanvas,u=h&&h.getContext(),f=this.hitFunc()||this.sceneFunc(),c=this._getCanvasCache(),p=c&&c.hit;if(this.colorKey||E.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){u.save();var v=this.getAbsoluteTransform(n).getMatrix();return u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(u),u.restore(),this}if(!f)return this;if(u.save(),u._applyLineJoin(this),!(this===n)){var _=this.getAbsoluteTransform(n).getMatrix();u.transform(_[0],_[1],_[2],_[3],_[4],_[5])}return f.call(this,u,this),u.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=n.hit,h=s.getContext(),u=s.getWidth(),f=s.getHeight(),c,p,v,S,_,C;h.clear(),h.drawImage(i._canvas,0,0,u,f);try{for(c=h.getImageData(0,0,u,f),p=c.data,v=p.length,S=E._hexToRgb(this.colorKey),_=0;_<v;_+=4)C=p[_+3],C>e?(p[_]=S.r,p[_+1]=S.g,p[_+2]=S.b,p[_+3]=255):p[_+3]=0;h.putImageData(c,0,0)}catch(y){E.error("Unable to draw hit graph from cached scene canvas. "+y.message)}return this}hasPointerCapture(e){return oh(e,this)}setPointerCapture(e){lh(e,this)}releaseCapture(e){Tn(e)}}I.prototype._fillFunc=yf;I.prototype._strokeFunc=_f;I.prototype._fillFuncHit=Sf;I.prototype._strokeFuncHit=wf;I.prototype._centroid=!1;I.prototype.nodeType="Shape";Pe(I);I.prototype.eventListeners={};I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Cf);I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",xf);I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Pf);I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Ef);I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",kf);w.addGetterSetter(I,"stroke",void 0,ah());w.addGetterSetter(I,"strokeWidth",2,G());w.addGetterSetter(I,"fillAfterStrokeEnabled",!1);w.addGetterSetter(I,"hitStrokeWidth","auto",Ts());w.addGetterSetter(I,"strokeHitEnabled",!0,Pt());w.addGetterSetter(I,"perfectDrawEnabled",!0,Pt());w.addGetterSetter(I,"shadowForStrokeEnabled",!0,Pt());w.addGetterSetter(I,"lineJoin");w.addGetterSetter(I,"lineCap");w.addGetterSetter(I,"sceneFunc");w.addGetterSetter(I,"hitFunc");w.addGetterSetter(I,"dash");w.addGetterSetter(I,"dashOffset",0,G());w.addGetterSetter(I,"shadowColor",void 0,Vr());w.addGetterSetter(I,"shadowBlur",0,G());w.addGetterSetter(I,"shadowOpacity",1,G());w.addComponentsGetterSetter(I,"shadowOffset",["x","y"]);w.addGetterSetter(I,"shadowOffsetX",0,G());w.addGetterSetter(I,"shadowOffsetY",0,G());w.addGetterSetter(I,"fillPatternImage");w.addGetterSetter(I,"fill",void 0,ah());w.addGetterSetter(I,"fillPatternX",0,G());w.addGetterSetter(I,"fillPatternY",0,G());w.addGetterSetter(I,"fillLinearGradientColorStops");w.addGetterSetter(I,"strokeLinearGradientColorStops");w.addGetterSetter(I,"fillRadialGradientStartRadius",0);w.addGetterSetter(I,"fillRadialGradientEndRadius",0);w.addGetterSetter(I,"fillRadialGradientColorStops");w.addGetterSetter(I,"fillPatternRepeat","repeat");w.addGetterSetter(I,"fillEnabled",!0);w.addGetterSetter(I,"strokeEnabled",!0);w.addGetterSetter(I,"shadowEnabled",!0);w.addGetterSetter(I,"dashEnabled",!0);w.addGetterSetter(I,"strokeScaleEnabled",!0);w.addGetterSetter(I,"fillPriority","color");w.addComponentsGetterSetter(I,"fillPatternOffset",["x","y"]);w.addGetterSetter(I,"fillPatternOffsetX",0,G());w.addGetterSetter(I,"fillPatternOffsetY",0,G());w.addComponentsGetterSetter(I,"fillPatternScale",["x","y"]);w.addGetterSetter(I,"fillPatternScaleX",1,G());w.addGetterSetter(I,"fillPatternScaleY",1,G());w.addComponentsGetterSetter(I,"fillLinearGradientStartPoint",["x","y"]);w.addComponentsGetterSetter(I,"strokeLinearGradientStartPoint",["x","y"]);w.addGetterSetter(I,"fillLinearGradientStartPointX",0);w.addGetterSetter(I,"strokeLinearGradientStartPointX",0);w.addGetterSetter(I,"fillLinearGradientStartPointY",0);w.addGetterSetter(I,"strokeLinearGradientStartPointY",0);w.addComponentsGetterSetter(I,"fillLinearGradientEndPoint",["x","y"]);w.addComponentsGetterSetter(I,"strokeLinearGradientEndPoint",["x","y"]);w.addGetterSetter(I,"fillLinearGradientEndPointX",0);w.addGetterSetter(I,"strokeLinearGradientEndPointX",0);w.addGetterSetter(I,"fillLinearGradientEndPointY",0);w.addGetterSetter(I,"strokeLinearGradientEndPointY",0);w.addComponentsGetterSetter(I,"fillRadialGradientStartPoint",["x","y"]);w.addGetterSetter(I,"fillRadialGradientStartPointX",0);w.addGetterSetter(I,"fillRadialGradientStartPointY",0);w.addComponentsGetterSetter(I,"fillRadialGradientEndPoint",["x","y"]);w.addGetterSetter(I,"fillRadialGradientEndPointX",0);w.addGetterSetter(I,"fillRadialGradientEndPointY",0);w.addGetterSetter(I,"fillPatternRotation",0);w.backCompat(I,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var Tf="#",Rf="beforeDraw",Af="draw",Ph=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Mf=Ph.length;class wr extends at{constructor(e){super(e),this.canvas=new Xr,this.hitCanvas=new Rs({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){z.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=z.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(z.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(z.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return z.prototype.remove.call(this),e&&e.parentNode&&E._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&E.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),z.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){E.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){E.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,E.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let s=0;s<Mf;s++){const h=Ph[s],u=this._getIntersection({x:e.x+h.x*n,y:e.y+h.y*n}),f=u.shape;if(f)return f;if(i=!!u.antialiased,!u.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,s=i[3];if(s===255){const h=E._rgbToHex(i[0],i[1],i[2]),u=Rn[Tf+h];return u?{shape:u}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,n){var i=this.getLayer(),s=e||i&&i.getCanvas();return this._fire(Rf,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),at.prototype.drawScene.call(this,s,n),this._fire(Af,{node:this}),this}drawHit(e,n){var i=this.getLayer(),s=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),at.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){E.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return E.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return E.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}wr.prototype.nodeType="Layer";Pe(wr);w.addGetterSetter(wr,"imageSmoothingEnabled",!0);w.addGetterSetter(wr,"clearBeforeDraw",!0);w.addGetterSetter(wr,"hitGraphEnabled",!0,Pt());class Ms extends wr{constructor(e){super(e),this.listening(!1),E.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Ms.prototype.nodeType="FastLayer";Pe(Ms);class jr extends at{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&E.throw("You may only add groups and shapes to groups.")}}jr.prototype.nodeType="Group";Pe(jr);var gs=function(){return Yr.performance&&Yr.performance.now?function(){return Yr.performance.now()}:function(){return new Date().getTime()}}();class pt{constructor(e,n){this.id=pt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gs(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,i=n.length,s;for(s=0;s<i;s++)if(n[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=pt,n=e.animations,i=n.length,s;for(s=0;s<i;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gs(),pt._addAnimation(this),this}stop(){return pt._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,i=this.animations,s=i.length,h;for(h=0;h<s;h++)if(i[h].id===n){this.animations.splice(h,1);break}}static _runFrames(){var e={},n=this.animations,i,s,h,u,f,c,p,v,S;for(u=0;u<n.length;u++)if(i=n[u],s=i.layers,h=i.func,i._updateFrameObject(gs()),c=s.length,h?S=h.call(i,i.frame)!==!1:S=!0,!!S)for(f=0;f<c;f++)p=s[f],p._id!==void 0&&(e[p._id]=p);for(v in e)!e.hasOwnProperty(v)||e[v].batchDraw()}static _animationLoop(){var e=pt;e.animations.length?(e._runFrames(),E.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,E.requestAnimFrame(this._animationLoop))}}pt.animations=[];pt.animIdCounter=0;pt.animRunning=!1;var Lf={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Nf=1,Fl=2,Hl=3,If=0,Bl=["fill","stroke","shadowColor"];class Of{constructor(e,n,i,s,h,u,f){this.prop=e,this.propFunc=n,this.begin=s,this._pos=s,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=h-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Fl,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Hl,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Fl?this.setTime(e):this.state===Hl&&this.setTime(this.duration-e)}pause(){this.state=Nf,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Te{constructor(e){var n=this,i=e.node,s=i._id,h,u=e.easing||An.Linear,f=!!e.yoyo,c;typeof e.duration>"u"?h=.3:e.duration===0?h=.001:h=e.duration,this.node=i,this._id=If++;var p=i.getLayer()||(i instanceof U.Stage?i.getLayers():null);p||E.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new pt(function(){n.tween.onEnterFrame()},p),this.tween=new Of(c,function(v){n._tweenFunc(v)},u,0,1,h*1e3,f),this._addListeners(),Te.attrs[s]||(Te.attrs[s]={}),Te.attrs[s][this._id]||(Te.attrs[s][this._id]={}),Te.tweens[s]||(Te.tweens[s]={});for(c in e)Lf[c]===void 0&&this._addAttr(c,e[c]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var i=this.node,s=i._id,h,u,f,c,p,v,S,_;if(f=Te.tweens[s][e],f&&delete Te.attrs[s][f][e],h=i.getAttr(e),E._isArray(n))if(u=[],p=Math.max(n.length,h.length),e==="points"&&n.length!==h.length&&(n.length>h.length?(S=h,h=E._prepareArrayForTween(h,n,i.closed())):(v=n,n=E._prepareArrayForTween(n,h,i.closed()))),e.indexOf("fill")===0)for(c=0;c<p;c++)if(c%2===0)u.push(n[c]-h[c]);else{var C=E.colorToRGBA(h[c]);_=E.colorToRGBA(n[c]),h[c]=C,u.push({r:_.r-C.r,g:_.g-C.g,b:_.b-C.b,a:_.a-C.a})}else for(c=0;c<p;c++)u.push(n[c]-h[c]);else Bl.indexOf(e)!==-1?(h=E.colorToRGBA(h),_=E.colorToRGBA(n),u={r:_.r-h.r,g:_.g-h.g,b:_.b-h.b,a:_.a-h.a}):u=n-h;Te.attrs[s][this._id][e]={start:h,diff:u,end:n,trueEnd:v,trueStart:S},Te.tweens[s][e]=this._id}_tweenFunc(e){var n=this.node,i=Te.attrs[n._id][this._id],s,h,u,f,c,p,v,S;for(s in i){if(h=i[s],u=h.start,f=h.diff,S=h.end,E._isArray(u))if(c=[],v=Math.max(u.length,S.length),s.indexOf("fill")===0)for(p=0;p<v;p++)p%2===0?c.push((u[p]||0)+f[p]*e):c.push("rgba("+Math.round(u[p].r+f[p].r*e)+","+Math.round(u[p].g+f[p].g*e)+","+Math.round(u[p].b+f[p].b*e)+","+(u[p].a+f[p].a*e)+")");else for(p=0;p<v;p++)c.push((u[p]||0)+f[p]*e);else Bl.indexOf(s)!==-1?c="rgba("+Math.round(u.r+f.r*e)+","+Math.round(u.g+f.g*e)+","+Math.round(u.b+f.b*e)+","+(u.a+f.a*e)+")":c=u+f*e;n.setAttr(s,c)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=Te.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=Te.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,i=Te.tweens[e],s;this.pause();for(s in i)delete Te.tweens[e][s];delete Te.attrs[e][n]}}Te.attrs={};Te.tweens={};z.prototype.to=function(l){var e=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),e&&e()};var n=new Te(l);n.play()};const An={BackEaseIn(l,e,n,i){var s=1.70158;return n*(l/=i)*l*((s+1)*l-s)+e},BackEaseOut(l,e,n,i){var s=1.70158;return n*((l=l/i-1)*l*((s+1)*l+s)+1)+e},BackEaseInOut(l,e,n,i){var s=1.70158;return(l/=i/2)<1?n/2*(l*l*(((s*=1.525)+1)*l-s))+e:n/2*((l-=2)*l*(((s*=1.525)+1)*l+s)+2)+e},ElasticEaseIn(l,e,n,i,s,h){var u=0;return l===0?e:(l/=i)===1?e+n:(h||(h=i*.3),!s||s<Math.abs(n)?(s=n,u=h/4):u=h/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*(l-=1))*Math.sin((l*i-u)*(2*Math.PI)/h))+e)},ElasticEaseOut(l,e,n,i,s,h){var u=0;return l===0?e:(l/=i)===1?e+n:(h||(h=i*.3),!s||s<Math.abs(n)?(s=n,u=h/4):u=h/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*l)*Math.sin((l*i-u)*(2*Math.PI)/h)+n+e)},ElasticEaseInOut(l,e,n,i,s,h){var u=0;return l===0?e:(l/=i/2)===2?e+n:(h||(h=i*(.3*1.5)),!s||s<Math.abs(n)?(s=n,u=h/4):u=h/(2*Math.PI)*Math.asin(n/s),l<1?-.5*(s*Math.pow(2,10*(l-=1))*Math.sin((l*i-u)*(2*Math.PI)/h))+e:s*Math.pow(2,-10*(l-=1))*Math.sin((l*i-u)*(2*Math.PI)/h)*.5+n+e)},BounceEaseOut(l,e,n,i){return(l/=i)<1/2.75?n*(7.5625*l*l)+e:l<2/2.75?n*(7.5625*(l-=1.5/2.75)*l+.75)+e:l<2.5/2.75?n*(7.5625*(l-=2.25/2.75)*l+.9375)+e:n*(7.5625*(l-=2.625/2.75)*l+.984375)+e},BounceEaseIn(l,e,n,i){return n-An.BounceEaseOut(i-l,0,n,i)+e},BounceEaseInOut(l,e,n,i){return l<i/2?An.BounceEaseIn(l*2,0,n,i)*.5+e:An.BounceEaseOut(l*2-i,0,n,i)*.5+n*.5+e},EaseIn(l,e,n,i){return n*(l/=i)*l+e},EaseOut(l,e,n,i){return-n*(l/=i)*(l-2)+e},EaseInOut(l,e,n,i){return(l/=i/2)<1?n/2*l*l+e:-n/2*(--l*(l-2)-1)+e},StrongEaseIn(l,e,n,i){return n*(l/=i)*l*l*l*l+e},StrongEaseOut(l,e,n,i){return n*((l=l/i-1)*l*l*l*l+1)+e},StrongEaseInOut(l,e,n,i){return(l/=i/2)<1?n/2*l*l*l*l*l+e:n/2*((l-=2)*l*l*l*l+2)+e},Linear(l,e,n,i){return n*l/i+e}},Sr=E._assign(U,{Util:E,Transform:nt,Node:z,Container:at,Stage:Yi,stages:Bi,Layer:wr,FastLayer:Ms,Group:jr,DD:le,Shape:I,shapes:Rn,Animation:pt,Tween:Te,Easings:An,Context:Wi,Canvas:Ui});class Xt extends I{_sceneFunc(e){var n=U.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),s=U.getAngle(i?360-this.angle():this.angle()),h=Math.cos(Math.min(s,Math.PI)),u=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),c=Math.sin(Math.min(s,Math.PI/2)),p=h*(h>0?e:n),v=u*n,S=f*(f>0?e:n),_=c*(c>0?n:e);return{x:p,y:i?-1*_:S,width:v-p,height:_-S}}}Xt.prototype._centroid=!0;Xt.prototype.className="Arc";Xt.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Pe(Xt);w.addGetterSetter(Xt,"innerRadius",0,G());w.addGetterSetter(Xt,"outerRadius",0,G());w.addGetterSetter(Xt,"angle",0,G());w.addGetterSetter(Xt,"clockwise",!1,Pt());function Cs(l,e,n,i,s,h,u){var f=Math.sqrt(Math.pow(n-l,2)+Math.pow(i-e,2)),c=Math.sqrt(Math.pow(s-n,2)+Math.pow(h-i,2)),p=u*f/(f+c),v=u*c/(f+c),S=n-p*(s-l),_=i-p*(h-e),C=n+v*(s-l),y=i+v*(h-e);return[S,_,C,y]}function bl(l,e){var n=l.length,i=[],s,h;for(s=2;s<n-2;s+=2)h=Cs(l[s-2],l[s-1],l[s],l[s+1],l[s+2],l[s+3],e),!isNaN(h[0])&&(i.push(h[0]),i.push(h[1]),i.push(l[s]),i.push(l[s+1]),i.push(h[2]),i.push(h[3]));return i}class jt extends I{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),i=n.length,s=this.tension(),h=this.closed(),u=this.bezier(),f,c,p;if(!!i){if(e.beginPath(),e.moveTo(n[0],n[1]),s!==0&&i>4){for(f=this.getTensionPoints(),c=f.length,p=h?0:4,h||e.quadraticCurveTo(f[0],f[1],f[2],f[3]);p<c-2;)e.bezierCurveTo(f[p++],f[p++],f[p++],f[p++],f[p++],f[p++]);h||e.quadraticCurveTo(f[c-2],f[c-1],n[i-2],n[i-1])}else if(u)for(p=2;p<i;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<i;p+=2)e.lineTo(n[p],n[p+1]);h?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():bl(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,i=this.tension(),s=Cs(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),h=Cs(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),u=bl(e,i),f=[s[2],s[3]].concat(u).concat([h[0],h[1],e[n-2],e[n-1],h[2],h[3],s[0],s[1],e[0],e[1]]);return f}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],i=e[0],s=e[1],h=e[1],u,f,c=0;c<e.length/2;c++)u=e[c*2],f=e[c*2+1],n=Math.min(n,u),i=Math.max(i,u),s=Math.min(s,f),h=Math.max(h,f);return{x:n,y:s,width:i-n,height:h-s}}}jt.prototype.className="Line";jt.prototype._attrsAffectingSize=["points","bezier","tension"];Pe(jt);w.addGetterSetter(jt,"closed",!1);w.addGetterSetter(jt,"bezier",!1);w.addGetterSetter(jt,"tension",0,G());w.addGetterSetter(jt,"points",[],Ud());class fe extends I{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=fe.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=fe.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var i=!1,s=0;s<n.length;s++){var h=n[s].command,u=n[s].points;switch(h){case"L":e.lineTo(u[0],u[1]);break;case"M":e.moveTo(u[0],u[1]);break;case"C":e.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case"Q":e.quadraticCurveTo(u[0],u[1],u[2],u[3]);break;case"A":var f=u[0],c=u[1],p=u[2],v=u[3],S=u[4],_=u[5],C=u[6],y=u[7],A=p>v?p:v,k=p>v?1:p/v,O=p>v?v/p:1;e.translate(f,c),e.rotate(C),e.scale(k,O),e.arc(0,0,A,S,S+_,1-y),e.scale(1/k,1/O),e.rotate(-C),e.translate(-f,-c);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var v=p.points[4],S=p.points[5],_=p.points[4]+S,C=Math.PI/180;if(Math.abs(v-_)<C&&(C=Math.abs(v-_)),S<0)for(let y=v-C;y>_;y-=C){const A=fe.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(A.x,A.y)}else for(let y=v+C;y<_;y+=C){const A=fe.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],y,0);e.push(A.x,A.y)}}else if(p.command==="C")for(let y=0;y<=1;y+=.01){const A=fe.getPointOnCubicBezier(y,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(A.x,A.y)}else e=e.concat(p.points)});for(var n=e[0],i=e[0],s=e[1],h=e[1],u,f,c=0;c<e.length/2;c++)u=e[c*2],f=e[c*2+1],isNaN(u)||(n=Math.min(n,u),i=Math.max(i,u)),isNaN(f)||(s=Math.min(s,f),h=Math.max(h,f));return{x:n,y:s,width:i-n,height:h-s}}getLength(){return this.pathLength}getPointAtLength(e){var n,i=0,s=this.dataArray.length;if(!s)return null;for(;i<s&&e>this.dataArray[i].pathLength;)e-=this.dataArray[i].pathLength,++i;if(i===s)return n=this.dataArray[i-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[i].points.slice(0,2),{x:n[0],y:n[1]};var h=this.dataArray[i],u=h.points;switch(h.command){case"L":return fe.getPointOnLine(e,h.start.x,h.start.y,u[0],u[1]);case"C":return fe.getPointOnCubicBezier(e/h.pathLength,h.start.x,h.start.y,u[0],u[1],u[2],u[3],u[4],u[5]);case"Q":return fe.getPointOnQuadraticBezier(e/h.pathLength,h.start.x,h.start.y,u[0],u[1],u[2],u[3]);case"A":var f=u[0],c=u[1],p=u[2],v=u[3],S=u[4],_=u[5],C=u[6];return S+=_*e/h.pathLength,fe.getPointOnEllipticalArc(f,c,p,v,S,C)}return null}static getLineLength(e,n,i,s){return Math.sqrt((i-e)*(i-e)+(s-n)*(s-n))}static getPointOnLine(e,n,i,s,h,u,f){u===void 0&&(u=n),f===void 0&&(f=i);var c=(h-i)/(s-n+1e-8),p=Math.sqrt(e*e/(1+c*c));s<n&&(p*=-1);var v=c*p,S;if(s===n)S={x:u,y:f+v};else if((f-i)/(u-n+1e-8)===c)S={x:u+p,y:f+v};else{var _,C,y=this.getLineLength(n,i,s,h),A=(u-n)*(s-n)+(f-i)*(h-i);A=A/(y*y),_=n+A*(s-n),C=i+A*(h-i);var k=this.getLineLength(u,f,_,C),O=Math.sqrt(e*e-k*k);p=Math.sqrt(O*O/(1+c*c)),s<n&&(p*=-1),v=c*p,S={x:_+p,y:C+v}}return S}static getPointOnCubicBezier(e,n,i,s,h,u,f,c,p){function v(k){return k*k*k}function S(k){return 3*k*k*(1-k)}function _(k){return 3*k*(1-k)*(1-k)}function C(k){return(1-k)*(1-k)*(1-k)}var y=c*v(e)+u*S(e)+s*_(e)+n*C(e),A=p*v(e)+f*S(e)+h*_(e)+i*C(e);return{x:y,y:A}}static getPointOnQuadraticBezier(e,n,i,s,h,u,f){function c(C){return C*C}function p(C){return 2*C*(1-C)}function v(C){return(1-C)*(1-C)}var S=u*c(e)+s*p(e)+n*v(e),_=f*c(e)+h*p(e)+i*v(e);return{x:S,y:_}}static getPointOnEllipticalArc(e,n,i,s,h,u){var f=Math.cos(u),c=Math.sin(u),p={x:i*Math.cos(h),y:s*Math.sin(h)};return{x:e+(p.x*f-p.y*c),y:n+(p.x*c+p.y*f)}}static parsePathData(e){if(!e)return[];var n=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var s=0;s<i.length;s++)n=n.replace(new RegExp(i[s],"g"),"|"+i[s]);var h=n.split("|"),u=[],f=[],c=0,p=0,v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,S;for(s=1;s<h.length;s++){var _=h[s],C=_.charAt(0);for(_=_.slice(1),f.length=0;S=v.exec(_);)f.push(S[0]);for(var y=[],A=0,k=f.length;A<k;A++){if(f[A]==="00"){y.push(0,0);continue}var O=parseFloat(f[A]);isNaN(O)?y.push(0):y.push(O)}for(;y.length>0&&!isNaN(y[0]);){var N=null,L=[],F=c,j=p,H,V,Y,q,K,Q,te,J,de,Ae;switch(C){case"l":c+=y.shift(),p+=y.shift(),N="L",L.push(c,p);break;case"L":c=y.shift(),p=y.shift(),L.push(c,p);break;case"m":var he=y.shift(),Ee=y.shift();if(c+=he,p+=Ee,N="M",u.length>2&&u[u.length-1].command==="z"){for(var Be=u.length-2;Be>=0;Be--)if(u[Be].command==="M"){c=u[Be].points[0]+he,p=u[Be].points[1]+Ee;break}}L.push(c,p),C="l";break;case"M":c=y.shift(),p=y.shift(),N="M",L.push(c,p),C="L";break;case"h":c+=y.shift(),N="L",L.push(c,p);break;case"H":c=y.shift(),N="L",L.push(c,p);break;case"v":p+=y.shift(),N="L",L.push(c,p);break;case"V":p=y.shift(),N="L",L.push(c,p);break;case"C":L.push(y.shift(),y.shift(),y.shift(),y.shift()),c=y.shift(),p=y.shift(),L.push(c,p);break;case"c":L.push(c+y.shift(),p+y.shift(),c+y.shift(),p+y.shift()),c+=y.shift(),p+=y.shift(),N="C",L.push(c,p);break;case"S":V=c,Y=p,H=u[u.length-1],H.command==="C"&&(V=c+(c-H.points[2]),Y=p+(p-H.points[3])),L.push(V,Y,y.shift(),y.shift()),c=y.shift(),p=y.shift(),N="C",L.push(c,p);break;case"s":V=c,Y=p,H=u[u.length-1],H.command==="C"&&(V=c+(c-H.points[2]),Y=p+(p-H.points[3])),L.push(V,Y,c+y.shift(),p+y.shift()),c+=y.shift(),p+=y.shift(),N="C",L.push(c,p);break;case"Q":L.push(y.shift(),y.shift()),c=y.shift(),p=y.shift(),L.push(c,p);break;case"q":L.push(c+y.shift(),p+y.shift()),c+=y.shift(),p+=y.shift(),N="Q",L.push(c,p);break;case"T":V=c,Y=p,H=u[u.length-1],H.command==="Q"&&(V=c+(c-H.points[0]),Y=p+(p-H.points[1])),c=y.shift(),p=y.shift(),N="Q",L.push(V,Y,c,p);break;case"t":V=c,Y=p,H=u[u.length-1],H.command==="Q"&&(V=c+(c-H.points[0]),Y=p+(p-H.points[1])),c+=y.shift(),p+=y.shift(),N="Q",L.push(V,Y,c,p);break;case"A":q=y.shift(),K=y.shift(),Q=y.shift(),te=y.shift(),J=y.shift(),de=c,Ae=p,c=y.shift(),p=y.shift(),N="A",L=this.convertEndpointToCenterParameterization(de,Ae,c,p,te,J,q,K,Q);break;case"a":q=y.shift(),K=y.shift(),Q=y.shift(),te=y.shift(),J=y.shift(),de=c,Ae=p,c+=y.shift(),p+=y.shift(),N="A",L=this.convertEndpointToCenterParameterization(de,Ae,c,p,te,J,q,K,Q);break}u.push({command:N||C,points:L,start:{x:F,y:j},pathLength:this.calcLength(F,j,N||C,L)})}(C==="z"||C==="Z")&&u.push({command:"z",points:[],start:void 0,pathLength:0})}return u}static calcLength(e,n,i,s){var h,u,f,c,p=fe;switch(i){case"L":return p.getLineLength(e,n,s[0],s[1]);case"C":for(h=0,u=p.getPointOnCubicBezier(0,e,n,s[0],s[1],s[2],s[3],s[4],s[5]),c=.01;c<=1;c+=.01)f=p.getPointOnCubicBezier(c,e,n,s[0],s[1],s[2],s[3],s[4],s[5]),h+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;return h;case"Q":for(h=0,u=p.getPointOnQuadraticBezier(0,e,n,s[0],s[1],s[2],s[3]),c=.01;c<=1;c+=.01)f=p.getPointOnQuadraticBezier(c,e,n,s[0],s[1],s[2],s[3]),h+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;return h;case"A":h=0;var v=s[4],S=s[5],_=s[4]+S,C=Math.PI/180;if(Math.abs(v-_)<C&&(C=Math.abs(v-_)),u=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],v,0),S<0)for(c=v-C;c>_;c-=C)f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),h+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;else for(c=v+C;c<_;c+=C)f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),h+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;return f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],_,0),h+=p.getLineLength(u.x,u.y,f.x,f.y),h}return 0}static convertEndpointToCenterParameterization(e,n,i,s,h,u,f,c,p){var v=p*(Math.PI/180),S=Math.cos(v)*(e-i)/2+Math.sin(v)*(n-s)/2,_=-1*Math.sin(v)*(e-i)/2+Math.cos(v)*(n-s)/2,C=S*S/(f*f)+_*_/(c*c);C>1&&(f*=Math.sqrt(C),c*=Math.sqrt(C));var y=Math.sqrt((f*f*(c*c)-f*f*(_*_)-c*c*(S*S))/(f*f*(_*_)+c*c*(S*S)));h===u&&(y*=-1),isNaN(y)&&(y=0);var A=y*f*_/c,k=y*-c*S/f,O=(e+i)/2+Math.cos(v)*A-Math.sin(v)*k,N=(n+s)/2+Math.sin(v)*A+Math.cos(v)*k,L=function(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1])},F=function(K,Q){return(K[0]*Q[0]+K[1]*Q[1])/(L(K)*L(Q))},j=function(K,Q){return(K[0]*Q[1]<K[1]*Q[0]?-1:1)*Math.acos(F(K,Q))},H=j([1,0],[(S-A)/f,(_-k)/c]),V=[(S-A)/f,(_-k)/c],Y=[(-1*S-A)/f,(-1*_-k)/c],q=j(V,Y);return F(V,Y)<=-1&&(q=Math.PI),F(V,Y)>=1&&(q=0),u===0&&q>0&&(q=q-2*Math.PI),u===1&&q<0&&(q=q+2*Math.PI),[O,N,f,c,H,q,v,u]}}fe.prototype.className="Path";fe.prototype._attrsAffectingSize=["data"];Pe(fe);w.addGetterSetter(fe,"data");class Cr extends jt{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,i=this.points(),s=i,h=this.tension()!==0&&i.length>4;h&&(s=this.getTensionPoints());var u=this.pointerLength(),f=i.length,c,p;if(h){const _=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],C=fe.calcLength(s[s.length-4],s[s.length-3],"C",_),y=fe.getPointOnQuadraticBezier(Math.min(1,1-u/C),_[0],_[1],_[2],_[3],_[4],_[5]);c=i[f-2]-y.x,p=i[f-1]-y.y}else c=i[f-2]-i[f-4],p=i[f-1]-i[f-3];var v=(Math.atan2(p,c)+n)%n,S=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[f-2],i[f-1]),e.rotate(v),e.moveTo(0,0),e.lineTo(-u,S/2),e.lineTo(-u,-S/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),h?(c=(s[0]+s[2])/2-i[0],p=(s[1]+s[3])/2-i[1]):(c=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-c)+n)%n),e.moveTo(0,0),e.lineTo(-u,S/2),e.lineTo(-u,-S/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Cr.prototype.className="Arrow";Pe(Cr);w.addGetterSetter(Cr,"pointerLength",10,G());w.addGetterSetter(Cr,"pointerWidth",10,G());w.addGetterSetter(Cr,"pointerAtBeginning",!1);w.addGetterSetter(Cr,"pointerAtEnding",!0);class qr extends I{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}qr.prototype._centroid=!0;qr.prototype.className="Circle";qr.prototype._attrsAffectingSize=["radius"];Pe(qr);w.addGetterSetter(qr,"radius",0,G());class sr extends I{_sceneFunc(e){var n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}sr.prototype.className="Ellipse";sr.prototype._centroid=!0;sr.prototype._attrsAffectingSize=["radiusX","radiusY"];Pe(sr);w.addComponentsGetterSetter(sr,"radius",["x","y"]);w.addGetterSetter(sr,"radiusX",0,G());w.addGetterSetter(sr,"radiusY",0,G());class Et extends I{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),s=this.attrs.image;let h;if(s){const u=this.attrs.cropWidth,f=this.attrs.cropHeight;u&&f?h=[s,this.cropX(),this.cropY(),u,f,0,0,n,i]:h=[s,0,0,n,i]}(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),s&&e.drawImage.apply(e,h)}_hitFunc(e){var n=this.width(),i=this.height();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,i=null){var s=E.createImageElement();s.onload=function(){var h=new Et({image:s});n(h)},s.onerror=i,s.crossOrigin="Anonymous",s.src=e}}Et.prototype.className="Image";Pe(Et);w.addGetterSetter(Et,"image");w.addComponentsGetterSetter(Et,"crop",["x","y","width","height"]);w.addGetterSetter(Et,"cropX",0,G());w.addGetterSetter(Et,"cropY",0,G());w.addGetterSetter(Et,"cropWidth",0,G());w.addGetterSetter(Et,"cropHeight",0,G());var Eh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Df="Change.konva",Gf="none",xs="up",Ps="right",Es="down",ks="left",zf=Eh.length;class Ls extends jr{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,i,s=function(){n._sync()};for(i=0;i<zf;i++)e.on(Eh[i]+Df,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),i,s,h,u,f,c,p;if(e&&n){switch(i=e.width(),s=e.height(),h=n.pointerDirection(),u=n.pointerWidth(),p=n.pointerHeight(),f=0,c=0,h){case xs:f=i/2,c=-1*p;break;case Ps:f=i+u,c=s/2;break;case Es:f=i/2,c=s+p;break;case ks:f=-1*u,c=s/2;break}n.setAttrs({x:-1*f,y:-1*c,width:i,height:s}),e.setAttrs({x:-1*f,y:-1*c})}}}Ls.prototype.className="Label";Pe(Ls);class xr extends I{_sceneFunc(e){var n=this.width(),i=this.height(),s=this.pointerDirection(),h=this.pointerWidth(),u=this.pointerHeight(),f=this.cornerRadius();let c=0,p=0,v=0,S=0;typeof f=="number"?c=p=v=S=Math.min(f,n/2,i/2):(c=Math.min(f[0]||0,n/2,i/2),p=Math.min(f[1]||0,n/2,i/2),S=Math.min(f[2]||0,n/2,i/2),v=Math.min(f[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(c,0),s===xs&&(e.lineTo((n-h)/2,0),e.lineTo(n/2,-1*u),e.lineTo((n+h)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),s===Ps&&(e.lineTo(n,(i-u)/2),e.lineTo(n+h,i/2),e.lineTo(n,(i+u)/2)),e.lineTo(n,i-S),e.arc(n-S,i-S,S,0,Math.PI/2,!1),s===Es&&(e.lineTo((n+h)/2,i),e.lineTo(n/2,i+u),e.lineTo((n-h)/2,i)),e.lineTo(v,i),e.arc(v,i-v,v,Math.PI/2,Math.PI,!1),s===ks&&(e.lineTo(0,(i+u)/2),e.lineTo(-1*h,i/2),e.lineTo(0,(i-u)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,i=this.pointerWidth(),s=this.pointerHeight(),h=this.pointerDirection(),u=this.width(),f=this.height();return h===xs?(n-=s,f+=s):h===Es?f+=s:h===ks?(e-=i*1.5,u+=i):h===Ps&&(u+=i*1.5),{x:e,y:n,width:u,height:f}}}xr.prototype.className="Tag";Pe(xr);w.addGetterSetter(xr,"pointerDirection",Gf);w.addGetterSetter(xr,"pointerWidth",0,G());w.addGetterSetter(xr,"pointerHeight",0,G());w.addGetterSetter(xr,"cornerRadius",0,ih(4));class Ln extends I{_sceneFunc(e){var n=this.cornerRadius(),i=this.width(),s=this.height();if(e.beginPath(),!n)e.rect(0,0,i,s);else{let h=0,u=0,f=0,c=0;typeof n=="number"?h=u=f=c=Math.min(n,i/2,s/2):(h=Math.min(n[0]||0,i/2,s/2),u=Math.min(n[1]||0,i/2,s/2),c=Math.min(n[2]||0,i/2,s/2),f=Math.min(n[3]||0,i/2,s/2)),e.moveTo(h,0),e.lineTo(i-u,0),e.arc(i-u,u,u,Math.PI*3/2,0,!1),e.lineTo(i,s-c),e.arc(i-c,s-c,c,0,Math.PI/2,!1),e.lineTo(f,s),e.arc(f,s-f,f,Math.PI/2,Math.PI,!1),e.lineTo(0,h),e.arc(h,h,h,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}Ln.prototype.className="Rect";Pe(Ln);w.addGetterSetter(Ln,"cornerRadius",0,ih(4));class Pr extends I{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)e.lineTo(n[i].x,n[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var s=0;s<e;s++)i.push({x:n*Math.sin(s*2*Math.PI/e),y:-1*n*Math.cos(s*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();var n=e[0].x,i=e[0].y,s=e[0].x,h=e[0].y;return e.forEach(u=>{n=Math.min(n,u.x),i=Math.max(i,u.x),s=Math.min(s,u.y),h=Math.max(h,u.y)}),{x:n,y:s,width:i-n,height:h-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Pr.prototype.className="RegularPolygon";Pr.prototype._centroid=!0;Pr.prototype._attrsAffectingSize=["radius"];Pe(Pr);w.addGetterSetter(Pr,"radius",0,G());w.addGetterSetter(Pr,"sides",0,G());var Wl=Math.PI*2;class Er extends I{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Wl,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Wl,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Er.prototype.className="Ring";Er.prototype._centroid=!0;Er.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Pe(Er);w.addGetterSetter(Er,"innerRadius",0,G());w.addGetterSetter(Er,"outerRadius",0,G());class Dt extends I{constructor(e){super(e),this._updated=!0,this.anim=new pt(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),i=this.frameIndex(),s=i*4,h=this.animations()[n],u=this.frameOffsets(),f=h[s+0],c=h[s+1],p=h[s+2],v=h[s+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,v),e.closePath(),e.fillStrokeShape(this)),S)if(u){var _=u[n],C=i*2;e.drawImage(S,f,c,p,v,_[C+0],_[C+1],p,v)}else e.drawImage(S,f,c,p,v,0,0,p,v)}_hitFunc(e){var n=this.animation(),i=this.frameIndex(),s=i*4,h=this.animations()[n],u=this.frameOffsets(),f=h[s+2],c=h[s+3];if(e.beginPath(),u){var p=u[n],v=i*2;e.rect(p[v+0],p[v+1],f,c)}else e.rect(0,0,f,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),i=this.animations(),s=i[n],h=s.length/4;e<h-1?this.frameIndex(e+1):this.frameIndex(0)}}Dt.prototype.className="Sprite";Pe(Dt);w.addGetterSetter(Dt,"animation");w.addGetterSetter(Dt,"animations");w.addGetterSetter(Dt,"frameOffsets");w.addGetterSetter(Dt,"image");w.addGetterSetter(Dt,"frameIndex",0,G());w.addGetterSetter(Dt,"frameRate",17,G());w.backCompat(Dt,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class or extends I{_sceneFunc(e){var n=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(var h=1;h<s*2;h++){var u=h%2===0?i:n,f=u*Math.sin(h*Math.PI/s),c=-1*u*Math.cos(h*Math.PI/s);e.lineTo(f,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}or.prototype.className="Star";or.prototype._centroid=!0;or.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Pe(or);w.addGetterSetter(or,"numPoints",5,G());w.addGetterSetter(or,"innerRadius",0,G());w.addGetterSetter(or,"outerRadius",0,G());function kh(l){return Array.from(l)}var Wr="auto",Ff="center",_n="justify",Hf="Change.konva",Bf="2d",Ul="-",Th="left",bf="text",Wf="Text",Uf="top",Yf="bottom",Yl="middle",Rh="normal",Xf="px ",Oi=" ",jf="right",Vf="word",qf="char",Xl="none",ps="\u2026",Ah=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Qf=Ah.length;function Kf(l){return l.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}var Di;function vs(){return Di||(Di=E.createCanvasElement().getContext(Bf),Di)}function Jf(l){l.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Zf(l){l.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function $f(l){return l=l||{},!l.fillLinearGradientColorStops&&!l.fillRadialGradientColorStops&&!l.fillPatternImage&&(l.fill=l.fill||"black"),l}class xe extends I{constructor(e){super($f(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Qf;n++)this.on(Ah[n]+Hf,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,i=n.length;if(!!this.text()){var s=this.padding(),h=this.fontSize(),u=this.lineHeight()*h,f=this.verticalAlign(),c=0,p=this.align(),v=this.getWidth(),S=this.letterSpacing(),_=this.fill(),C=this.textDecoration(),y=C.indexOf("underline")!==-1,A=C.indexOf("line-through")!==-1,k,O=0,O=u/2,N=0,L=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",Yl),e.setAttr("textAlign",Th),f===Yl?c=(this.getHeight()-i*u-s*2)/2:f===Yf&&(c=this.getHeight()-i*u-s*2),e.translate(s,c+s),k=0;k<i;k++){var N=0,L=0,F=n[k],j=F.text,H=F.width,V=F.lastInParagraph,Y,q,K;if(e.save(),p===jf?N+=v-H-s*2:p===Ff&&(N+=(v-H-s*2)/2),y&&(e.save(),e.beginPath(),e.moveTo(N,O+L+Math.round(h/2)),Y=j.split(" ").length-1,q=Y===0,K=p===_n&&V&&!q?v-s*2:H,e.lineTo(N+Math.round(K),O+L+Math.round(h/2)),e.lineWidth=h/15,e.strokeStyle=_,e.stroke(),e.restore()),A&&(e.save(),e.beginPath(),e.moveTo(N,O+L),Y=j.split(" ").length-1,q=Y===0,K=p===_n&&V&&!q?v-s*2:H,e.lineTo(N+Math.round(K),O+L),e.lineWidth=h/15,e.strokeStyle=_,e.stroke(),e.restore()),S!==0||p===_n){Y=j.split(" ").length-1;for(var Q=kh(j),te=0;te<Q.length;te++){var J=Q[te];J===" "&&!V&&p===_n&&(N+=(v-s*2-H)/Y),this._partialTextX=N,this._partialTextY=O+L,this._partialText=J,e.fillStrokeShape(this),N+=this.measureSize(J).width+S}}else this._partialTextX=N,this._partialTextY=O+L,this._partialText=j,e.fillStrokeShape(this);e.restore(),i>1&&(O+=u)}}}_hitFunc(e){var n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=E._isString(e)?e:e==null?"":e+"";return this._setAttr(bf,n),this}getWidth(){var e=this.attrs.width===Wr||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Wr||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return E.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=vs(),i=this.fontSize(),s;return n.save(),n.font=this._getContextFont(),s=n.measureText(e),n.restore(),{width:s.width,height:i}}_getContextFont(){return this.fontStyle()+Oi+this.fontVariant()+Oi+(this.fontSize()+Xf)+Kf(this.fontFamily())}_addTextLine(e){this.align()===_n&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),i=e.length;return vs().measureText(e).width+(i?n*(i-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),i=0,s=this.lineHeight()*n,h=this.attrs.width,u=this.attrs.height,f=h!==Wr&&h!==void 0,c=u!==Wr&&u!==void 0,p=this.padding(),v=h-p*2,S=u-p*2,_=0,C=this.wrap(),y=C!==Xl,A=C!==qf&&y,k=this.ellipsis();this.textArr=[],vs().font=this._getContextFont();for(var O=k?this._getTextWidth(ps):0,N=0,L=e.length;N<L;++N){var F=e[N],j=this._getTextWidth(F);if(f&&j>v)for(;F.length>0;){for(var H=0,V=F.length,Y="",q=0;H<V;){var K=H+V>>>1,Q=F.slice(0,K+1),te=this._getTextWidth(Q)+O;te<=v?(H=K+1,Y=Q,q=te):V=K}if(Y){if(A){var J,de=F[Y.length],Ae=de===Oi||de===Ul;Ae&&q<=v?J=Y.length:J=Math.max(Y.lastIndexOf(Oi),Y.lastIndexOf(Ul))+1,J>0&&(H=J,Y=Y.slice(0,H),q=this._getTextWidth(Y))}Y=Y.trimRight(),this._addTextLine(Y),i=Math.max(i,q),_+=s;var he=this._shouldHandleEllipsis(_);if(he){this._tryToAddEllipsisToLastLine();break}if(F=F.slice(H),F=F.trimLeft(),F.length>0&&(j=this._getTextWidth(F),j<=v)){this._addTextLine(F),_+=s,i=Math.max(i,j);break}}else break}else this._addTextLine(F),_+=s,i=Math.max(i,j),this._shouldHandleEllipsis(_)&&N<L-1&&this._tryToAddEllipsisToLastLine();if(c&&_+s>S)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){var n=+this.fontSize(),i=this.lineHeight()*n,s=this.attrs.height,h=s!==Wr&&s!==void 0,u=this.padding(),f=s-u*2,c=this.wrap(),p=c!==Xl;return!p||h&&e+i>f}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Wr&&e!==void 0,i=this.padding(),s=e-i*2,h=this.ellipsis(),u=this.textArr[this.textArr.length-1];if(!(!u||!h)){if(n){var f=this._getTextWidth(u.text+ps)<s;f||(u.text=u.text.slice(0,u.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(u.text+ps)}}getStrokeScaleEnabled(){return!0}}xe.prototype._fillFunc=Jf;xe.prototype._strokeFunc=Zf;xe.prototype.className=Wf;xe.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Pe(xe);w.overWriteSetter(xe,"width",Ts());w.overWriteSetter(xe,"height",Ts());w.addGetterSetter(xe,"fontFamily","Arial");w.addGetterSetter(xe,"fontSize",12,G());w.addGetterSetter(xe,"fontStyle",Rh);w.addGetterSetter(xe,"fontVariant",Rh);w.addGetterSetter(xe,"padding",0,G());w.addGetterSetter(xe,"align",Th);w.addGetterSetter(xe,"verticalAlign",Uf);w.addGetterSetter(xe,"lineHeight",1,G());w.addGetterSetter(xe,"wrap",Vf);w.addGetterSetter(xe,"ellipsis",!1,Pt());w.addGetterSetter(xe,"letterSpacing",0,G());w.addGetterSetter(xe,"text","",Vr());w.addGetterSetter(xe,"textDecoration","");var ec="",Mh="normal";function Lh(l){l.fillText(this.partialText,0,0)}function Nh(l){l.strokeText(this.partialText,0,0)}class Ne extends I{constructor(e){super(e),this.dummyCanvas=E.createCanvasElement(),this.dataArray=[],this.dataArray=fe.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=fe.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),i=this.fill(),s=this.fontSize(),h=this.glyphInfo;n==="underline"&&e.beginPath();for(var u=0;u<h.length;u++){e.save();var f=h[u].p0;e.translate(f.x,f.y),e.rotate(h[u].rotation),this.partialText=h[u].text,e.fillStrokeShape(this),n==="underline"&&(u===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=i,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;e.moveTo(i.x,i.y)}for(var s=0;s<n.length;s++){var h=n[s].p1;e.lineTo(h.x,h.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return E.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return xe.prototype.setText.call(this,e)}_getContextFont(){return xe.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var s=i.measureText(e);return i.restore(),{width:s.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),i=this.letterSpacing(),s=this.align(),h=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);this.glyphInfo=[];for(var f=0,c=0;c<e.dataArray.length;c++)e.dataArray[c].pathLength>0&&(f+=e.dataArray[c].pathLength);var p=0;s==="center"&&(p=Math.max(0,f/2-u/2)),s==="right"&&(p=Math.max(0,f-u));for(var v=kh(this.text()),S=this.text().split(" ").length-1,_,C,y,A=-1,k=0,O=function(){k=0;for(var te=e.dataArray,J=A+1;J<te.length;J++){if(te[J].pathLength>0)return A=J,te[J];te[J].command==="M"&&(_={x:te[J].points[0],y:te[J].points[1]})}return{}},N=function(te){var J=e._getTextSize(te).width+i;te===" "&&s==="justify"&&(J+=(f-u)/S);var de=0,Ae=0;for(C=void 0;Math.abs(J-de)/J>.01&&Ae<20;){Ae++;for(var he=de;y===void 0;)y=O(),y&&he+y.pathLength<J&&(he+=y.pathLength,y=void 0);if(Object.keys(y).length===0||_===void 0)return;var Ee=!1;switch(y.command){case"L":fe.getLineLength(_.x,_.y,y.points[0],y.points[1])>J?C=fe.getPointOnLine(J,_.x,_.y,y.points[0],y.points[1],_.x,_.y):y=void 0;break;case"A":var Be=y.points[4],$e=y.points[5],ie=y.points[4]+$e;k===0?k=Be+1e-8:J>de?k+=Math.PI/180*$e/Math.abs($e):k-=Math.PI/360*$e/Math.abs($e),($e<0&&k<ie||$e>=0&&k>ie)&&(k=ie,Ee=!0),C=fe.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],k,y.points[6]);break;case"C":k===0?J>y.pathLength?k=1e-8:k=J/y.pathLength:J>de?k+=(J-de)/y.pathLength/2:k=Math.max(k-(de-J)/y.pathLength/2,0),k>1&&(k=1,Ee=!0),C=fe.getPointOnCubicBezier(k,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3],y.points[4],y.points[5]);break;case"Q":k===0?k=J/y.pathLength:J>de?k+=(J-de)/y.pathLength:k-=(de-J)/y.pathLength,k>1&&(k=1,Ee=!0),C=fe.getPointOnQuadraticBezier(k,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3]);break}C!==void 0&&(de=fe.getLineLength(_.x,_.y,C.x,C.y)),Ee&&(Ee=!1,y=void 0)}},L="C",F=e._getTextSize(L).width+i,j=p/F-1,H=0;H<j&&(N(L),!(_===void 0||C===void 0));H++)_=C;for(var V=0;V<v.length&&(N(v[V]),!(_===void 0||C===void 0));V++){var Y=fe.getLineLength(_.x,_.y,C.x,C.y),q=0;if(h)try{q=h(v[V-1],v[V])*this.fontSize()}catch{q=0}_.x+=q,C.x+=q,this.textWidth+=q;var K=fe.getPointOnLine(q+Y/2,_.x,_.y,C.x,C.y),Q=Math.atan2(C.y-_.y,C.x-_.x);this.glyphInfo.push({transposeX:K.x,transposeY:K.y,text:v[V],rotation:Q,p0:_,p1:C}),_=C}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(v){e.push(v.p0.x),e.push(v.p0.y),e.push(v.p1.x),e.push(v.p1.y)});for(var n=e[0]||0,i=e[0]||0,s=e[1]||0,h=e[1]||0,u,f,c=0;c<e.length/2;c++)u=e[c*2],f=e[c*2+1],n=Math.min(n,u),i=Math.max(i,u),s=Math.min(s,f),h=Math.max(h,f);var p=this.fontSize();return{x:n-p/2,y:s-p/2,width:i-n+p,height:h-s+p}}destroy(){return E.releaseCanvas(this.dummyCanvas),super.destroy()}}Ne.prototype._fillFunc=Lh;Ne.prototype._strokeFunc=Nh;Ne.prototype._fillFuncHit=Lh;Ne.prototype._strokeFuncHit=Nh;Ne.prototype.className="TextPath";Ne.prototype._attrsAffectingSize=["text","fontSize","data"];Pe(Ne);w.addGetterSetter(Ne,"data");w.addGetterSetter(Ne,"fontFamily","Arial");w.addGetterSetter(Ne,"fontSize",12,G());w.addGetterSetter(Ne,"fontStyle",Mh);w.addGetterSetter(Ne,"align","left");w.addGetterSetter(Ne,"letterSpacing",0,G());w.addGetterSetter(Ne,"textBaseline","middle");w.addGetterSetter(Ne,"fontVariant",Mh);w.addGetterSetter(Ne,"text",ec);w.addGetterSetter(Ne,"textDecoration",null);w.addGetterSetter(Ne,"kerningFunc",null);var Ih="tr-konva",tc=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(l=>l+`.${Ih}`).join(" "),jl="nodesRect",rc=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],nc={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const ic="ontouchstart"in U._global;function ac(l,e){if(l==="rotater")return"crosshair";e+=E.degToRad(nc[l]||0);var n=(E.radToDeg(e)%360+360)%360;return E._inRange(n,315+22.5,360)||E._inRange(n,0,22.5)?"ns-resize":E._inRange(n,45-22.5,45+22.5)?"nesw-resize":E._inRange(n,90-22.5,90+22.5)?"ew-resize":E._inRange(n,135-22.5,135+22.5)?"nwse-resize":E._inRange(n,180-22.5,180+22.5)?"ns-resize":E._inRange(n,225-22.5,225+22.5)?"nesw-resize":E._inRange(n,270-22.5,270+22.5)?"ew-resize":E._inRange(n,315-22.5,315+22.5)?"nwse-resize":(E.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var bi=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Vl=1e8;function sc(l){return{x:l.x+l.width/2*Math.cos(l.rotation)+l.height/2*Math.sin(-l.rotation),y:l.y+l.height/2*Math.cos(l.rotation)+l.width/2*Math.sin(l.rotation)}}function Oh(l,e,n){const i=n.x+(l.x-n.x)*Math.cos(e)-(l.y-n.y)*Math.sin(e),s=n.y+(l.x-n.x)*Math.sin(e)+(l.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},l),{rotation:l.rotation+e,x:i,y:s})}function oc(l,e){const n=sc(l);return Oh(l,e,n)}function lc(l,e,n){let i=e;for(let s=0;s<l.length;s++){const h=U.getAngle(l[s]),u=Math.abs(h-e)%(Math.PI*2);Math.min(u,Math.PI*2-u)<n&&(i=h)}return i}class ue extends jr{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(tc,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return E.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Ih+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},h=i._attrsAffectingSize.map(u=>u+"Change."+this._getEventNamespace()).join(" ");i.on(h,s),i.on(rc.map(u=>u+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const s=e.getAbsolutePosition(),h=s.x-n.x,u=s.y-n.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const c=f.getAbsolutePosition();f.setAbsolutePosition({x:c.x+h,y:c.y+u}),f.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(jl),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(jl,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){var s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),h=e.getAbsoluteScale(i),u=e.getAbsolutePosition(i),f=s.x*h.x-e.offsetX()*h.x,c=s.y*h.y-e.offsetY()*h.y;const p=(U.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),v={x:u.x+f*Math.cos(p)+c*Math.sin(-p),y:u.y+c*Math.cos(p)+f*Math.sin(p),width:s.width*h.x,height:s.height*h.y,rotation:p};return Oh(v,-U.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-Vl,y:-Vl,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const v=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var S=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}],_=p.getAbsoluteTransform();S.forEach(function(C){var y=_.point(C);n.push(y)})});const i=new nt;i.rotate(-U.getAngle(this.rotation()));var s,h,u,f;n.forEach(function(p){var v=i.point(p);s===void 0&&(s=u=v.x,h=f=v.y),s=Math.min(s,v.x),h=Math.min(h,v.y),u=Math.max(u,v.x),f=Math.max(f,v.y)}),i.invert();const c=i.point({x:s,y:h});return{x:c.x,y:c.y,width:u-s,height:f-h,rotation:U.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),bi.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new Ln({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:ic?10:"auto"}),i=this;n.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{var s=U.getAngle(this.rotation()),h=ac(e,s);n.getStage().content&&(n.getStage().content.style.cursor=h),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new I({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var i=this.getParent(),s=i.padding();n.beginPath(),n.rect(-s,-s,this.width()+s*2,this.height()+s*2),n.moveTo(this.width()/2,-s),i.rotateEnabled()&&n.lineTo(this.width()/2,-i.rotateAnchorOffset()*E._sign(this.height())-s),n.fillStrokeShape(this)},hitFunc:(n,i)=>{if(!!this.shouldOverdrawWholeArea()){var s=this.padding();n.beginPath(),n.rect(-s,-s,i.width()+s*2,i.height()+s*2),n.fillStrokeShape(i)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,s=n.height,h=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/h),this.cos=Math.abs(i/h),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var u=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-u.x,y:f.y-u.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){var n,i,s,h=this.findOne("."+this._movingAnchorName),u=h.getStage();u.setPointersPositions(e);const f=u.getPointerPosition();let c={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const p=h.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(p,c,e)),h.setAbsolutePosition(c);const v=h.getAbsolutePosition();if(!(p.x===v.x&&p.y===v.y)){if(this._movingAnchorName==="rotater"){var S=this._getNodeRect();n=h.x()-S.width/2,i=-h.y()+S.height/2;let te=Math.atan2(-i,n)+Math.PI/2;S.height<0&&(te-=Math.PI);var _=U.getAngle(this.rotation());const J=_+te,de=U.getAngle(this.rotationSnapTolerance()),he=lc(this.rotationSnaps(),J,de)-S.rotation,Ee=oc(S,he);this._fitNodesInto(Ee,e);return}var C=this.keepRatio()||e.shiftKey,N=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(C){var y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(y.x-h.x(),2)+Math.pow(y.y-h.y(),2));var A=this.findOne(".top-left").x()>y.x?-1:1,k=this.findOne(".top-left").y()>y.y?-1:1;n=s*this.cos*A,i=s*this.sin*k,this.findOne(".top-left").x(y.x-n),this.findOne(".top-left").y(y.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(h.y());else if(this._movingAnchorName==="top-right"){if(C){var y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(h.x()-y.x,2)+Math.pow(y.y-h.y(),2));var A=this.findOne(".top-right").x()<y.x?-1:1,k=this.findOne(".top-right").y()>y.y?-1:1;n=s*this.cos*A,i=s*this.sin*k,this.findOne(".top-right").x(y.x+n),this.findOne(".top-right").y(y.y-i)}var O=h.position();this.findOne(".top-left").y(O.y),this.findOne(".bottom-right").x(O.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(h.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(h.x());else if(this._movingAnchorName==="bottom-left"){if(C){var y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(y.x-h.x(),2)+Math.pow(h.y()-y.y,2));var A=y.x<h.x()?-1:1,k=h.y()<y.y?-1:1;n=s*this.cos*A,i=s*this.sin*k,h.x(y.x-n),h.y(y.y+i)}O=h.position(),this.findOne(".top-left").x(O.x),this.findOne(".bottom-right").y(O.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(h.y());else if(this._movingAnchorName==="bottom-right"){if(C){var y=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(h.x()-y.x,2)+Math.pow(h.y()-y.y,2));var A=this.findOne(".bottom-right").x()<y.x?-1:1,k=this.findOne(".bottom-right").y()<y.y?-1:1;n=s*this.cos*A,i=s*this.sin*k,this.findOne(".bottom-right").x(y.x+n),this.findOne(".bottom-right").y(y.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var N=this.centeredScaling()||e.altKey;if(N){var L=this.findOne(".top-left"),F=this.findOne(".bottom-right"),j=L.x(),H=L.y(),V=this.getWidth()-F.x(),Y=this.getHeight()-F.y();F.move({x:-j,y:-H}),L.move({x:V,y:Y})}var q=this.findOne(".top-left").getAbsolutePosition();n=q.x,i=q.y;var K=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Q=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:K,height:Q,rotation:U.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:e,target:i})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var i=this._getNodeRect();const s=1;if(E._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(E._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const h=this.flipEnabled();var u=new nt;if(u.rotate(U.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const S=u.point({x:-this.padding()*2,y:0});if(e.x+=S.x,e.y+=S.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,!h){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const S=u.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.width+=this.padding()*2,!h){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const S=u.point({x:0,y:-this.padding()*2});if(e.x+=S.x,e.y+=S.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.height+=this.padding()*2,!h){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const S=u.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.height+=this.padding()*2,!h){this.update();return}}if(this.boundBoxFunc()){const S=this.boundBoxFunc()(i,e);S?e=S:E.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const f=1e7,c=new nt;c.translate(i.x,i.y),c.rotate(i.rotation),c.scale(i.width/f,i.height/f);const p=new nt;p.translate(e.x,e.y),p.rotate(e.rotation),p.scale(e.width/f,e.height/f);const v=p.multiply(c.invert());this._nodes.forEach(S=>{var _;const C=S.getParent().getAbsoluteTransform(),y=S.getTransform().copy();y.translate(S.offsetX(),S.offsetY());const A=new nt;A.multiply(C.copy().invert()).multiply(v).multiply(C).multiply(y);const k=A.decompose();S.setAttrs(k),this._fire("transform",{evt:n,target:S}),S._fire("transform",{evt:n,target:S}),(_=S.getLayer())===null||_===void 0||_.batchDraw()}),this.rotation(E._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(E._getRotation(n.rotation));var i=n.width,s=n.height,h=this.enabledAnchors(),u=this.resizeEnabled(),f=this.padding(),c=this.anchorSize();this.find("._anchor").forEach(p=>{p.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+f,offsetY:c/2+f,visible:u&&h.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:c/2+f,visible:u&&h.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:c/2-f,offsetY:c/2+f,visible:u&&h.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:c/2+f,visible:u&&h.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:c/2-f,visible:u&&h.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:c/2+f,offsetY:c/2-f,visible:u&&h.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:c/2-f,visible:u&&h.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:c/2-f,offsetY:c/2-f,visible:u&&h.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*E._sign(s)-f,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),jr.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return z.prototype.toObject.call(this)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function hc(l){return l instanceof Array||E.warn("enabledAnchors value should be an array"),l instanceof Array&&l.forEach(function(e){bi.indexOf(e)===-1&&E.warn("Unknown anchor name: "+e+". Available names are: "+bi.join(", "))}),l||[]}ue.prototype.className="Transformer";Pe(ue);w.addGetterSetter(ue,"enabledAnchors",bi,hc);w.addGetterSetter(ue,"flipEnabled",!0,Pt());w.addGetterSetter(ue,"resizeEnabled",!0);w.addGetterSetter(ue,"anchorSize",10,G());w.addGetterSetter(ue,"rotateEnabled",!0);w.addGetterSetter(ue,"rotationSnaps",[]);w.addGetterSetter(ue,"rotateAnchorOffset",50,G());w.addGetterSetter(ue,"rotationSnapTolerance",5,G());w.addGetterSetter(ue,"borderEnabled",!0);w.addGetterSetter(ue,"anchorStroke","rgb(0, 161, 255)");w.addGetterSetter(ue,"anchorStrokeWidth",1,G());w.addGetterSetter(ue,"anchorFill","white");w.addGetterSetter(ue,"anchorCornerRadius",0,G());w.addGetterSetter(ue,"borderStroke","rgb(0, 161, 255)");w.addGetterSetter(ue,"borderStrokeWidth",1,G());w.addGetterSetter(ue,"borderDash");w.addGetterSetter(ue,"keepRatio",!0);w.addGetterSetter(ue,"centeredScaling",!1);w.addGetterSetter(ue,"ignoreStroke",!1);w.addGetterSetter(ue,"padding",0,G());w.addGetterSetter(ue,"node");w.addGetterSetter(ue,"nodes");w.addGetterSetter(ue,"boundBoxFunc");w.addGetterSetter(ue,"anchorDragBoundFunc");w.addGetterSetter(ue,"shouldOverdrawWholeArea",!1);w.addGetterSetter(ue,"useSingleNodeRotation",!0);w.backCompat(ue,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Vt extends I{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,U.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Vt.prototype.className="Wedge";Vt.prototype._centroid=!0;Vt.prototype._attrsAffectingSize=["radius"];Pe(Vt);w.addGetterSetter(Vt,"radius",0,G());w.addGetterSetter(Vt,"angle",0,G());w.addGetterSetter(Vt,"clockwise",!1);w.backCompat(Vt,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function ql(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var uc=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],dc=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function fc(l,e){var n=l.data,i=l.width,s=l.height,h,u,f,c,p,v,S,_,C,y,A,k,O,N,L,F,j,H,V,Y,q,K,Q,te,J=e+e+1,de=i-1,Ae=s-1,he=e+1,Ee=he*(he+1)/2,Be=new ql,$e=null,ie=Be,ye=null,Ie=null,vt=uc[e],mt=dc[e];for(f=1;f<J;f++)ie=ie.next=new ql,f===he&&($e=ie);for(ie.next=Be,S=v=0,u=0;u<s;u++){for(F=j=H=V=_=C=y=A=0,k=he*(Y=n[v]),O=he*(q=n[v+1]),N=he*(K=n[v+2]),L=he*(Q=n[v+3]),_+=Ee*Y,C+=Ee*q,y+=Ee*K,A+=Ee*Q,ie=Be,f=0;f<he;f++)ie.r=Y,ie.g=q,ie.b=K,ie.a=Q,ie=ie.next;for(f=1;f<he;f++)c=v+((de<f?de:f)<<2),_+=(ie.r=Y=n[c])*(te=he-f),C+=(ie.g=q=n[c+1])*te,y+=(ie.b=K=n[c+2])*te,A+=(ie.a=Q=n[c+3])*te,F+=Y,j+=q,H+=K,V+=Q,ie=ie.next;for(ye=Be,Ie=$e,h=0;h<i;h++)n[v+3]=Q=A*vt>>mt,Q!==0?(Q=255/Q,n[v]=(_*vt>>mt)*Q,n[v+1]=(C*vt>>mt)*Q,n[v+2]=(y*vt>>mt)*Q):n[v]=n[v+1]=n[v+2]=0,_-=k,C-=O,y-=N,A-=L,k-=ye.r,O-=ye.g,N-=ye.b,L-=ye.a,c=S+((c=h+e+1)<de?c:de)<<2,F+=ye.r=n[c],j+=ye.g=n[c+1],H+=ye.b=n[c+2],V+=ye.a=n[c+3],_+=F,C+=j,y+=H,A+=V,ye=ye.next,k+=Y=Ie.r,O+=q=Ie.g,N+=K=Ie.b,L+=Q=Ie.a,F-=Y,j-=q,H-=K,V-=Q,Ie=Ie.next,v+=4;S+=i}for(h=0;h<i;h++){for(j=H=V=F=C=y=A=_=0,v=h<<2,k=he*(Y=n[v]),O=he*(q=n[v+1]),N=he*(K=n[v+2]),L=he*(Q=n[v+3]),_+=Ee*Y,C+=Ee*q,y+=Ee*K,A+=Ee*Q,ie=Be,f=0;f<he;f++)ie.r=Y,ie.g=q,ie.b=K,ie.a=Q,ie=ie.next;for(p=i,f=1;f<=e;f++)v=p+h<<2,_+=(ie.r=Y=n[v])*(te=he-f),C+=(ie.g=q=n[v+1])*te,y+=(ie.b=K=n[v+2])*te,A+=(ie.a=Q=n[v+3])*te,F+=Y,j+=q,H+=K,V+=Q,ie=ie.next,f<Ae&&(p+=i);for(v=h,ye=Be,Ie=$e,u=0;u<s;u++)c=v<<2,n[c+3]=Q=A*vt>>mt,Q>0?(Q=255/Q,n[c]=(_*vt>>mt)*Q,n[c+1]=(C*vt>>mt)*Q,n[c+2]=(y*vt>>mt)*Q):n[c]=n[c+1]=n[c+2]=0,_-=k,C-=O,y-=N,A-=L,k-=ye.r,O-=ye.g,N-=ye.b,L-=ye.a,c=h+((c=u+he)<Ae?c:Ae)*i<<2,_+=F+=ye.r=n[c],C+=j+=ye.g=n[c+1],y+=H+=ye.b=n[c+2],A+=V+=ye.a=n[c+3],ye=ye.next,k+=Y=Ie.r,O+=q=Ie.g,N+=K=Ie.b,L+=Q=Ie.a,F-=Y,j-=q,H-=K,V-=Q,Ie=Ie.next,v+=i}}const cc=function(e){var n=Math.round(this.blurRadius());n>0&&fc(e,n)};w.addGetterSetter(z,"blurRadius",0,G(),w.afterSetFilter);const gc=function(l){var e=this.brightness()*255,n=l.data,i=n.length,s;for(s=0;s<i;s+=4)n[s]+=e,n[s+1]+=e,n[s+2]+=e};w.addGetterSetter(z,"brightness",0,G(),w.afterSetFilter);const pc=function(l){var e=Math.pow((this.contrast()+100)/100,2),n=l.data,i=n.length,s=150,h=150,u=150,f;for(f=0;f<i;f+=4)s=n[f],h=n[f+1],u=n[f+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,h/=255,h-=.5,h*=e,h+=.5,h*=255,u/=255,u-=.5,u*=e,u+=.5,u*=255,s=s<0?0:s>255?255:s,h=h<0?0:h>255?255:h,u=u<0?0:u>255?255:u,n[f]=s,n[f+1]=h,n[f+2]=u};w.addGetterSetter(z,"contrast",0,G(),w.afterSetFilter);const vc=function(l){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),s=this.embossBlend(),h=0,u=0,f=l.data,c=l.width,p=l.height,v=c*4,S=p;switch(i){case"top-left":h=-1,u=-1;break;case"top":h=-1,u=0;break;case"top-right":h=-1,u=1;break;case"right":h=0,u=1;break;case"bottom-right":h=1,u=1;break;case"bottom":h=1,u=0;break;case"bottom-left":h=1,u=-1;break;case"left":h=0,u=-1;break;default:E.error("Unknown emboss direction: "+i)}do{var _=(S-1)*v,C=h;S+C<1&&(C=0),S+C>p&&(C=0);var y=(S-1+C)*c*4,A=c;do{var k=_+(A-1)*4,O=u;A+O<1&&(O=0),A+O>c&&(O=0);var N=y+(A-1+O)*4,L=f[k]-f[N],F=f[k+1]-f[N+1],j=f[k+2]-f[N+2],H=L,V=H>0?H:-H,Y=F>0?F:-F,q=j>0?j:-j;if(Y>V&&(H=F),q>V&&(H=j),H*=e,s){var K=f[k]+H,Q=f[k+1]+H,te=f[k+2]+H;f[k]=K>255?255:K<0?0:K,f[k+1]=Q>255?255:Q<0?0:Q,f[k+2]=te>255?255:te<0?0:te}else{var J=n-H;J<0?J=0:J>255&&(J=255),f[k]=f[k+1]=f[k+2]=J}}while(--A)}while(--S)};w.addGetterSetter(z,"embossStrength",.5,G(),w.afterSetFilter);w.addGetterSetter(z,"embossWhiteLevel",.5,G(),w.afterSetFilter);w.addGetterSetter(z,"embossDirection","top-left",null,w.afterSetFilter);w.addGetterSetter(z,"embossBlend",!1,null,w.afterSetFilter);function ms(l,e,n,i,s){var h=n-e,u=s-i,f;return h===0?i+u/2:u===0?i:(f=(l-e)/h,f=u*f+i,f)}const mc=function(l){var e=l.data,n=e.length,i=e[0],s=i,h,u=e[1],f=u,c,p=e[2],v=p,S,_,C=this.enhance();if(C!==0){for(_=0;_<n;_+=4)h=e[_+0],h<i?i=h:h>s&&(s=h),c=e[_+1],c<u?u=c:c>f&&(f=c),S=e[_+2],S<p?p=S:S>v&&(v=S);s===i&&(s=255,i=0),f===u&&(f=255,u=0),v===p&&(v=255,p=0);var y,A,k,O,N,L,F,j,H;for(C>0?(A=s+C*(255-s),k=i-C*(i-0),N=f+C*(255-f),L=u-C*(u-0),j=v+C*(255-v),H=p-C*(p-0)):(y=(s+i)*.5,A=s+C*(s-y),k=i+C*(i-y),O=(f+u)*.5,N=f+C*(f-O),L=u+C*(u-O),F=(v+p)*.5,j=v+C*(v-F),H=p+C*(p-F)),_=0;_<n;_+=4)e[_+0]=ms(e[_+0],i,s,k,A),e[_+1]=ms(e[_+1],u,f,L,N),e[_+2]=ms(e[_+2],p,v,H,j)}};w.addGetterSetter(z,"enhance",0,G(),w.afterSetFilter);const yc=function(l){var e=l.data,n=e.length,i,s;for(i=0;i<n;i+=4)s=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=s,e[i+1]=s,e[i+2]=s};w.addGetterSetter(z,"hue",0,G(),w.afterSetFilter);w.addGetterSetter(z,"saturation",0,G(),w.afterSetFilter);w.addGetterSetter(z,"luminance",0,G(),w.afterSetFilter);const _c=function(l){var e=l.data,n=e.length,i=1,s=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,u=this.luminance()*127,f,c=i*s*Math.cos(h*Math.PI/180),p=i*s*Math.sin(h*Math.PI/180),v=.299*i+.701*c+.167*p,S=.587*i-.587*c+.33*p,_=.114*i-.114*c-.497*p,C=.299*i-.299*c-.328*p,y=.587*i+.413*c+.035*p,A=.114*i-.114*c+.293*p,k=.299*i-.3*c+1.25*p,O=.587*i-.586*c-1.05*p,N=.114*i+.886*c-.2*p,L,F,j,H;for(f=0;f<n;f+=4)L=e[f+0],F=e[f+1],j=e[f+2],H=e[f+3],e[f+0]=v*L+S*F+_*j+u,e[f+1]=C*L+y*F+A*j+u,e[f+2]=k*L+O*F+N*j+u,e[f+3]=H},Sc=function(l){var e=l.data,n=e.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,u,f=i*s*Math.cos(h*Math.PI/180),c=i*s*Math.sin(h*Math.PI/180),p=.299*i+.701*f+.167*c,v=.587*i-.587*f+.33*c,S=.114*i-.114*f-.497*c,_=.299*i-.299*f-.328*c,C=.587*i+.413*f+.035*c,y=.114*i-.114*f+.293*c,A=.299*i-.3*f+1.25*c,k=.587*i-.586*f-1.05*c,O=.114*i+.886*f-.2*c,N,L,F,j;for(u=0;u<n;u+=4)N=e[u+0],L=e[u+1],F=e[u+2],j=e[u+3],e[u+0]=p*N+v*L+S*F,e[u+1]=_*N+C*L+y*F,e[u+2]=A*N+k*L+O*F,e[u+3]=j};w.addGetterSetter(z,"hue",0,G(),w.afterSetFilter);w.addGetterSetter(z,"saturation",0,G(),w.afterSetFilter);w.addGetterSetter(z,"value",0,G(),w.afterSetFilter);const wc=function(l){var e=l.data,n=e.length,i;for(i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};var Cc=function(l,e,n){var i=l.data,s=e.data,h=l.width,u=l.height,f=n.polarCenterX||h/2,c=n.polarCenterY||u/2,p,v,S,_=0,C=0,y=0,A=0,k,O=Math.sqrt(f*f+c*c);v=h-f,S=u-c,k=Math.sqrt(v*v+S*S),O=k>O?k:O;var N=u,L=h,F,j,H=360/L*Math.PI/180,V,Y;for(j=0;j<L;j+=1)for(V=Math.sin(j*H),Y=Math.cos(j*H),F=0;F<N;F+=1)v=Math.floor(f+O*F/N*Y),S=Math.floor(c+O*F/N*V),p=(S*h+v)*4,_=i[p+0],C=i[p+1],y=i[p+2],A=i[p+3],p=(j+F*h)*4,s[p+0]=_,s[p+1]=C,s[p+2]=y,s[p+3]=A},xc=function(l,e,n){var i=l.data,s=e.data,h=l.width,u=l.height,f=n.polarCenterX||h/2,c=n.polarCenterY||u/2,p,v,S,_,C,y=0,A=0,k=0,O=0,N,L=Math.sqrt(f*f+c*c);v=h-f,S=u-c,N=Math.sqrt(v*v+S*S),L=N>L?N:L;var F=u,j=h,H,V,Y=n.polarRotation||0,q,K;for(v=0;v<h;v+=1)for(S=0;S<u;S+=1)_=v-f,C=S-c,H=Math.sqrt(_*_+C*C)*F/L,V=(Math.atan2(C,_)*180/Math.PI+360+Y)%360,V=V*j/360,q=Math.floor(V),K=Math.floor(H),p=(K*h+q)*4,y=i[p+0],A=i[p+1],k=i[p+2],O=i[p+3],p=(S*h+v)*4,s[p+0]=y,s[p+1]=A,s[p+2]=k,s[p+3]=O};const Pc=function(l){var e=l.width,n=l.height,i,s,h,u,f,c,p,v,S,_,C=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),A=Math.floor(e*(y%360)/360);if(!(C<1)){var k=E.createCanvasElement();k.width=e,k.height=n;var O=k.getContext("2d").getImageData(0,0,e,n);E.releaseCanvas(k),Cc(l,O,{polarCenterX:e/2,polarCenterY:n/2});for(var N=e/Math.pow(2,C);N<=8;)N=N*2,C-=1;N=Math.ceil(N);var L=N,F=0,j=L,H=1;for(A+N>e&&(F=L,j=0,H=-1),s=0;s<n;s+=1)for(i=F;i!==j;i+=H)h=Math.round(i+A)%e,S=(e*s+h)*4,f=O.data[S+0],c=O.data[S+1],p=O.data[S+2],v=O.data[S+3],_=(e*s+i)*4,O.data[_+0]=f,O.data[_+1]=c,O.data[_+2]=p,O.data[_+3]=v;for(s=0;s<n;s+=1)for(L=Math.floor(N),u=0;u<C;u+=1){for(i=0;i<L+1;i+=1)S=(e*s+i)*4,f=O.data[S+0],c=O.data[S+1],p=O.data[S+2],v=O.data[S+3],_=(e*s+L*2-i-1)*4,O.data[_+0]=f,O.data[_+1]=c,O.data[_+2]=p,O.data[_+3]=v;L*=2}xc(O,l,{polarRotation:0})}};w.addGetterSetter(z,"kaleidoscopePower",2,G(),w.afterSetFilter);w.addGetterSetter(z,"kaleidoscopeAngle",0,G(),w.afterSetFilter);function Gi(l,e,n){var i=(n*l.width+e)*4,s=[];return s.push(l.data[i++],l.data[i++],l.data[i++],l.data[i++]),s}function Sn(l,e){return Math.sqrt(Math.pow(l[0]-e[0],2)+Math.pow(l[1]-e[1],2)+Math.pow(l[2]-e[2],2))}function Ec(l){for(var e=[0,0,0],n=0;n<l.length;n++)e[0]+=l[n][0],e[1]+=l[n][1],e[2]+=l[n][2];return e[0]/=l.length,e[1]/=l.length,e[2]/=l.length,e}function kc(l,e){var n=Gi(l,0,0),i=Gi(l,l.width-1,0),s=Gi(l,0,l.height-1),h=Gi(l,l.width-1,l.height-1),u=e||10;if(Sn(n,i)<u&&Sn(i,h)<u&&Sn(h,s)<u&&Sn(s,n)<u){for(var f=Ec([i,n,h,s]),c=[],p=0;p<l.width*l.height;p++){var v=Sn(f,[l.data[p*4],l.data[p*4+1],l.data[p*4+2]]);c[p]=v<u?0:255}return c}}function Tc(l,e){for(var n=0;n<l.width*l.height;n++)l.data[4*n+3]=e[n]}function Rc(l,e,n){for(var i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),h=Math.floor(s/2),u=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var p=f*e+c,v=0,S=0;S<s;S++)for(var _=0;_<s;_++){var C=f+S-h,y=c+_-h;if(C>=0&&C<n&&y>=0&&y<e){var A=C*e+y,k=i[S*s+_];v+=l[A]*k}}u[p]=v===255*8?255:0}return u}function Ac(l,e,n){for(var i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),h=Math.floor(s/2),u=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var p=f*e+c,v=0,S=0;S<s;S++)for(var _=0;_<s;_++){var C=f+S-h,y=c+_-h;if(C>=0&&C<n&&y>=0&&y<e){var A=C*e+y,k=i[S*s+_];v+=l[A]*k}}u[p]=v>=255*4?255:0}return u}function Mc(l,e,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),h=Math.floor(s/2),u=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var p=f*e+c,v=0,S=0;S<s;S++)for(var _=0;_<s;_++){var C=f+S-h,y=c+_-h;if(C>=0&&C<n&&y>=0&&y<e){var A=C*e+y,k=i[S*s+_];v+=l[A]*k}}u[p]=v}return u}const Lc=function(l){var e=this.threshold(),n=kc(l,e);return n&&(n=Rc(n,l.width,l.height),n=Ac(n,l.width,l.height),n=Mc(n,l.width,l.height),Tc(l,n)),l};w.addGetterSetter(z,"threshold",0,G(),w.afterSetFilter);const Nc=function(l){var e=this.noise()*255,n=l.data,i=n.length,s=e/2,h;for(h=0;h<i;h+=4)n[h+0]+=s-2*s*Math.random(),n[h+1]+=s-2*s*Math.random(),n[h+2]+=s-2*s*Math.random()};w.addGetterSetter(z,"noise",.2,G(),w.afterSetFilter);const Ic=function(l){var e=Math.ceil(this.pixelSize()),n=l.width,i=l.height,s,h,u,f,c,p,v,S=Math.ceil(n/e),_=Math.ceil(i/e),C,y,A,k,O,N,L,F=l.data;if(e<=0){E.error("pixelSize value can not be <= 0");return}for(O=0;O<S;O+=1)for(N=0;N<_;N+=1){for(f=0,c=0,p=0,v=0,C=O*e,y=C+e,A=N*e,k=A+e,L=0,s=C;s<y;s+=1)if(!(s>=n))for(h=A;h<k;h+=1)h>=i||(u=(n*h+s)*4,f+=F[u+0],c+=F[u+1],p+=F[u+2],v+=F[u+3],L+=1);for(f=f/L,c=c/L,p=p/L,v=v/L,s=C;s<y;s+=1)if(!(s>=n))for(h=A;h<k;h+=1)h>=i||(u=(n*h+s)*4,F[u+0]=f,F[u+1]=c,F[u+2]=p,F[u+3]=v)}};w.addGetterSetter(z,"pixelSize",8,G(),w.afterSetFilter);const Oc=function(l){var e=Math.round(this.levels()*254)+1,n=l.data,i=n.length,s=255/e,h;for(h=0;h<i;h+=1)n[h]=Math.floor(n[h]/s)*s};w.addGetterSetter(z,"levels",.5,G(),w.afterSetFilter);const Dc=function(l){var e=l.data,n=e.length,i=this.red(),s=this.green(),h=this.blue(),u,f;for(u=0;u<n;u+=4)f=(.34*e[u]+.5*e[u+1]+.16*e[u+2])/255,e[u]=f*i,e[u+1]=f*s,e[u+2]=f*h,e[u+3]=e[u+3]};w.addGetterSetter(z,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});w.addGetterSetter(z,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});w.addGetterSetter(z,"blue",0,nh,w.afterSetFilter);const Gc=function(l){var e=l.data,n=e.length,i=this.red(),s=this.green(),h=this.blue(),u=this.alpha(),f,c;for(f=0;f<n;f+=4)c=1-u,e[f]=i*u+e[f]*c,e[f+1]=s*u+e[f+1]*c,e[f+2]=h*u+e[f+2]*c};w.addGetterSetter(z,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});w.addGetterSetter(z,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});w.addGetterSetter(z,"blue",0,nh,w.afterSetFilter);w.addGetterSetter(z,"alpha",1,function(l){return this._filterUpToDate=!1,l>1?1:l<0?0:l});const zc=function(l){var e=l.data,n=e.length,i,s,h,u;for(i=0;i<n;i+=4)s=e[i+0],h=e[i+1],u=e[i+2],e[i+0]=Math.min(255,s*.393+h*.769+u*.189),e[i+1]=Math.min(255,s*.349+h*.686+u*.168),e[i+2]=Math.min(255,s*.272+h*.534+u*.131)},Fc=function(l){var e=l.data,n=l.width,i=l.height,s=n*4,h=i;do{var u=(h-1)*s,f=n;do{var c=u+(f-1)*4,p=e[c],v=e[c+1],S=e[c+2];p>127&&(p=255-p),v>127&&(v=255-v),S>127&&(S=255-S),e[c]=p,e[c+1]=v,e[c+2]=S}while(--f)}while(--h)},Hc=function(l){var e=this.threshold()*255,n=l.data,i=n.length,s;for(s=0;s<i;s+=1)n[s]=n[s]<e?0:255};w.addGetterSetter(z,"threshold",.5,G(),w.afterSetFilter);const Ql=Sr.Util._assign(Sr,{Arc:Xt,Arrow:Cr,Circle:qr,Ellipse:sr,Image:Et,Label:Ls,Tag:xr,Line:jt,Path:fe,Rect:Ln,RegularPolygon:Pr,Ring:Er,Sprite:Dt,Star:or,Text:xe,TextPath:Ne,Transformer:ue,Wedge:Vt,Filters:{Blur:cc,Brighten:gc,Contrast:pc,Emboss:vc,Enhance:mc,Grayscale:yc,HSL:_c,HSV:Sc,Invert:wc,Kaleidoscope:Pc,Mask:Lc,Noise:Nc,Pixelate:Ic,Posterize:Oc,RGB:Dc,RGBA:Gc,Sepia:zc,Solarize:Fc,Threshold:Hc}});var Dh={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=function(e){var n={},i=it.exports,s=zi.exports,h=Object.assign;function u(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),j=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}function V(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case v:return"Fragment";case p:return"Portal";case _:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case A:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return r=t.displayName||null,r!==null?r:V(t.type)||"Memo";case L:r=t._payload,t=t._init;try{return V(t(r))}catch{}}return null}function Y(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function q(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function K(t){if(q(t)!==t)throw Error(u(188))}function Q(t){var r=t.alternate;if(!r){if(r=q(t),r===null)throw Error(u(188));return r!==t?null:t}for(var a=t,o=r;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return K(d),t;if(g===o)return K(d),r;g=g.sibling}throw Error(u(188))}if(a.return!==o.return)a=d,o=g;else{for(var m=!1,x=d.child;x;){if(x===a){m=!0,a=d,o=g;break}if(x===o){m=!0,o=d,a=g;break}x=x.sibling}if(!m){for(x=g.child;x;){if(x===a){m=!0,a=g,o=d;break}if(x===o){m=!0,o=g,a=d;break}x=x.sibling}if(!m)throw Error(u(189))}}if(a.alternate!==o)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?t:r}function te(t){return t=Q(t),t!==null?J(t):null}function J(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=J(t);if(r!==null)return r;t=t.sibling}return null}function de(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=de(t);if(r!==null)return r}t=t.sibling}return null}var Ae=Array.isArray,he=e.getPublicInstance,Ee=e.getRootHostContext,Be=e.getChildHostContext,$e=e.prepareForCommit,ie=e.resetAfterCommit,ye=e.createInstance,Ie=e.appendInitialChild,vt=e.finalizeInitialChildren,mt=e.prepareUpdate,ji=e.shouldSetTextContent,Gs=e.createTextInstance,zs=e.scheduleTimeout,Bh=e.cancelTimeout,Vi=e.noTimeout,Nn=e.isPrimaryRenderer,et=e.supportsMutation,In=e.supportsPersistence,st=e.supportsHydration,bh=e.getInstanceFromNode,Wh=e.preparePortalMount,Uh=e.getCurrentEventPriority,Yh=e.detachDeletedInstance,Xh=e.supportsMicrotasks,jh=e.scheduleMicrotask,Qr=e.supportsTestSelectors,Vh=e.findFiberRoot,qh=e.getBoundingRect,Qh=e.getTextContent,Kr=e.isHiddenSubtree,Kh=e.matchAccessibilityRole,Jh=e.setFocusIfFocusable,Zh=e.setupIntersectionObserver,$h=e.appendChild,eu=e.appendChildToContainer,tu=e.commitTextUpdate,ru=e.commitMount,nu=e.commitUpdate,iu=e.insertBefore,au=e.insertInContainerBefore,su=e.removeChild,ou=e.removeChildFromContainer,Fs=e.resetTextContent,lu=e.hideInstance,hu=e.hideTextInstance,uu=e.unhideInstance,du=e.unhideTextInstance,fu=e.clearContainer,cu=e.cloneInstance,Hs=e.createContainerChildSet,Bs=e.appendChildToContainerChildSet,gu=e.finalizeContainerChildren,qi=e.replaceContainerChildren,bs=e.cloneHiddenInstance,Ws=e.cloneHiddenTextInstance,pu=e.canHydrateInstance,vu=e.canHydrateTextInstance,mu=e.canHydrateSuspenseInstance,Us=e.isSuspenseInstancePending,Qi=e.isSuspenseInstanceFallback,yu=e.getSuspenseInstanceFallbackErrorDetails,_u=e.registerSuspenseInstanceRetry,On=e.getNextHydratableSibling,Su=e.getFirstHydratableChild,wu=e.getFirstHydratableChildWithinContainer,Cu=e.getFirstHydratableChildWithinSuspenseInstance,xu=e.hydrateInstance,Pu=e.hydrateTextInstance,Eu=e.hydrateSuspenseInstance,ku=e.getNextHydratableInstanceAfterSuspenseInstance,Tu=e.commitHydratedContainer,Ru=e.commitHydratedSuspenseInstance,Au=e.clearSuspenseBoundary,Mu=e.clearSuspenseBoundaryFromContainer,Lu=e.shouldDeleteUnhydratedTailInstances,Nu=e.didNotMatchHydratedContainerTextInstance,Iu=e.didNotMatchHydratedTextInstance,Ki;function Jr(t){if(Ki===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ki=r&&r[1]||""}return`
`+Ki+t}var Ji=!1;function Zi(t,r){if(!t||Ji)return"";Ji=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var o=D}Reflect.construct(t,[],r)}else{try{r.call()}catch(D){o=D}t.call(r.prototype)}else{try{throw Error()}catch(D){o=D}t()}}catch(D){if(D&&o&&typeof D.stack=="string"){for(var d=D.stack.split(`
`),g=o.stack.split(`
`),m=d.length-1,x=g.length-1;1<=m&&0<=x&&d[m]!==g[x];)x--;for(;1<=m&&0<=x;m--,x--)if(d[m]!==g[x]){if(m!==1||x!==1)do if(m--,x--,0>x||d[m]!==g[x]){var R=`
`+d[m].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=m&&0<=x);break}}}finally{Ji=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?Jr(t):""}var Ou=Object.prototype.hasOwnProperty,$i=[],Tr=-1;function qt(t){return{current:t}}function ve(t){0>Tr||(t.current=$i[Tr],$i[Tr]=null,Tr--)}function pe(t,r){Tr++,$i[Tr]=t.current,t.current=r}var Qt={},be=qt(Qt),Ve=qt(!1),hr=Qt;function Rr(t,r){var a=t.type.contextTypes;if(!a)return Qt;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===r)return o.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=r[g];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function qe(t){return t=t.childContextTypes,t!=null}function Dn(){ve(Ve),ve(be)}function Ys(t,r,a){if(be.current!==Qt)throw Error(u(168));pe(be,r),pe(Ve,a)}function Xs(t,r,a){var o=t.stateNode;if(r=r.childContextTypes,typeof o.getChildContext!="function")return a;o=o.getChildContext();for(var d in o)if(!(d in r))throw Error(u(108,Y(t)||"Unknown",d));return h({},a,o)}function Gn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qt,hr=be.current,pe(be,t),pe(Ve,Ve.current),!0}function js(t,r,a){var o=t.stateNode;if(!o)throw Error(u(169));a?(t=Xs(t,r,hr),o.__reactInternalMemoizedMergedChildContext=t,ve(Ve),ve(be),pe(be,t)):ve(Ve),pe(Ve,a)}var yt=Math.clz32?Math.clz32:zu,Du=Math.log,Gu=Math.LN2;function zu(t){return t>>>=0,t===0?32:31-(Du(t)/Gu|0)|0}var zn=64,Fn=4194304;function Zr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hn(t,r){var a=t.pendingLanes;if(a===0)return 0;var o=0,d=t.suspendedLanes,g=t.pingedLanes,m=a&268435455;if(m!==0){var x=m&~d;x!==0?o=Zr(x):(g&=m,g!==0&&(o=Zr(g)))}else m=a&~d,m!==0?o=Zr(m):g!==0&&(o=Zr(g));if(o===0)return 0;if(r!==0&&r!==o&&(r&d)===0&&(d=o&-o,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if((o&4)!==0&&(o|=a&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=o;0<r;)a=31-yt(r),d=1<<a,o|=t[a],r&=~d;return o}function Fu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hu(t,r){for(var a=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var m=31-yt(g),x=1<<m,R=d[m];R===-1?((x&a)===0||(x&o)!==0)&&(d[m]=Fu(x,r)):R<=r&&(t.expiredLanes|=x),g&=~x}}function ea(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vs(){var t=zn;return zn<<=1,(zn&4194240)===0&&(zn=64),t}function ta(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function $r(t,r,a){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-yt(r),t[r]=a}function Bu(t,r){var a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<a;){var d=31-yt(a),g=1<<d;r[d]=0,o[d]=-1,t[d]=-1,a&=~g}}function ra(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var o=31-yt(a),d=1<<o;d&r|t[o]&r&&(t[o]|=r),a&=~d}}var ae=0;function qs(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var na=s.unstable_scheduleCallback,Qs=s.unstable_cancelCallback,bu=s.unstable_shouldYield,Wu=s.unstable_requestPaint,Oe=s.unstable_now,ia=s.unstable_ImmediatePriority,Uu=s.unstable_UserBlockingPriority,aa=s.unstable_NormalPriority,Yu=s.unstable_IdlePriority,Bn=null,kt=null;function Xu(t){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Bn,t,void 0,(t.current.flags&128)===128)}catch{}}function ju(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var _t=typeof Object.is=="function"?Object.is:ju,Gt=null,bn=!1,sa=!1;function Ks(t){Gt===null?Gt=[t]:Gt.push(t)}function Vu(t){bn=!0,Ks(t)}function Tt(){if(!sa&&Gt!==null){sa=!0;var t=0,r=ae;try{var a=Gt;for(ae=1;t<a.length;t++){var o=a[t];do o=o(!0);while(o!==null)}Gt=null,bn=!1}catch(d){throw Gt!==null&&(Gt=Gt.slice(t+1)),na(ia,Tt),d}finally{ae=r,sa=!1}}return null}var Ar=[],Mr=0,Wn=null,Un=0,ot=[],lt=0,ur=null,zt=1,Ft="";function dr(t,r){Ar[Mr++]=Un,Ar[Mr++]=Wn,Wn=t,Un=r}function Js(t,r,a){ot[lt++]=zt,ot[lt++]=Ft,ot[lt++]=ur,ur=t;var o=zt;t=Ft;var d=32-yt(o)-1;o&=~(1<<d),a+=1;var g=32-yt(r)+d;if(30<g){var m=d-d%5;g=(o&(1<<m)-1).toString(32),o>>=m,d-=m,zt=1<<32-yt(r)+d|a<<d|o,Ft=g+t}else zt=1<<g|a<<d|o,Ft=t}function oa(t){t.return!==null&&(dr(t,1),Js(t,1,0))}function la(t){for(;t===Wn;)Wn=Ar[--Mr],Ar[Mr]=null,Un=Ar[--Mr],Ar[Mr]=null;for(;t===ur;)ur=ot[--lt],ot[lt]=null,Ft=ot[--lt],ot[lt]=null,zt=ot[--lt],ot[lt]=null}var tt=null,ht=null,_e=!1,en=!1,St=null;function Zs(t,r){var a=gt(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=t,r=t.deletions,r===null?(t.deletions=[a],t.flags|=16):r.push(a)}function $s(t,r){switch(t.tag){case 5:return r=pu(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,tt=t,ht=Su(r),!0):!1;case 6:return r=vu(r,t.pendingProps),r!==null?(t.stateNode=r,tt=t,ht=null,!0):!1;case 13:if(r=mu(r),r!==null){var a=ur!==null?{id:zt,overflow:Ft}:null;return t.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=gt(18,null,null,0),a.stateNode=r,a.return=t,t.child=a,tt=t,ht=null,!0}return!1;default:return!1}}function ha(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ua(t){if(_e){var r=ht;if(r){var a=r;if(!$s(t,r)){if(ha(t))throw Error(u(418));r=On(a);var o=tt;r&&$s(t,r)?Zs(o,a):(t.flags=t.flags&-4097|2,_e=!1,tt=t)}}else{if(ha(t))throw Error(u(418));t.flags=t.flags&-4097|2,_e=!1,tt=t}}}function eo(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function Yn(t){if(!st||t!==tt)return!1;if(!_e)return eo(t),_e=!0,!1;if(t.tag!==3&&(t.tag!==5||Lu(t.type)&&!ji(t.type,t.memoizedProps))){var r=ht;if(r){if(ha(t))throw to(),Error(u(418));for(;r;)Zs(t,r),r=On(r)}}if(eo(t),t.tag===13){if(!st)throw Error(u(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));ht=ku(t)}else ht=tt?On(t.stateNode):null;return!0}function to(){for(var t=ht;t;)t=On(t)}function Lr(){st&&(ht=tt=null,en=_e=!1)}function da(t){St===null?St=[t]:St.push(t)}var qu=f.ReactCurrentBatchConfig;function Xn(t,r){if(_t(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!Ou.call(r,d)||!_t(t[d],r[d]))return!1}return!0}function Qu(t){switch(t.tag){case 5:return Jr(t.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return t=Zi(t.type,!1),t;case 11:return t=Zi(t.type.render,!1),t;case 1:return t=Zi(t.type,!0),t;default:return""}}function wt(t,r){if(t&&t.defaultProps){r=h({},r),t=t.defaultProps;for(var a in t)r[a]===void 0&&(r[a]=t[a]);return r}return r}var jn=qt(null),Vn=null,Nr=null,fa=null;function ca(){fa=Nr=Vn=null}function ro(t,r,a){Nn?(pe(jn,r._currentValue),r._currentValue=a):(pe(jn,r._currentValue2),r._currentValue2=a)}function ga(t){var r=jn.current;ve(jn),Nn?t._currentValue=r:t._currentValue2=r}function pa(t,r,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===a)break;t=t.return}}function Ir(t,r){Vn=t,fa=Nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Qe=!0),t.firstContext=null)}function ut(t){var r=Nn?t._currentValue:t._currentValue2;if(fa!==t)if(t={context:t,memoizedValue:r,next:null},Nr===null){if(Vn===null)throw Error(u(308));Nr=t,Vn.dependencies={lanes:0,firstContext:t}}else Nr=Nr.next=t;return r}var fr=null;function va(t){fr===null?fr=[t]:fr.push(t)}function no(t,r,a,o){var d=r.interleaved;return d===null?(a.next=a,va(r)):(a.next=d.next,d.next=a),r.interleaved=a,Rt(t,o)}function Rt(t,r){t.lanes|=r;var a=t.alternate;for(a!==null&&(a.lanes|=r),a=t,t=t.return;t!==null;)t.childLanes|=r,a=t.alternate,a!==null&&(a.childLanes|=r),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Kt=!1;function ma(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function io(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ht(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Jt(t,r,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ne&2)!==0){var d=o.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),o.pending=r,Rt(t,a)}return d=o.interleaved,d===null?(r.next=r,va(o)):(r.next=d.next,d.next=r),o.interleaved=r,Rt(t,a)}function qn(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,ra(t,a)}}function ao(t,r){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var m={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=m:g=g.next=m,a=a.next}while(a!==null);g===null?d=g=r:g=g.next=r}else d=g=r;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:o.shared,effects:o.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}function Qn(t,r,a,o){var d=t.updateQueue;Kt=!1;var g=d.firstBaseUpdate,m=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var R=x,D=R.next;R.next=null,m===null?g=D:m.next=D,m=R;var X=t.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==m&&(x===null?X.firstBaseUpdate=D:x.next=D,X.lastBaseUpdate=R))}if(g!==null){var $=d.baseState;m=0,X=D=R=null,x=g;do{var B=x.lane,me=x.eventTime;if((o&B)===B){X!==null&&(X=X.next={eventTime:me,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ce=t,Ze=x;switch(B=r,me=a,Ze.tag){case 1:if(ce=Ze.payload,typeof ce=="function"){$=ce.call(me,$,B);break e}$=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Ze.payload,B=typeof ce=="function"?ce.call(me,$,B):ce,B==null)break e;$=h({},$,B);break e;case 2:Kt=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,B=d.effects,B===null?d.effects=[x]:B.push(x))}else me={eventTime:me,lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(D=X=me,R=$):X=X.next=me,m|=B;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;B=x,x=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(1);if(X===null&&(R=$),d.baseState=R,d.firstBaseUpdate=D,d.lastBaseUpdate=X,r=d.shared.interleaved,r!==null){d=r;do m|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);gr|=m,t.lanes=m,t.memoizedState=$}}function so(t,r,a){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var o=t[r],d=o.callback;if(d!==null){if(o.callback=null,o=a,typeof d!="function")throw Error(u(191,d));d.call(o)}}}var oo=new i.Component().refs;function ya(t,r,a,o){r=t.memoizedState,a=a(o,r),a=a==null?r:h({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kn={isMounted:function(t){return(t=t._reactInternals)?q(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var o=Xe(),d=er(t),g=Ht(o,d);g.payload=r,a!=null&&(g.callback=a),r=Jt(t,g,d),r!==null&&(ct(r,t,d,o),qn(r,t,d))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var o=Xe(),d=er(t),g=Ht(o,d);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=Jt(t,g,d),r!==null&&(ct(r,t,d,o),qn(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Xe(),o=er(t),d=Ht(a,o);d.tag=2,r!=null&&(d.callback=r),r=Jt(t,d,o),r!==null&&(ct(r,t,o,a),qn(r,t,o))}};function lo(t,r,a,o,d,g,m){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,g,m):r.prototype&&r.prototype.isPureReactComponent?!Xn(a,o)||!Xn(d,g):!0}function ho(t,r,a){var o=!1,d=Qt,g=r.contextType;return typeof g=="object"&&g!==null?g=ut(g):(d=qe(r)?hr:be.current,o=r.contextTypes,g=(o=o!=null)?Rr(t,d):Qt),r=new r(a,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kn,t.stateNode=r,r._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function uo(t,r,a,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,o),r.state!==t&&Kn.enqueueReplaceState(r,r.state,null)}function _a(t,r,a,o){var d=t.stateNode;d.props=a,d.state=t.memoizedState,d.refs=oo,ma(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=ut(g):(g=qe(r)?hr:be.current,d.context=Rr(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(ya(t,r,g,a),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Kn.enqueueReplaceState(d,d.state,null),Qn(t,a,d,o),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function tn(t,r,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(u(309));var o=a.stateNode}if(!o)throw Error(u(147,t));var d=o,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(m){var x=d.refs;x===oo&&(x=d.refs={}),m===null?delete x[g]:x[g]=m},r._stringRef=g,r)}if(typeof t!="string")throw Error(u(284));if(!a._owner)throw Error(u(290,t))}return t}function Jn(t,r){throw t=Object.prototype.toString.call(r),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function fo(t){var r=t._init;return r(t._payload)}function co(t){function r(T,P){if(t){var M=T.deletions;M===null?(T.deletions=[P],T.flags|=16):M.push(P)}}function a(T,P){if(!t)return null;for(;P!==null;)r(T,P),P=P.sibling;return null}function o(T,P){for(T=new Map;P!==null;)P.key!==null?T.set(P.key,P):T.set(P.index,P),P=P.sibling;return T}function d(T,P){return T=rr(T,P),T.index=0,T.sibling=null,T}function g(T,P,M){return T.index=M,t?(M=T.alternate,M!==null?(M=M.index,M<P?(T.flags|=2,P):M):(T.flags|=2,P)):(T.flags|=1048576,P)}function m(T){return t&&T.alternate===null&&(T.flags|=2),T}function x(T,P,M,b){return P===null||P.tag!==6?(P=ss(M,T.mode,b),P.return=T,P):(P=d(P,M),P.return=T,P)}function R(T,P,M,b){var Z=M.type;return Z===v?X(T,P,M.props.children,b,M.key):P!==null&&(P.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===L&&fo(Z)===P.type)?(b=d(P,M.props),b.ref=tn(T,P,M),b.return=T,b):(b=xi(M.type,M.key,M.props,null,T.mode,b),b.ref=tn(T,P,M),b.return=T,b)}function D(T,P,M,b){return P===null||P.tag!==4||P.stateNode.containerInfo!==M.containerInfo||P.stateNode.implementation!==M.implementation?(P=os(M,T.mode,b),P.return=T,P):(P=d(P,M.children||[]),P.return=T,P)}function X(T,P,M,b,Z){return P===null||P.tag!==7?(P=yr(M,T.mode,b,Z),P.return=T,P):(P=d(P,M),P.return=T,P)}function $(T,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return P=ss(""+P,T.mode,M),P.return=T,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case c:return M=xi(P.type,P.key,P.props,null,T.mode,M),M.ref=tn(T,null,P),M.return=T,M;case p:return P=os(P,T.mode,M),P.return=T,P;case L:var b=P._init;return $(T,b(P._payload),M)}if(Ae(P)||H(P))return P=yr(P,T.mode,M,null),P.return=T,P;Jn(T,P)}return null}function B(T,P,M,b){var Z=P!==null?P.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return Z!==null?null:x(T,P,""+M,b);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case c:return M.key===Z?R(T,P,M,b):null;case p:return M.key===Z?D(T,P,M,b):null;case L:return Z=M._init,B(T,P,Z(M._payload),b)}if(Ae(M)||H(M))return Z!==null?null:X(T,P,M,b,null);Jn(T,M)}return null}function me(T,P,M,b,Z){if(typeof b=="string"&&b!==""||typeof b=="number")return T=T.get(M)||null,x(P,T,""+b,Z);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case c:return T=T.get(b.key===null?M:b.key)||null,R(P,T,b,Z);case p:return T=T.get(b.key===null?M:b.key)||null,D(P,T,b,Z);case L:var re=b._init;return me(T,P,M,re(b._payload),Z)}if(Ae(b)||H(b))return T=T.get(M)||null,X(P,T,b,Z,null);Jn(P,b)}return null}function ce(T,P,M,b){for(var Z=null,re=null,ee=P,se=P=0,ze=null;ee!==null&&se<M.length;se++){ee.index>se?(ze=ee,ee=null):ze=ee.sibling;var oe=B(T,ee,M[se],b);if(oe===null){ee===null&&(ee=ze);break}t&&ee&&oe.alternate===null&&r(T,ee),P=g(oe,P,se),re===null?Z=oe:re.sibling=oe,re=oe,ee=ze}if(se===M.length)return a(T,ee),_e&&dr(T,se),Z;if(ee===null){for(;se<M.length;se++)ee=$(T,M[se],b),ee!==null&&(P=g(ee,P,se),re===null?Z=ee:re.sibling=ee,re=ee);return _e&&dr(T,se),Z}for(ee=o(T,ee);se<M.length;se++)ze=me(ee,T,se,M[se],b),ze!==null&&(t&&ze.alternate!==null&&ee.delete(ze.key===null?se:ze.key),P=g(ze,P,se),re===null?Z=ze:re.sibling=ze,re=ze);return t&&ee.forEach(function(nr){return r(T,nr)}),_e&&dr(T,se),Z}function Ze(T,P,M,b){var Z=H(M);if(typeof Z!="function")throw Error(u(150));if(M=Z.call(M),M==null)throw Error(u(151));for(var re=Z=null,ee=P,se=P=0,ze=null,oe=M.next();ee!==null&&!oe.done;se++,oe=M.next()){ee.index>se?(ze=ee,ee=null):ze=ee.sibling;var nr=B(T,ee,oe.value,b);if(nr===null){ee===null&&(ee=ze);break}t&&ee&&nr.alternate===null&&r(T,ee),P=g(nr,P,se),re===null?Z=nr:re.sibling=nr,re=nr,ee=ze}if(oe.done)return a(T,ee),_e&&dr(T,se),Z;if(ee===null){for(;!oe.done;se++,oe=M.next())oe=$(T,oe.value,b),oe!==null&&(P=g(oe,P,se),re===null?Z=oe:re.sibling=oe,re=oe);return _e&&dr(T,se),Z}for(ee=o(T,ee);!oe.done;se++,oe=M.next())oe=me(ee,T,se,oe.value,b),oe!==null&&(t&&oe.alternate!==null&&ee.delete(oe.key===null?se:oe.key),P=g(oe,P,se),re===null?Z=oe:re.sibling=oe,re=oe);return t&&ee.forEach(function(Ed){return r(T,Ed)}),_e&&dr(T,se),Z}function Wt(T,P,M,b){if(typeof M=="object"&&M!==null&&M.type===v&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case c:e:{for(var Z=M.key,re=P;re!==null;){if(re.key===Z){if(Z=M.type,Z===v){if(re.tag===7){a(T,re.sibling),P=d(re,M.props.children),P.return=T,T=P;break e}}else if(re.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===L&&fo(Z)===re.type){a(T,re.sibling),P=d(re,M.props),P.ref=tn(T,re,M),P.return=T,T=P;break e}a(T,re);break}else r(T,re);re=re.sibling}M.type===v?(P=yr(M.props.children,T.mode,b,M.key),P.return=T,T=P):(b=xi(M.type,M.key,M.props,null,T.mode,b),b.ref=tn(T,P,M),b.return=T,T=b)}return m(T);case p:e:{for(re=M.key;P!==null;){if(P.key===re)if(P.tag===4&&P.stateNode.containerInfo===M.containerInfo&&P.stateNode.implementation===M.implementation){a(T,P.sibling),P=d(P,M.children||[]),P.return=T,T=P;break e}else{a(T,P);break}else r(T,P);P=P.sibling}P=os(M,T.mode,b),P.return=T,T=P}return m(T);case L:return re=M._init,Wt(T,P,re(M._payload),b)}if(Ae(M))return ce(T,P,M,b);if(H(M))return Ze(T,P,M,b);Jn(T,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,P!==null&&P.tag===6?(a(T,P.sibling),P=d(P,M),P.return=T,T=P):(a(T,P),P=ss(M,T.mode,b),P.return=T,T=P),m(T)):a(T,P)}return Wt}var Or=co(!0),go=co(!1),rn={},dt=qt(rn),nn=qt(rn),Dr=qt(rn);function At(t){if(t===rn)throw Error(u(174));return t}function Sa(t,r){pe(Dr,r),pe(nn,t),pe(dt,rn),t=Ee(r),ve(dt),pe(dt,t)}function Gr(){ve(dt),ve(nn),ve(Dr)}function po(t){var r=At(Dr.current),a=At(dt.current);r=Be(a,t.type,r),a!==r&&(pe(nn,t),pe(dt,r))}function wa(t){nn.current===t&&(ve(dt),ve(nn))}var we=qt(0);function Zn(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Us(a)||Qi(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ca=[];function xa(){for(var t=0;t<Ca.length;t++){var r=Ca[t];Nn?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}Ca.length=0}var $n=f.ReactCurrentDispatcher,Pa=f.ReactCurrentBatchConfig,cr=0,Ce=null,Me=null,De=null,ei=!1,an=!1,sn=0,Ku=0;function We(){throw Error(u(321))}function Ea(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!_t(t[a],r[a]))return!1;return!0}function ka(t,r,a,o,d,g){if(cr=g,Ce=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$n.current=t===null||t.memoizedState===null?ed:td,t=a(o,d),an){g=0;do{if(an=!1,sn=0,25<=g)throw Error(u(301));g+=1,De=Me=null,r.updateQueue=null,$n.current=rd,t=a(o,d)}while(an)}if($n.current=ni,r=Me!==null&&Me.next!==null,cr=0,De=Me=Ce=null,ei=!1,r)throw Error(u(300));return t}function Ta(){var t=sn!==0;return sn=0,t}function Mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?Ce.memoizedState=De=t:De=De.next=t,De}function ft(){if(Me===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var r=De===null?Ce.memoizedState:De.next;if(r!==null)De=r,Me=t;else{if(t===null)throw Error(u(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},De===null?Ce.memoizedState=De=t:De=De.next=t}return De}function on(t,r){return typeof r=="function"?r(t):r}function Ra(t){var r=ft(),a=r.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=t;var o=Me,d=o.baseQueue,g=a.pending;if(g!==null){if(d!==null){var m=d.next;d.next=g.next,g.next=m}o.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,o=o.baseState;var x=m=null,R=null,D=g;do{var X=D.lane;if((cr&X)===X)R!==null&&(R=R.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),o=D.hasEagerState?D.eagerState:t(o,D.action);else{var $={lane:X,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};R===null?(x=R=$,m=o):R=R.next=$,Ce.lanes|=X,gr|=X}D=D.next}while(D!==null&&D!==g);R===null?m=o:R.next=x,_t(o,r.memoizedState)||(Qe=!0),r.memoizedState=o,r.baseState=m,r.baseQueue=R,a.lastRenderedState=o}if(t=a.interleaved,t!==null){d=t;do g=d.lane,Ce.lanes|=g,gr|=g,d=d.next;while(d!==t)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Aa(t){var r=ft(),a=r.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=t;var o=a.dispatch,d=a.pending,g=r.memoizedState;if(d!==null){a.pending=null;var m=d=d.next;do g=t(g,m.action),m=m.next;while(m!==d);_t(g,r.memoizedState)||(Qe=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,o]}function vo(){}function mo(t,r){var a=Ce,o=ft(),d=r(),g=!_t(o.memoizedState,d);if(g&&(o.memoizedState=d,Qe=!0),o=o.queue,Ma(So.bind(null,a,o,t),[t]),o.getSnapshot!==r||g||De!==null&&De.memoizedState.tag&1){if(a.flags|=2048,ln(9,_o.bind(null,a,o,d,r),void 0,null),Ge===null)throw Error(u(349));(cr&30)!==0||yo(a,r,d)}return d}function yo(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ce.updateQueue,r===null?(r={lastEffect:null,stores:null},Ce.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function _o(t,r,a,o){r.value=a,r.getSnapshot=o,wo(r)&&Co(t)}function So(t,r,a){return a(function(){wo(r)&&Co(t)})}function wo(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!_t(t,a)}catch{return!0}}function Co(t){var r=Rt(t,1);r!==null&&ct(r,t,1,-1)}function xo(t){var r=Mt();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:on,lastRenderedState:t},r.queue=t,t=t.dispatch=$u.bind(null,Ce,t),[r.memoizedState,t]}function ln(t,r,a,o){return t={tag:t,create:r,destroy:a,deps:o,next:null},r=Ce.updateQueue,r===null?(r={lastEffect:null,stores:null},Ce.updateQueue=r,r.lastEffect=t.next=t):(a=r.lastEffect,a===null?r.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,r.lastEffect=t)),t}function Po(){return ft().memoizedState}function ti(t,r,a,o){var d=Mt();Ce.flags|=t,d.memoizedState=ln(1|r,a,void 0,o===void 0?null:o)}function ri(t,r,a,o){var d=ft();o=o===void 0?null:o;var g=void 0;if(Me!==null){var m=Me.memoizedState;if(g=m.destroy,o!==null&&Ea(o,m.deps)){d.memoizedState=ln(r,a,g,o);return}}Ce.flags|=t,d.memoizedState=ln(1|r,a,g,o)}function Eo(t,r){return ti(8390656,8,t,r)}function Ma(t,r){return ri(2048,8,t,r)}function ko(t,r){return ri(4,2,t,r)}function To(t,r){return ri(4,4,t,r)}function Ro(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ao(t,r,a){return a=a!=null?a.concat([t]):null,ri(4,4,Ro.bind(null,r,t),a)}function La(){}function Mo(t,r){var a=ft();r=r===void 0?null:r;var o=a.memoizedState;return o!==null&&r!==null&&Ea(r,o[1])?o[0]:(a.memoizedState=[t,r],t)}function Lo(t,r){var a=ft();r=r===void 0?null:r;var o=a.memoizedState;return o!==null&&r!==null&&Ea(r,o[1])?o[0]:(t=t(),a.memoizedState=[t,r],t)}function No(t,r,a){return(cr&21)===0?(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=a):(_t(a,r)||(a=Vs(),Ce.lanes|=a,gr|=a,t.baseState=!0),r)}function Ju(t,r){var a=ae;ae=a!==0&&4>a?a:4,t(!0);var o=Pa.transition;Pa.transition={};try{t(!1),r()}finally{ae=a,Pa.transition=o}}function Io(){return ft().memoizedState}function Zu(t,r,a){var o=er(t);if(a={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null},Oo(t))Do(r,a);else if(a=no(t,r,a,o),a!==null){var d=Xe();ct(a,t,o,d),Go(a,r,o)}}function $u(t,r,a){var o=er(t),d={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null};if(Oo(t))Do(r,d);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var m=r.lastRenderedState,x=g(m,a);if(d.hasEagerState=!0,d.eagerState=x,_t(x,m)){var R=r.interleaved;R===null?(d.next=d,va(r)):(d.next=R.next,R.next=d),r.interleaved=d;return}}catch{}finally{}a=no(t,r,d,o),a!==null&&(d=Xe(),ct(a,t,o,d),Go(a,r,o))}}function Oo(t){var r=t.alternate;return t===Ce||r!==null&&r===Ce}function Do(t,r){an=ei=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Go(t,r,a){if((a&4194240)!==0){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,ra(t,a)}}var ni={readContext:ut,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},ed={readContext:ut,useCallback:function(t,r){return Mt().memoizedState=[t,r===void 0?null:r],t},useContext:ut,useEffect:Eo,useImperativeHandle:function(t,r,a){return a=a!=null?a.concat([t]):null,ti(4194308,4,Ro.bind(null,r,t),a)},useLayoutEffect:function(t,r){return ti(4194308,4,t,r)},useInsertionEffect:function(t,r){return ti(4,2,t,r)},useMemo:function(t,r){var a=Mt();return r=r===void 0?null:r,t=t(),a.memoizedState=[t,r],t},useReducer:function(t,r,a){var o=Mt();return r=a!==void 0?a(r):r,o.memoizedState=o.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},o.queue=t,t=t.dispatch=Zu.bind(null,Ce,t),[o.memoizedState,t]},useRef:function(t){var r=Mt();return t={current:t},r.memoizedState=t},useState:xo,useDebugValue:La,useDeferredValue:function(t){return Mt().memoizedState=t},useTransition:function(){var t=xo(!1),r=t[0];return t=Ju.bind(null,t[1]),Mt().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,a){var o=Ce,d=Mt();if(_e){if(a===void 0)throw Error(u(407));a=a()}else{if(a=r(),Ge===null)throw Error(u(349));(cr&30)!==0||yo(o,r,a)}d.memoizedState=a;var g={value:a,getSnapshot:r};return d.queue=g,Eo(So.bind(null,o,g,t),[t]),o.flags|=2048,ln(9,_o.bind(null,o,g,a,r),void 0,null),a},useId:function(){var t=Mt(),r=Ge.identifierPrefix;if(_e){var a=Ft,o=zt;a=(o&~(1<<32-yt(o)-1)).toString(32)+a,r=":"+r+"R"+a,a=sn++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Ku++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},td={readContext:ut,useCallback:Mo,useContext:ut,useEffect:Ma,useImperativeHandle:Ao,useInsertionEffect:ko,useLayoutEffect:To,useMemo:Lo,useReducer:Ra,useRef:Po,useState:function(){return Ra(on)},useDebugValue:La,useDeferredValue:function(t){var r=ft();return No(r,Me.memoizedState,t)},useTransition:function(){var t=Ra(on)[0],r=ft().memoizedState;return[t,r]},useMutableSource:vo,useSyncExternalStore:mo,useId:Io,unstable_isNewReconciler:!1},rd={readContext:ut,useCallback:Mo,useContext:ut,useEffect:Ma,useImperativeHandle:Ao,useInsertionEffect:ko,useLayoutEffect:To,useMemo:Lo,useReducer:Aa,useRef:Po,useState:function(){return Aa(on)},useDebugValue:La,useDeferredValue:function(t){var r=ft();return Me===null?r.memoizedState=t:No(r,Me.memoizedState,t)},useTransition:function(){var t=Aa(on)[0],r=ft().memoizedState;return[t,r]},useMutableSource:vo,useSyncExternalStore:mo,useId:Io,unstable_isNewReconciler:!1};function zr(t,r){try{var a="",o=r;do a+=Qu(o),o=o.return;while(o);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d,digest:null}}function Na(t,r,a){return{value:t,source:null,stack:a!=null?a:null,digest:r!=null?r:null}}function Ia(t,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var nd=typeof WeakMap=="function"?WeakMap:Map;function zo(t,r,a){a=Ht(-1,a),a.tag=3,a.payload={element:null};var o=r.value;return a.callback=function(){mi||(mi=!0,$a=o),Ia(t,r)},a}function Fo(t,r,a){a=Ht(-1,a),a.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var d=r.value;a.payload=function(){return o(d)},a.callback=function(){Ia(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ia(t,r),typeof o!="function"&&(Zt===null?Zt=new Set([this]):Zt.add(this));var m=r.stack;this.componentDidCatch(r.value,{componentStack:m!==null?m:""})}),a}function Ho(t,r,a){var o=t.pingCache;if(o===null){o=t.pingCache=new nd;var d=new Set;o.set(r,d)}else d=o.get(r),d===void 0&&(d=new Set,o.set(r,d));d.has(a)||(d.add(a),t=md.bind(null,t,r,a),r.then(t,t))}function Bo(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function bo(t,r,a,o,d){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Ht(-1,1),r.tag=2,Jt(a,r,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var id=f.ReactCurrentOwner,Qe=!1;function je(t,r,a,o){r.child=t===null?go(r,null,a,o):Or(r,t.child,a,o)}function Wo(t,r,a,o,d){a=a.render;var g=r.ref;return Ir(r,d),o=ka(t,r,a,o,g,d),a=Ta(),t!==null&&!Qe?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Bt(t,r,d)):(_e&&a&&oa(r),r.flags|=1,je(t,r,o,d),r.child)}function Uo(t,r,a,o,d){if(t===null){var g=a.type;return typeof g=="function"&&!as(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=g,Yo(t,r,g,o,d)):(t=xi(a.type,null,o,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,(t.lanes&d)===0){var m=g.memoizedProps;if(a=a.compare,a=a!==null?a:Xn,a(m,o)&&t.ref===r.ref)return Bt(t,r,d)}return r.flags|=1,t=rr(g,o),t.ref=r.ref,t.return=r,r.child=t}function Yo(t,r,a,o,d){if(t!==null){var g=t.memoizedProps;if(Xn(g,o)&&t.ref===r.ref)if(Qe=!1,r.pendingProps=o=g,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Qe=!0);else return r.lanes=t.lanes,Bt(t,r,d)}return Oa(t,r,a,o,d)}function Xo(t,r,a){var o=r.pendingProps,d=o.children,g=t!==null?t.memoizedState:null;if(o.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Hr,rt),rt|=a;else{if((a&1073741824)===0)return t=g!==null?g.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,pe(Hr,rt),rt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=g!==null?g.baseLanes:a,pe(Hr,rt),rt|=o}else g!==null?(o=g.baseLanes|a,r.memoizedState=null):o=a,pe(Hr,rt),rt|=o;return je(t,r,d,a),r.child}function jo(t,r){var a=r.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Oa(t,r,a,o,d){var g=qe(a)?hr:be.current;return g=Rr(r,g),Ir(r,d),a=ka(t,r,a,o,g,d),o=Ta(),t!==null&&!Qe?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Bt(t,r,d)):(_e&&o&&oa(r),r.flags|=1,je(t,r,a,d),r.child)}function Vo(t,r,a,o,d){if(qe(a)){var g=!0;Gn(r)}else g=!1;if(Ir(r,d),r.stateNode===null)ai(t,r),ho(r,a,o),_a(r,a,o,d),o=!0;else if(t===null){var m=r.stateNode,x=r.memoizedProps;m.props=x;var R=m.context,D=a.contextType;typeof D=="object"&&D!==null?D=ut(D):(D=qe(a)?hr:be.current,D=Rr(r,D));var X=a.getDerivedStateFromProps,$=typeof X=="function"||typeof m.getSnapshotBeforeUpdate=="function";$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==o||R!==D)&&uo(r,m,o,D),Kt=!1;var B=r.memoizedState;m.state=B,Qn(r,o,m,d),R=r.memoizedState,x!==o||B!==R||Ve.current||Kt?(typeof X=="function"&&(ya(r,a,X,o),R=r.memoizedState),(x=Kt||lo(r,a,x,o,B,R,D))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=R),m.props=o,m.state=R,m.context=D,o=x):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{m=r.stateNode,io(t,r),x=r.memoizedProps,D=r.type===r.elementType?x:wt(r.type,x),m.props=D,$=r.pendingProps,B=m.context,R=a.contextType,typeof R=="object"&&R!==null?R=ut(R):(R=qe(a)?hr:be.current,R=Rr(r,R));var me=a.getDerivedStateFromProps;(X=typeof me=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==$||B!==R)&&uo(r,m,o,R),Kt=!1,B=r.memoizedState,m.state=B,Qn(r,o,m,d);var ce=r.memoizedState;x!==$||B!==ce||Ve.current||Kt?(typeof me=="function"&&(ya(r,a,me,o),ce=r.memoizedState),(D=Kt||lo(r,a,D,o,B,ce,R)||!1)?(X||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ce,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ce,R)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=ce),m.props=o,m.state=ce,m.context=R,o=D):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&B===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&B===t.memoizedState||(r.flags|=1024),o=!1)}return Da(t,r,a,o,g,d)}function Da(t,r,a,o,d,g){jo(t,r);var m=(r.flags&128)!==0;if(!o&&!m)return d&&js(r,a,!1),Bt(t,r,g);o=r.stateNode,id.current=r;var x=m&&typeof a.getDerivedStateFromError!="function"?null:o.render();return r.flags|=1,t!==null&&m?(r.child=Or(r,t.child,null,g),r.child=Or(r,null,x,g)):je(t,r,x,g),r.memoizedState=o.state,d&&js(r,a,!0),r.child}function qo(t){var r=t.stateNode;r.pendingContext?Ys(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Ys(t,r.context,!1),Sa(t,r.containerInfo)}function Qo(t,r,a,o,d){return Lr(),da(d),r.flags|=256,je(t,r,a,o),r.child}var Ga={dehydrated:null,treeContext:null,retryLane:0};function za(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ko(t,r,a){var o=r.pendingProps,d=we.current,g=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(d&2)!==0),x?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),pe(we,d&1),t===null)return ua(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:Qi(t)?r.lanes=8:r.lanes=1073741824,null):(m=o.children,t=o.fallback,g?(o=r.mode,g=r.child,m={mode:"hidden",children:m},(o&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=m):g=Pi(m,o,0,null),t=yr(t,o,a,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=za(a),r.memoizedState=Ga,t):Fa(r,m));if(d=t.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return ad(t,r,m,o,x,d,a);if(g){g=o.fallback,m=r.mode,d=t.child,x=d.sibling;var R={mode:"hidden",children:o.children};return(m&1)===0&&r.child!==d?(o=r.child,o.childLanes=0,o.pendingProps=R,r.deletions=null):(o=rr(d,R),o.subtreeFlags=d.subtreeFlags&14680064),x!==null?g=rr(x,g):(g=yr(g,m,a,null),g.flags|=2),g.return=r,o.return=r,o.sibling=g,r.child=o,o=g,g=r.child,m=t.child.memoizedState,m=m===null?za(a):{baseLanes:m.baseLanes|a,cachePool:null,transitions:m.transitions},g.memoizedState=m,g.childLanes=t.childLanes&~a,r.memoizedState=Ga,o}return g=t.child,t=g.sibling,o=rr(g,{mode:"visible",children:o.children}),(r.mode&1)===0&&(o.lanes=a),o.return=r,o.sibling=null,t!==null&&(a=r.deletions,a===null?(r.deletions=[t],r.flags|=16):a.push(t)),r.child=o,r.memoizedState=null,o}function Fa(t,r){return r=Pi({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ii(t,r,a,o){return o!==null&&da(o),Or(r,t.child,null,a),t=Fa(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ad(t,r,a,o,d,g,m){if(a)return r.flags&256?(r.flags&=-257,o=Na(Error(u(422))),ii(t,r,m,o)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=o.fallback,d=r.mode,o=Pi({mode:"visible",children:o.children},d,0,null),g=yr(g,d,m,null),g.flags|=2,o.return=r,g.return=r,o.sibling=g,r.child=o,(r.mode&1)!==0&&Or(r,t.child,null,m),r.child.memoizedState=za(m),r.memoizedState=Ga,g);if((r.mode&1)===0)return ii(t,r,m,null);if(Qi(d))return o=yu(d).digest,g=Error(u(419)),o=Na(g,o,void 0),ii(t,r,m,o);if(a=(m&t.childLanes)!==0,Qe||a){if(o=Ge,o!==null){switch(m&-m){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(o.suspendedLanes|m))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Rt(t,d),ct(o,t,d,-1))}return is(),o=Na(Error(u(421))),ii(t,r,m,o)}return Us(d)?(r.flags|=128,r.child=t.child,r=yd.bind(null,t),_u(d,r),null):(t=g.treeContext,st&&(ht=Cu(d),tt=r,_e=!0,St=null,en=!1,t!==null&&(ot[lt++]=zt,ot[lt++]=Ft,ot[lt++]=ur,zt=t.id,Ft=t.overflow,ur=r)),r=Fa(r,o.children),r.flags|=4096,r)}function Jo(t,r,a){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),pa(t.return,r,a)}function Ha(t,r,a,o,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=a,g.tailMode=d)}function Zo(t,r,a){var o=r.pendingProps,d=o.revealOrder,g=o.tail;if(je(t,r,o.children,a),o=we.current,(o&2)!==0)o=o&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jo(t,a,r);else if(t.tag===19)Jo(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(pe(we,o),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&Zn(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Ha(r,!1,d,a,g);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&Zn(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Ha(r,!0,a,null,g);break;case"together":Ha(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ai(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Bt(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),gr|=r.lanes,(a&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(u(153));if(r.child!==null){for(t=r.child,a=rr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=rr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function sd(t,r,a){switch(r.tag){case 3:qo(r),Lr();break;case 5:po(r);break;case 1:qe(r.type)&&Gn(r);break;case 4:Sa(r,r.stateNode.containerInfo);break;case 10:ro(r,r.type._context,r.memoizedProps.value);break;case 13:var o=r.memoizedState;if(o!==null)return o.dehydrated!==null?(pe(we,we.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Ko(t,r,a):(pe(we,we.current&1),t=Bt(t,r,a),t!==null?t.sibling:null);pe(we,we.current&1);break;case 19:if(o=(a&r.childLanes)!==0,(t.flags&128)!==0){if(o)return Zo(t,r,a);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),pe(we,we.current),o)break;return null;case 22:case 23:return r.lanes=0,Xo(t,r,a)}return Bt(t,r,a)}function Lt(t){t.flags|=4}function $o(t,r){if(t!==null&&t.child===r.child)return!0;if((r.flags&16)!==0)return!1;for(t=r.child;t!==null;){if((t.flags&12854)!==0||(t.subtreeFlags&12854)!==0)return!1;t=t.sibling}return!0}var hn,un,si,oi;if(et)hn=function(t,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)Ie(t,a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},un=function(){},si=function(t,r,a,o,d){if(t=t.memoizedProps,t!==o){var g=r.stateNode,m=At(dt.current);a=mt(g,a,t,o,d,m),(r.updateQueue=a)&&Lt(r)}},oi=function(t,r,a,o){a!==o&&Lt(r)};else if(In){hn=function(t,r,a,o){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;a&&o&&(g=bs(g,d.type,d.memoizedProps,d)),Ie(t,g)}else if(d.tag===6)g=d.stateNode,a&&o&&(g=Ws(g,d.memoizedProps,d)),Ie(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),hn(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var el=function(t,r,a,o){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;a&&o&&(g=bs(g,d.type,d.memoizedProps,d)),Bs(t,g)}else if(d.tag===6)g=d.stateNode,a&&o&&(g=Ws(g,d.memoizedProps,d)),Bs(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),el(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};un=function(t,r){var a=r.stateNode;if(!$o(t,r)){t=a.containerInfo;var o=Hs(t);el(o,r,!1,!1),a.pendingChildren=o,Lt(r),gu(t,o)}},si=function(t,r,a,o,d){var g=t.stateNode,m=t.memoizedProps;if((t=$o(t,r))&&m===o)r.stateNode=g;else{var x=r.stateNode,R=At(dt.current),D=null;m!==o&&(D=mt(x,a,m,o,d,R)),t&&D===null?r.stateNode=g:(g=cu(g,D,a,m,o,r,t,x),vt(g,a,o,d,R)&&Lt(r),r.stateNode=g,t?Lt(r):hn(g,r,!1,!1))}},oi=function(t,r,a,o){a!==o?(t=At(Dr.current),a=At(dt.current),r.stateNode=Gs(o,t,a,r),Lt(r)):r.stateNode=t.stateNode}}else un=function(){},si=function(){},oi=function(){};function dn(t,r){if(!_e)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ue(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&14680064,o|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=a,r}function od(t,r,a){var o=r.pendingProps;switch(la(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(r),null;case 1:return qe(r.type)&&Dn(),Ue(r),null;case 3:return a=r.stateNode,Gr(),ve(Ve),ve(be),xa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Yn(r)?Lt(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,St!==null&&(rs(St),St=null))),un(t,r),Ue(r),null;case 5:wa(r),a=At(Dr.current);var d=r.type;if(t!==null&&r.stateNode!=null)si(t,r,d,o,a),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!o){if(r.stateNode===null)throw Error(u(166));return Ue(r),null}if(t=At(dt.current),Yn(r)){if(!st)throw Error(u(175));t=xu(r.stateNode,r.type,r.memoizedProps,a,t,r,!en),r.updateQueue=t,t!==null&&Lt(r)}else{var g=ye(d,o,a,t,r);hn(g,r,!1,!1),r.stateNode=g,vt(g,d,o,a,t)&&Lt(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ue(r),null;case 6:if(t&&r.stateNode!=null)oi(t,r,t.memoizedProps,o);else{if(typeof o!="string"&&r.stateNode===null)throw Error(u(166));if(t=At(Dr.current),a=At(dt.current),Yn(r)){if(!st)throw Error(u(176));if(t=r.stateNode,a=r.memoizedProps,(o=Pu(t,a,r,!en))&&(d=tt,d!==null))switch(d.tag){case 3:Nu(d.stateNode.containerInfo,t,a,(d.mode&1)!==0);break;case 5:Iu(d.type,d.memoizedProps,d.stateNode,t,a,(d.mode&1)!==0)}o&&Lt(r)}else r.stateNode=Gs(o,t,a,r)}return Ue(r),null;case 13:if(ve(we),o=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&ht!==null&&(r.mode&1)!==0&&(r.flags&128)===0)to(),Lr(),r.flags|=98560,d=!1;else if(d=Yn(r),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(u(318));if(!st)throw Error(u(344));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(u(317));Eu(d,r)}else Lr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ue(r),d=!1}else St!==null&&(rs(St),St=null),d=!0;if(!d)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(a=o!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(we.current&1)!==0?Le===0&&(Le=3):is())),r.updateQueue!==null&&(r.flags|=4),Ue(r),null);case 4:return Gr(),un(t,r),t===null&&Wh(r.stateNode.containerInfo),Ue(r),null;case 10:return ga(r.type._context),Ue(r),null;case 17:return qe(r.type)&&Dn(),Ue(r),null;case 19:if(ve(we),d=r.memoizedState,d===null)return Ue(r),null;if(o=(r.flags&128)!==0,g=d.rendering,g===null)if(o)dn(d,!1);else{if(Le!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(g=Zn(t),g!==null){for(r.flags|=128,dn(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=a,a=r.child;a!==null;)o=a,d=t,o.flags&=14680066,g=o.alternate,g===null?(o.childLanes=0,o.lanes=d,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=g.childLanes,o.lanes=g.lanes,o.child=g.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=g.memoizedProps,o.memoizedState=g.memoizedState,o.updateQueue=g.updateQueue,o.type=g.type,d=g.dependencies,o.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),a=a.sibling;return pe(we,we.current&1|2),r.child}t=t.sibling}d.tail!==null&&Oe()>Za&&(r.flags|=128,o=!0,dn(d,!1),r.lanes=4194304)}else{if(!o)if(t=Zn(g),t!==null){if(r.flags|=128,o=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),dn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!_e)return Ue(r),null}else 2*Oe()-d.renderingStartTime>Za&&a!==1073741824&&(r.flags|=128,o=!0,dn(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Oe(),r.sibling=null,t=we.current,pe(we,o?t&1|2:t&1),r):(Ue(r),null);case 22:case 23:return ns(),a=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(r.flags|=8192),a&&(r.mode&1)!==0?(rt&1073741824)!==0&&(Ue(r),et&&r.subtreeFlags&6&&(r.flags|=8192)):Ue(r),null;case 24:return null;case 25:return null}throw Error(u(156,r.tag))}function ld(t,r){switch(la(r),r.tag){case 1:return qe(r.type)&&Dn(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Gr(),ve(Ve),ve(be),xa(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return wa(r),null;case 13:if(ve(we),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(u(340));Lr()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ve(we),null;case 4:return Gr(),null;case 10:return ga(r.type._context),null;case 22:case 23:return ns(),null;case 24:return null;default:return null}}var li=!1,Ye=!1,hd=typeof WeakSet=="function"?WeakSet:Set,W=null;function Fr(t,r){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(o){Se(t,r,o)}else a.current=null}function Ba(t,r,a){try{a()}catch(o){Se(t,r,o)}}var tl=!1;function ud(t,r){for($e(t.containerInfo),W=r;W!==null;)if(t=W,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,W=r;else for(;W!==null;){t=W;try{var a=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(a!==null){var o=a.memoizedProps,d=a.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?o:wt(t.type,o),d);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:et&&fu(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(x){Se(t,t.return,x)}if(r=t.sibling,r!==null){r.return=t.return,W=r;break}W=t.return}return a=tl,tl=!1,a}function fn(t,r,a){var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Ba(r,a,g)}d=d.next}while(d!==o)}}function hi(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var o=a.create;a.destroy=o()}a=a.next}while(a!==r)}}function ba(t){var r=t.ref;if(r!==null){var a=t.stateNode;switch(t.tag){case 5:t=he(a);break;default:t=a}typeof r=="function"?r(t):r.current=t}}function rl(t){var r=t.alternate;r!==null&&(t.alternate=null,rl(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Yh(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nl(t){return t.tag===5||t.tag===3||t.tag===4}function il(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wa(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?au(a,t,r):eu(a,t);else if(o!==4&&(t=t.child,t!==null))for(Wa(t,r,a),t=t.sibling;t!==null;)Wa(t,r,a),t=t.sibling}function Ua(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?iu(a,t,r):$h(a,t);else if(o!==4&&(t=t.child,t!==null))for(Ua(t,r,a),t=t.sibling;t!==null;)Ua(t,r,a),t=t.sibling}var Fe=null,Ct=!1;function Nt(t,r,a){for(a=a.child;a!==null;)Ya(t,r,a),a=a.sibling}function Ya(t,r,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Bn,a)}catch{}switch(a.tag){case 5:Ye||Fr(a,r);case 6:if(et){var o=Fe,d=Ct;Fe=null,Nt(t,r,a),Fe=o,Ct=d,Fe!==null&&(Ct?ou(Fe,a.stateNode):su(Fe,a.stateNode))}else Nt(t,r,a);break;case 18:et&&Fe!==null&&(Ct?Mu(Fe,a.stateNode):Au(Fe,a.stateNode));break;case 4:et?(o=Fe,d=Ct,Fe=a.stateNode.containerInfo,Ct=!0,Nt(t,r,a),Fe=o,Ct=d):(In&&(o=a.stateNode.containerInfo,d=Hs(o),qi(o,d)),Nt(t,r,a));break;case 0:case 11:case 14:case 15:if(!Ye&&(o=a.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){d=o=o.next;do{var g=d,m=g.destroy;g=g.tag,m!==void 0&&((g&2)!==0||(g&4)!==0)&&Ba(a,r,m),d=d.next}while(d!==o)}Nt(t,r,a);break;case 1:if(!Ye&&(Fr(a,r),o=a.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(x){Se(a,r,x)}Nt(t,r,a);break;case 21:Nt(t,r,a);break;case 22:a.mode&1?(Ye=(o=Ye)||a.memoizedState!==null,Nt(t,r,a),Ye=o):Nt(t,r,a);break;default:Nt(t,r,a)}}function al(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new hd),r.forEach(function(o){var d=_d.bind(null,t,o);a.has(o)||(a.add(o),o.then(d,d))})}}function xt(t,r){var a=r.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o];try{var g=t,m=r;if(et){var x=m;e:for(;x!==null;){switch(x.tag){case 5:Fe=x.stateNode,Ct=!1;break e;case 3:Fe=x.stateNode.containerInfo,Ct=!0;break e;case 4:Fe=x.stateNode.containerInfo,Ct=!0;break e}x=x.return}if(Fe===null)throw Error(u(160));Ya(g,m,d),Fe=null,Ct=!1}else Ya(g,m,d);var R=d.alternate;R!==null&&(R.return=null),d.return=null}catch(D){Se(d,r,D)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)sl(r,t),r=r.sibling}function sl(t,r){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(r,t),It(t),o&4){try{fn(3,t,t.return),hi(3,t)}catch(B){Se(t,t.return,B)}try{fn(5,t,t.return)}catch(B){Se(t,t.return,B)}}break;case 1:xt(r,t),It(t),o&512&&a!==null&&Fr(a,a.return);break;case 5:if(xt(r,t),It(t),o&512&&a!==null&&Fr(a,a.return),et){if(t.flags&32){var d=t.stateNode;try{Fs(d)}catch(B){Se(t,t.return,B)}}if(o&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(a=a!==null?a.memoizedProps:g,o=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{nu(d,r,o,a,g,t)}catch(B){Se(t,t.return,B)}}}break;case 6:if(xt(r,t),It(t),o&4&&et){if(t.stateNode===null)throw Error(u(162));d=t.stateNode,g=t.memoizedProps,a=a!==null?a.memoizedProps:g;try{tu(d,a,g)}catch(B){Se(t,t.return,B)}}break;case 3:if(xt(r,t),It(t),o&4){if(et&&st&&a!==null&&a.memoizedState.isDehydrated)try{Tu(r.containerInfo)}catch(B){Se(t,t.return,B)}if(In){d=r.containerInfo,g=r.pendingChildren;try{qi(d,g)}catch(B){Se(t,t.return,B)}}}break;case 4:if(xt(r,t),It(t),o&4&&In){g=t.stateNode,d=g.containerInfo,g=g.pendingChildren;try{qi(d,g)}catch(B){Se(t,t.return,B)}}break;case 13:xt(r,t),It(t),d=t.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Ja=Oe())),o&4&&al(t);break;case 22:var m=a!==null&&a.memoizedState!==null;if(t.mode&1?(Ye=(a=Ye)||m,xt(r,t),Ye=a):xt(r,t),It(t),o&8192){if(a=t.memoizedState!==null,(t.stateNode.isHidden=a)&&!m&&(t.mode&1)!==0)for(W=t,o=t.child;o!==null;){for(r=W=o;W!==null;){m=W;var x=m.child;switch(m.tag){case 0:case 11:case 14:case 15:fn(4,m,m.return);break;case 1:Fr(m,m.return);var R=m.stateNode;if(typeof R.componentWillUnmount=="function"){var D=m,X=m.return;try{var $=D;R.props=$.memoizedProps,R.state=$.memoizedState,R.componentWillUnmount()}catch(B){Se(D,X,B)}}break;case 5:Fr(m,m.return);break;case 22:if(m.memoizedState!==null){hl(r);continue}}x!==null?(x.return=m,W=x):hl(r)}o=o.sibling}if(et){e:if(o=null,et)for(r=t;;){if(r.tag===5){if(o===null){o=r;try{d=r.stateNode,a?lu(d):uu(r.stateNode,r.memoizedProps)}catch(B){Se(t,t.return,B)}}}else if(r.tag===6){if(o===null)try{g=r.stateNode,a?hu(g):du(g,r.memoizedProps)}catch(B){Se(t,t.return,B)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}}}break;case 19:xt(r,t),It(t),o&4&&al(t);break;case 21:break;default:xt(r,t),It(t)}}function It(t){var r=t.flags;if(r&2){try{if(et){e:{for(var a=t.return;a!==null;){if(nl(a)){var o=a;break e}a=a.return}throw Error(u(160))}switch(o.tag){case 5:var d=o.stateNode;o.flags&32&&(Fs(d),o.flags&=-33);var g=il(t);Ua(t,g,d);break;case 3:case 4:var m=o.stateNode.containerInfo,x=il(t);Wa(t,x,m);break;default:throw Error(u(161))}}}catch(R){Se(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dd(t,r,a){W=t,ol(t)}function ol(t,r,a){for(var o=(t.mode&1)!==0;W!==null;){var d=W,g=d.child;if(d.tag===22&&o){var m=d.memoizedState!==null||li;if(!m){var x=d.alternate,R=x!==null&&x.memoizedState!==null||Ye;x=li;var D=Ye;if(li=m,(Ye=R)&&!D)for(W=d;W!==null;)m=W,R=m.child,m.tag===22&&m.memoizedState!==null?ul(d):R!==null?(R.return=m,W=R):ul(d);for(;g!==null;)W=g,ol(g),g=g.sibling;W=d,li=x,Ye=D}ll(t)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,W=g):ll(t)}}function ll(t){for(;W!==null;){var r=W;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ye||hi(5,r);break;case 1:var o=r.stateNode;if(r.flags&4&&!Ye)if(a===null)o.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:wt(r.type,a.memoizedProps);o.componentDidUpdate(d,a.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&so(r,g,o);break;case 3:var m=r.updateQueue;if(m!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=he(r.child.stateNode);break;case 1:a=r.child.stateNode}so(r,m,a)}break;case 5:var x=r.stateNode;a===null&&r.flags&4&&ru(x,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(st&&r.memoizedState===null){var R=r.alternate;if(R!==null){var D=R.memoizedState;if(D!==null){var X=D.dehydrated;X!==null&&Ru(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}Ye||r.flags&512&&ba(r)}catch($){Se(r,r.return,$)}}if(r===t){W=null;break}if(a=r.sibling,a!==null){a.return=r.return,W=a;break}W=r.return}}function hl(t){for(;W!==null;){var r=W;if(r===t){W=null;break}var a=r.sibling;if(a!==null){a.return=r.return,W=a;break}W=r.return}}function ul(t){for(;W!==null;){var r=W;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{hi(4,r)}catch(R){Se(r,a,R)}break;case 1:var o=r.stateNode;if(typeof o.componentDidMount=="function"){var d=r.return;try{o.componentDidMount()}catch(R){Se(r,d,R)}}var g=r.return;try{ba(r)}catch(R){Se(r,g,R)}break;case 5:var m=r.return;try{ba(r)}catch(R){Se(r,m,R)}}}catch(R){Se(r,r.return,R)}if(r===t){W=null;break}var x=r.sibling;if(x!==null){x.return=r.return,W=x;break}W=r.return}}var ui=0,di=1,fi=2,ci=3,gi=4;if(typeof Symbol=="function"&&Symbol.for){var cn=Symbol.for;ui=cn("selector.component"),di=cn("selector.has_pseudo_class"),fi=cn("selector.role"),ci=cn("selector.test_id"),gi=cn("selector.text")}function Xa(t){var r=bh(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(u(364));return r}if(t=Vh(t),t===null)throw Error(u(362));return t.stateNode.current}function ja(t,r){switch(r.$$typeof){case ui:if(t.type===r.value)return!0;break;case di:e:{r=r.value,t=[t,0];for(var a=0;a<t.length;){var o=t[a++],d=t[a++],g=r[d];if(o.tag!==5||!Kr(o)){for(;g!=null&&ja(o,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(o=o.child;o!==null;)t.push(o,d),o=o.sibling}}r=!1}return r;case fi:if(t.tag===5&&Kh(t.stateNode,r.value))return!0;break;case gi:if((t.tag===5||t.tag===6)&&(t=Qh(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case ci:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Va(t){switch(t.$$typeof){case ui:return"<"+(V(t.value)||"Unknown")+">";case di:return":has("+(Va(t)||"")+")";case fi:return'[role="'+t.value+'"]';case gi:return'"'+t.value+'"';case ci:return'[data-testname="'+t.value+'"]';default:throw Error(u(365))}}function dl(t,r){var a=[];t=[t,0];for(var o=0;o<t.length;){var d=t[o++],g=t[o++],m=r[g];if(d.tag!==5||!Kr(d)){for(;m!=null&&ja(d,m);)g++,m=r[g];if(g===r.length)a.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return a}function qa(t,r){if(!Qr)throw Error(u(363));t=Xa(t),t=dl(t,r),r=[],t=Array.from(t);for(var a=0;a<t.length;){var o=t[a++];if(o.tag===5)Kr(o)||r.push(o.stateNode);else for(o=o.child;o!==null;)t.push(o),o=o.sibling}return r}var fd=Math.ceil,pi=f.ReactCurrentDispatcher,Qa=f.ReactCurrentOwner,ke=f.ReactCurrentBatchConfig,ne=0,Ge=null,Re=null,He=0,rt=0,Hr=qt(0),Le=0,gn=null,gr=0,vi=0,Ka=0,pn=null,Ke=null,Ja=0,Za=1/0,bt=null;function Br(){Za=Oe()+500}var mi=!1,$a=null,Zt=null,yi=!1,$t=null,_i=0,vn=0,es=null,Si=-1,wi=0;function Xe(){return(ne&6)!==0?Oe():Si!==-1?Si:Si=Oe()}function er(t){return(t.mode&1)===0?1:(ne&2)!==0&&He!==0?He&-He:qu.transition!==null?(wi===0&&(wi=Vs()),wi):(t=ae,t!==0?t:Uh())}function ct(t,r,a,o){if(50<vn)throw vn=0,es=null,Error(u(185));$r(t,a,o),((ne&2)===0||t!==Ge)&&(t===Ge&&((ne&2)===0&&(vi|=a),Le===4&&tr(t,He)),Je(t,o),a===1&&ne===0&&(r.mode&1)===0&&(Br(),bn&&Tt()))}function Je(t,r){var a=t.callbackNode;Hu(t,r);var o=Hn(t,t===Ge?He:0);if(o===0)a!==null&&Qs(a),t.callbackNode=null,t.callbackPriority=0;else if(r=o&-o,t.callbackPriority!==r){if(a!=null&&Qs(a),r===1)t.tag===0?Vu(cl.bind(null,t)):Ks(cl.bind(null,t)),Xh?jh(function(){(ne&6)===0&&Tt()}):na(ia,Tt),a=null;else{switch(qs(o)){case 1:a=ia;break;case 4:a=Uu;break;case 16:a=aa;break;case 536870912:a=Yu;break;default:a=aa}a=Cl(a,fl.bind(null,t))}t.callbackPriority=r,t.callbackNode=a}}function fl(t,r){if(Si=-1,wi=0,(ne&6)!==0)throw Error(u(327));var a=t.callbackNode;if(mr()&&t.callbackNode!==a)return null;var o=Hn(t,t===Ge?He:0);if(o===0)return null;if((o&30)!==0||(o&t.expiredLanes)!==0||r)r=Ci(t,o);else{r=o;var d=ne;ne|=2;var g=vl();(Ge!==t||He!==r)&&(bt=null,Br(),pr(t,r));do try{pd();break}catch(x){pl(t,x)}while(1);ca(),pi.current=g,ne=d,Re!==null?r=0:(Ge=null,He=0,r=Le)}if(r!==0){if(r===2&&(d=ea(t),d!==0&&(o=d,r=ts(t,d))),r===1)throw a=gn,pr(t,0),tr(t,o),Je(t,Oe()),a;if(r===6)tr(t,o);else{if(d=t.current.alternate,(o&30)===0&&!cd(d)&&(r=Ci(t,o),r===2&&(g=ea(t),g!==0&&(o=g,r=ts(t,g))),r===1))throw a=gn,pr(t,0),tr(t,o),Je(t,Oe()),a;switch(t.finishedWork=d,t.finishedLanes=o,r){case 0:case 1:throw Error(u(345));case 2:vr(t,Ke,bt);break;case 3:if(tr(t,o),(o&130023424)===o&&(r=Ja+500-Oe(),10<r)){if(Hn(t,0)!==0)break;if(d=t.suspendedLanes,(d&o)!==o){Xe(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=zs(vr.bind(null,t,Ke,bt),r);break}vr(t,Ke,bt);break;case 4:if(tr(t,o),(o&4194240)===o)break;for(r=t.eventTimes,d=-1;0<o;){var m=31-yt(o);g=1<<m,m=r[m],m>d&&(d=m),o&=~g}if(o=d,o=Oe()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*fd(o/1960))-o,10<o){t.timeoutHandle=zs(vr.bind(null,t,Ke,bt),o);break}vr(t,Ke,bt);break;case 5:vr(t,Ke,bt);break;default:throw Error(u(329))}}}return Je(t,Oe()),t.callbackNode===a?fl.bind(null,t):null}function ts(t,r){var a=pn;return t.current.memoizedState.isDehydrated&&(pr(t,r).flags|=256),t=Ci(t,r),t!==2&&(r=Ke,Ke=a,r!==null&&rs(r)),t}function rs(t){Ke===null?Ke=t:Ke.push.apply(Ke,t)}function cd(t){for(var r=t;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var o=0;o<a.length;o++){var d=a[o],g=d.getSnapshot;d=d.value;try{if(!_t(g(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function tr(t,r){for(r&=~Ka,r&=~vi,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var a=31-yt(r),o=1<<a;t[a]=-1,r&=~o}}function cl(t){if((ne&6)!==0)throw Error(u(327));mr();var r=Hn(t,0);if((r&1)===0)return Je(t,Oe()),null;var a=Ci(t,r);if(t.tag!==0&&a===2){var o=ea(t);o!==0&&(r=o,a=ts(t,o))}if(a===1)throw a=gn,pr(t,0),tr(t,r),Je(t,Oe()),a;if(a===6)throw Error(u(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,vr(t,Ke,bt),Je(t,Oe()),null}function gl(t){$t!==null&&$t.tag===0&&(ne&6)===0&&mr();var r=ne;ne|=1;var a=ke.transition,o=ae;try{if(ke.transition=null,ae=1,t)return t()}finally{ae=o,ke.transition=a,ne=r,(ne&6)===0&&Tt()}}function ns(){rt=Hr.current,ve(Hr)}function pr(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==Vi&&(t.timeoutHandle=Vi,Bh(a)),Re!==null)for(a=Re.return;a!==null;){var o=a;switch(la(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Dn();break;case 3:Gr(),ve(Ve),ve(be),xa();break;case 5:wa(o);break;case 4:Gr();break;case 13:ve(we);break;case 19:ve(we);break;case 10:ga(o.type._context);break;case 22:case 23:ns()}a=a.return}if(Ge=t,Re=t=rr(t.current,null),He=rt=r,Le=0,gn=null,Ka=vi=gr=0,Ke=pn=null,fr!==null){for(r=0;r<fr.length;r++)if(a=fr[r],o=a.interleaved,o!==null){a.interleaved=null;var d=o.next,g=a.pending;if(g!==null){var m=g.next;g.next=d,o.next=m}a.pending=o}fr=null}return t}function pl(t,r){do{var a=Re;try{if(ca(),$n.current=ni,ei){for(var o=Ce.memoizedState;o!==null;){var d=o.queue;d!==null&&(d.pending=null),o=o.next}ei=!1}if(cr=0,De=Me=Ce=null,an=!1,sn=0,Qa.current=null,a===null||a.return===null){Le=1,gn=r,Re=null;break}e:{var g=t,m=a.return,x=a,R=r;if(r=He,x.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var D=R,X=x,$=X.tag;if((X.mode&1)===0&&($===0||$===11||$===15)){var B=X.alternate;B?(X.updateQueue=B.updateQueue,X.memoizedState=B.memoizedState,X.lanes=B.lanes):(X.updateQueue=null,X.memoizedState=null)}var me=Bo(m);if(me!==null){me.flags&=-257,bo(me,m,x,g,r),me.mode&1&&Ho(g,D,r),r=me,R=D;var ce=r.updateQueue;if(ce===null){var Ze=new Set;Ze.add(R),r.updateQueue=Ze}else ce.add(R);break e}else{if((r&1)===0){Ho(g,D,r),is();break e}R=Error(u(426))}}else if(_e&&x.mode&1){var Wt=Bo(m);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),bo(Wt,m,x,g,r),da(zr(R,x));break e}}g=R=zr(R,x),Le!==4&&(Le=2),pn===null?pn=[g]:pn.push(g),g=m;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var T=zo(g,R,r);ao(g,T);break e;case 1:x=R;var P=g.type,M=g.stateNode;if((g.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Zt===null||!Zt.has(M)))){g.flags|=65536,r&=-r,g.lanes|=r;var b=Fo(g,x,r);ao(g,b);break e}}g=g.return}while(g!==null)}yl(a)}catch(Z){r=Z,Re===a&&a!==null&&(Re=a=a.return);continue}break}while(1)}function vl(){var t=pi.current;return pi.current=ni,t===null?ni:t}function is(){(Le===0||Le===3||Le===2)&&(Le=4),Ge===null||(gr&268435455)===0&&(vi&268435455)===0||tr(Ge,He)}function Ci(t,r){var a=ne;ne|=2;var o=vl();(Ge!==t||He!==r)&&(bt=null,pr(t,r));do try{gd();break}catch(d){pl(t,d)}while(1);if(ca(),ne=a,pi.current=o,Re!==null)throw Error(u(261));return Ge=null,He=0,Le}function gd(){for(;Re!==null;)ml(Re)}function pd(){for(;Re!==null&&!bu();)ml(Re)}function ml(t){var r=wl(t.alternate,t,rt);t.memoizedProps=t.pendingProps,r===null?yl(t):Re=r,Qa.current=null}function yl(t){var r=t;do{var a=r.alternate;if(t=r.return,(r.flags&32768)===0){if(a=od(a,r,rt),a!==null){Re=a;return}}else{if(a=ld(a,r),a!==null){a.flags&=32767,Re=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Le=6,Re=null;return}}if(r=r.sibling,r!==null){Re=r;return}Re=r=t}while(r!==null);Le===0&&(Le=5)}function vr(t,r,a){var o=ae,d=ke.transition;try{ke.transition=null,ae=1,vd(t,r,a,o)}finally{ke.transition=d,ae=o}return null}function vd(t,r,a,o){do mr();while($t!==null);if((ne&6)!==0)throw Error(u(327));a=t.finishedWork;var d=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(u(177));t.callbackNode=null,t.callbackPriority=0;var g=a.lanes|a.childLanes;if(Bu(t,g),t===Ge&&(Re=Ge=null,He=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||yi||(yi=!0,Cl(aa,function(){return mr(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=ke.transition,ke.transition=null;var m=ae;ae=1;var x=ne;ne|=4,Qa.current=null,ud(t,a),sl(a,t),ie(t.containerInfo),t.current=a,dd(a),Wu(),ne=x,ae=m,ke.transition=g}else t.current=a;if(yi&&(yi=!1,$t=t,_i=d),g=t.pendingLanes,g===0&&(Zt=null),Xu(a.stateNode),Je(t,Oe()),r!==null)for(o=t.onRecoverableError,a=0;a<r.length;a++)d=r[a],o(d.value,{componentStack:d.stack,digest:d.digest});if(mi)throw mi=!1,t=$a,$a=null,t;return(_i&1)!==0&&t.tag!==0&&mr(),g=t.pendingLanes,(g&1)!==0?t===es?vn++:(vn=0,es=t):vn=0,Tt(),null}function mr(){if($t!==null){var t=qs(_i),r=ke.transition,a=ae;try{if(ke.transition=null,ae=16>t?16:t,$t===null)var o=!1;else{if(t=$t,$t=null,_i=0,(ne&6)!==0)throw Error(u(331));var d=ne;for(ne|=4,W=t.current;W!==null;){var g=W,m=g.child;if((W.flags&16)!==0){var x=g.deletions;if(x!==null){for(var R=0;R<x.length;R++){var D=x[R];for(W=D;W!==null;){var X=W;switch(X.tag){case 0:case 11:case 15:fn(8,X,g)}var $=X.child;if($!==null)$.return=X,W=$;else for(;W!==null;){X=W;var B=X.sibling,me=X.return;if(rl(X),X===D){W=null;break}if(B!==null){B.return=me,W=B;break}W=me}}}var ce=g.alternate;if(ce!==null){var Ze=ce.child;if(Ze!==null){ce.child=null;do{var Wt=Ze.sibling;Ze.sibling=null,Ze=Wt}while(Ze!==null)}}W=g}}if((g.subtreeFlags&2064)!==0&&m!==null)m.return=g,W=m;else e:for(;W!==null;){if(g=W,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:fn(9,g,g.return)}var T=g.sibling;if(T!==null){T.return=g.return,W=T;break e}W=g.return}}var P=t.current;for(W=P;W!==null;){m=W;var M=m.child;if((m.subtreeFlags&2064)!==0&&M!==null)M.return=m,W=M;else e:for(m=P;W!==null;){if(x=W,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:hi(9,x)}}catch(Z){Se(x,x.return,Z)}if(x===m){W=null;break e}var b=x.sibling;if(b!==null){b.return=x.return,W=b;break e}W=x.return}}if(ne=d,Tt(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Bn,t)}catch{}o=!0}return o}finally{ae=a,ke.transition=r}}return!1}function _l(t,r,a){r=zr(a,r),r=zo(t,r,1),t=Jt(t,r,1),r=Xe(),t!==null&&($r(t,1,r),Je(t,r))}function Se(t,r,a){if(t.tag===3)_l(t,t,a);else for(;r!==null;){if(r.tag===3){_l(r,t,a);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Zt===null||!Zt.has(o))){t=zr(a,t),t=Fo(r,t,1),r=Jt(r,t,1),t=Xe(),r!==null&&($r(r,1,t),Je(r,t));break}}r=r.return}}function md(t,r,a){var o=t.pingCache;o!==null&&o.delete(r),r=Xe(),t.pingedLanes|=t.suspendedLanes&a,Ge===t&&(He&a)===a&&(Le===4||Le===3&&(He&130023424)===He&&500>Oe()-Ja?pr(t,0):Ka|=a),Je(t,r)}function Sl(t,r){r===0&&((t.mode&1)===0?r=1:(r=Fn,Fn<<=1,(Fn&130023424)===0&&(Fn=4194304)));var a=Xe();t=Rt(t,r),t!==null&&($r(t,r,a),Je(t,a))}function yd(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Sl(t,a)}function _d(t,r){var a=0;switch(t.tag){case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(u(314))}o!==null&&o.delete(r),Sl(t,a)}var wl;wl=function(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps||Ve.current)Qe=!0;else{if((t.lanes&a)===0&&(r.flags&128)===0)return Qe=!1,sd(t,r,a);Qe=(t.flags&131072)!==0}else Qe=!1,_e&&(r.flags&1048576)!==0&&Js(r,Un,r.index);switch(r.lanes=0,r.tag){case 2:var o=r.type;ai(t,r),t=r.pendingProps;var d=Rr(r,be.current);Ir(r,a),d=ka(null,r,o,t,d,a);var g=Ta();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qe(o)?(g=!0,Gn(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ma(r),d.updater=Kn,r.stateNode=d,d._reactInternals=r,_a(r,o,t,a),r=Da(null,r,o,!0,g,a)):(r.tag=0,_e&&g&&oa(r),je(null,r,d,a),r=r.child),r;case 16:o=r.elementType;e:{switch(ai(t,r),t=r.pendingProps,d=o._init,o=d(o._payload),r.type=o,d=r.tag=wd(o),t=wt(o,t),d){case 0:r=Oa(null,r,o,t,a);break e;case 1:r=Vo(null,r,o,t,a);break e;case 11:r=Wo(null,r,o,t,a);break e;case 14:r=Uo(null,r,o,wt(o.type,t),a);break e}throw Error(u(306,o,""))}return r;case 0:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:wt(o,d),Oa(t,r,o,d,a);case 1:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:wt(o,d),Vo(t,r,o,d,a);case 3:e:{if(qo(r),t===null)throw Error(u(387));o=r.pendingProps,g=r.memoizedState,d=g.element,io(t,r),Qn(r,o,null,a);var m=r.memoizedState;if(o=m.element,st&&g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=zr(Error(u(423)),r),r=Qo(t,r,o,a,d);break e}else if(o!==d){d=zr(Error(u(424)),r),r=Qo(t,r,o,a,d);break e}else for(st&&(ht=wu(r.stateNode.containerInfo),tt=r,_e=!0,St=null,en=!1),a=go(r,null,o,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Lr(),o===d){r=Bt(t,r,a);break e}je(t,r,o,a)}r=r.child}return r;case 5:return po(r),t===null&&ua(r),o=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,m=d.children,ji(o,d)?m=null:g!==null&&ji(o,g)&&(r.flags|=32),jo(t,r),je(t,r,m,a),r.child;case 6:return t===null&&ua(r),null;case 13:return Ko(t,r,a);case 4:return Sa(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=Or(r,null,o,a):je(t,r,o,a),r.child;case 11:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:wt(o,d),Wo(t,r,o,d,a);case 7:return je(t,r,r.pendingProps,a),r.child;case 8:return je(t,r,r.pendingProps.children,a),r.child;case 12:return je(t,r,r.pendingProps.children,a),r.child;case 10:e:{if(o=r.type._context,d=r.pendingProps,g=r.memoizedProps,m=d.value,ro(r,o,m),g!==null)if(_t(g.value,m)){if(g.children===d.children&&!Ve.current){r=Bt(t,r,a);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var x=g.dependencies;if(x!==null){m=g.child;for(var R=x.firstContext;R!==null;){if(R.context===o){if(g.tag===1){R=Ht(-1,a&-a),R.tag=2;var D=g.updateQueue;if(D!==null){D=D.shared;var X=D.pending;X===null?R.next=R:(R.next=X.next,X.next=R),D.pending=R}}g.lanes|=a,R=g.alternate,R!==null&&(R.lanes|=a),pa(g.return,a,r),x.lanes|=a;break}R=R.next}}else if(g.tag===10)m=g.type===r.type?null:g.child;else if(g.tag===18){if(m=g.return,m===null)throw Error(u(341));m.lanes|=a,x=m.alternate,x!==null&&(x.lanes|=a),pa(m,a,r),m=g.sibling}else m=g.child;if(m!==null)m.return=g;else for(m=g;m!==null;){if(m===r){m=null;break}if(g=m.sibling,g!==null){g.return=m.return,m=g;break}m=m.return}g=m}je(t,r,d.children,a),r=r.child}return r;case 9:return d=r.type,o=r.pendingProps.children,Ir(r,a),d=ut(d),o=o(d),r.flags|=1,je(t,r,o,a),r.child;case 14:return o=r.type,d=wt(o,r.pendingProps),d=wt(o.type,d),Uo(t,r,o,d,a);case 15:return Yo(t,r,r.type,r.pendingProps,a);case 17:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:wt(o,d),ai(t,r),r.tag=1,qe(o)?(t=!0,Gn(r)):t=!1,Ir(r,a),ho(r,o,d),_a(r,o,d,a),Da(null,r,o,!0,t,a);case 19:return Zo(t,r,a);case 22:return Xo(t,r,a)}throw Error(u(156,r.tag))};function Cl(t,r){return na(t,r)}function Sd(t,r,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(t,r,a,o){return new Sd(t,r,a,o)}function as(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wd(t){if(typeof t=="function")return as(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A)return 11;if(t===N)return 14}return 2}function rr(t,r){var a=t.alternate;return a===null?(a=gt(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function xi(t,r,a,o,d,g){var m=2;if(o=t,typeof t=="function")as(t)&&(m=1);else if(typeof t=="string")m=5;else e:switch(t){case v:return yr(a.children,d,g,r);case S:m=8,d|=8;break;case _:return t=gt(12,a,r,d|2),t.elementType=_,t.lanes=g,t;case k:return t=gt(13,a,r,d),t.elementType=k,t.lanes=g,t;case O:return t=gt(19,a,r,d),t.elementType=O,t.lanes=g,t;case F:return Pi(a,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:m=10;break e;case y:m=9;break e;case A:m=11;break e;case N:m=14;break e;case L:m=16,o=null;break e}throw Error(u(130,t==null?t:typeof t,""))}return r=gt(m,a,r,d),r.elementType=t,r.type=o,r.lanes=g,r}function yr(t,r,a,o){return t=gt(7,t,o,r),t.lanes=a,t}function Pi(t,r,a,o){return t=gt(22,t,o,r),t.elementType=F,t.lanes=a,t.stateNode={isHidden:!1},t}function ss(t,r,a){return t=gt(6,t,null,r),t.lanes=a,t}function os(t,r,a){return r=gt(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Cd(t,r,a,o,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vi,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ta(0),this.expirationTimes=ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.identifierPrefix=o,this.onRecoverableError=d,st&&(this.mutableSourceEagerHydrationData=null)}function xl(t,r,a,o,d,g,m,x,R){return t=new Cd(t,r,a,x,R),r===1?(r=1,g===!0&&(r|=8)):r=0,g=gt(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:o,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ma(g),t}function Pl(t){if(!t)return Qt;t=t._reactInternals;e:{if(q(t)!==t||t.tag!==1)throw Error(u(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(qe(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(u(171))}if(t.tag===1){var a=t.type;if(qe(a))return Xs(t,a,r)}return r}function El(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=te(r),t===null?null:t.stateNode}function kl(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Ei(t,r){kl(t,r),(t=t.alternate)&&kl(t,r)}function xd(t){return t=te(t),t===null?null:t.stateNode}function Pd(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Rt(t,134217728);if(r!==null){var a=Xe();ct(r,t,134217728,a)}Ei(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Rt(t,1);if(r!==null){var a=Xe();ct(r,t,1,a)}Ei(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=er(t),a=Rt(t,r);if(a!==null){var o=Xe();ct(a,t,r,o)}Ei(t,r)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var a=Zr(r.pendingLanes);a!==0&&(ra(r,a|1),Je(r,Oe()),(ne&6)===0&&(Br(),Tt()))}break;case 13:gl(function(){var o=Rt(t,1);if(o!==null){var d=Xe();ct(o,t,1,d)}}),Ei(t,1)}},n.batchedUpdates=function(t,r){var a=ne;ne|=1;try{return t(r)}finally{ne=a,ne===0&&(Br(),bn&&Tt())}},n.createComponentSelector=function(t){return{$$typeof:ui,value:t}},n.createContainer=function(t,r,a,o,d,g,m){return xl(t,r,!1,null,a,o,d,g,m)},n.createHasPseudoClassSelector=function(t){return{$$typeof:di,value:t}},n.createHydrationContainer=function(t,r,a,o,d,g,m,x,R){return t=xl(a,o,!0,t,d,g,m,x,R),t.context=Pl(null),a=t.current,o=Xe(),d=er(a),g=Ht(o,d),g.callback=r!=null?r:null,Jt(a,g,d),t.current.lanes=d,$r(t,d,o),Je(t,o),t},n.createPortal=function(t,r,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:o==null?null:""+o,children:t,containerInfo:r,implementation:a}},n.createRoleSelector=function(t){return{$$typeof:fi,value:t}},n.createTestNameSelector=function(t){return{$$typeof:ci,value:t}},n.createTextSelector=function(t){return{$$typeof:gi,value:t}},n.deferredUpdates=function(t){var r=ae,a=ke.transition;try{return ke.transition=null,ae=16,t()}finally{ae=r,ke.transition=a}},n.discreteUpdates=function(t,r,a,o,d){var g=ae,m=ke.transition;try{return ke.transition=null,ae=1,t(r,a,o,d)}finally{ae=g,ke.transition=m,ne===0&&Br()}},n.findAllNodes=qa,n.findBoundingRects=function(t,r){if(!Qr)throw Error(u(363));r=qa(t,r),t=[];for(var a=0;a<r.length;a++)t.push(qh(r[a]));for(r=t.length-1;0<r;r--){a=t[r];for(var o=a.x,d=o+a.width,g=a.y,m=g+a.height,x=r-1;0<=x;x--)if(r!==x){var R=t[x],D=R.x,X=D+R.width,$=R.y,B=$+R.height;if(o>=D&&g>=$&&d<=X&&m<=B){t.splice(r,1);break}else if(o!==D||a.width!==R.width||B<g||$>m){if(!(g!==$||a.height!==R.height||X<o||D>d)){D>o&&(R.width+=D-o,R.x=o),X<d&&(R.width=d-D),t.splice(r,1);break}}else{$>g&&(R.height+=$-g,R.y=g),B<m&&(R.height=m-$),t.splice(r,1);break}}}return t},n.findHostInstance=El,n.findHostInstanceWithNoPortals=function(t){return t=Q(t),t=t!==null?de(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return El(t)},n.flushControlled=function(t){var r=ne;ne|=1;var a=ke.transition,o=ae;try{ke.transition=null,ae=1,t()}finally{ae=o,ke.transition=a,ne=r,ne===0&&(Br(),Tt())}},n.flushPassiveEffects=mr,n.flushSync=gl,n.focusWithin=function(t,r){if(!Qr)throw Error(u(363));for(t=Xa(t),r=dl(t,r),r=Array.from(r),t=0;t<r.length;){var a=r[t++];if(!Kr(a)){if(a.tag===5&&Jh(a.stateNode))return!0;for(a=a.child;a!==null;)r.push(a),a=a.sibling}}return!1},n.getCurrentUpdatePriority=function(){return ae},n.getFindAllNodesFailureDescription=function(t,r){if(!Qr)throw Error(u(363));var a=0,o=[];t=[Xa(t),0];for(var d=0;d<t.length;){var g=t[d++],m=t[d++],x=r[m];if((g.tag!==5||!Kr(g))&&(ja(g,x)&&(o.push(Va(x)),m++,m>a&&(a=m)),m<r.length))for(g=g.child;g!==null;)t.push(g,m),g=g.sibling}if(a<r.length){for(t=[];a<r.length;a++)t.push(Va(r[a]));return`findAllNodes was able to match part of the selector:
  `+(o.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return he(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:xd,findFiberByHostInstance:t.findFiberByHostInstance||Pd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{Bn=r.inject(t),kt=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,a,o){if(!Qr)throw Error(u(363));t=qa(t,r);var d=Zh(t,a,o).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var a=r._getVersion;a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a)},n.runWithPriority=function(t,r){var a=ae;try{return ae=t,r()}finally{ae=a}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,a,o){var d=r.current,g=Xe(),m=er(d);return a=Pl(a),r.context===null?r.context=a:r.pendingContext=a,r=Ht(g,m),r.payload={element:t},o=o===void 0?null:o,o!==null&&(r.callback=o),t=Jt(d,r,m),t!==null&&(ct(t,d,m,g),qn(t,d,m)),m},n};(function(l){l.exports=Bc})(Dh);const bc=Rd(Dh.exports);var Ns={exports:{}},kr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */kr.ConcurrentRoot=1;kr.ContinuousEventPriority=4;kr.DefaultEventPriority=16;kr.DiscreteEventPriority=1;kr.IdleEventPriority=536870912;kr.LegacyRoot=0;(function(l){l.exports=kr})(Ns);const Kl={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Jl=!1,Zl=!1;const Is=".react-konva-event",Wc=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Uc=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Yc={};function Xi(l,e,n=Yc){if(!Jl&&"zIndex"in e&&(console.warn(Uc),Jl=!0),!Zl&&e.draggable){var i=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;i&&!s&&(console.warn(Wc),Zl=!0)}for(var h in n)if(!Kl[h]){var u=h.slice(0,2)==="on",f=n[h]!==e[h];if(u&&f){var c=h.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),l.off(c,n[h])}var p=!e.hasOwnProperty(h);p&&l.setAttr(h,void 0)}var v=e._useStrictMode,S={},_=!1;const C={};for(var h in e)if(!Kl[h]){var u=h.slice(0,2)==="on",y=n[h]!==e[h];if(u&&y){var c=h.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[h]&&(C[c]=e[h])}!u&&(e[h]!==n[h]||v&&e[h]!==l.getAttr(h))&&(_=!0,S[h]=e[h])}_&&(l.setAttrs(S),lr(l));for(var c in C)l.on(c+Is,C[c])}function lr(l){if(!U.autoDrawEnabled){var e=l.getLayer()||l.getStage();e&&e.batchDraw()}}const Gh={},Xc={};Sr.Node.prototype._applyProps=Xi;function jc(l,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}l.add(e),lr(l)}function Vc(l,e,n){let i=Sr[l];i||(console.error(`Konva has no node with the type ${l}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${l}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Sr.Group);const s={},h={};for(var u in e){var f=u.slice(0,2)==="on";f?h[u]=e[u]:s[u]=e[u]}const c=new i(s);return Xi(c,h),c}function qc(l,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${l}"`)}function Qc(l,e,n){return!1}function Kc(l){return l}function Jc(){return null}function Zc(){return null}function $c(l,e,n,i){return Xc}function eg(){}function tg(l){}function rg(l,e){return!1}function ng(){return Gh}function ig(){return Gh}const ag=setTimeout,sg=clearTimeout,og=-1;function lg(l,e){return!1}const hg=!1,ug=!0,dg=!0;function fg(l,e){e.parent===l?e.moveToTop():l.add(e),lr(l)}function cg(l,e){e.parent===l?e.moveToTop():l.add(e),lr(l)}function zh(l,e,n){e._remove(),l.add(e),e.setZIndex(n.getZIndex()),lr(l)}function gg(l,e,n){zh(l,e,n)}function pg(l,e){e.destroy(),e.off(Is),lr(l)}function vg(l,e){e.destroy(),e.off(Is),lr(l)}function mg(l,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function yg(l,e,n){}function _g(l,e,n,i,s){Xi(l,s,i)}function Sg(l){l.hide(),lr(l)}function wg(l){}function Cg(l,e){(e.visible==null||e.visible)&&l.show()}function xg(l,e){}function Pg(l){}function Eg(){}const kg=()=>Ns.exports.DefaultEventPriority,Tg=Object.freeze(Object.defineProperty({__proto__:null,appendInitialChild:jc,createInstance:Vc,createTextInstance:qc,finalizeInitialChildren:Qc,getPublicInstance:Kc,prepareForCommit:Jc,preparePortalMount:Zc,prepareUpdate:$c,resetAfterCommit:eg,resetTextContent:tg,shouldDeprioritizeSubtree:rg,getRootHostContext:ng,getChildHostContext:ig,scheduleTimeout:ag,cancelTimeout:sg,noTimeout:og,shouldSetTextContent:lg,isPrimaryRenderer:hg,warnsIfNotActing:ug,supportsMutation:dg,appendChild:fg,appendChildToContainer:cg,insertBefore:zh,insertInContainerBefore:gg,removeChild:pg,removeChildFromContainer:vg,commitTextUpdate:mg,commitMount:yg,commitUpdate:_g,hideInstance:Sg,hideTextInstance:wg,unhideInstance:Cg,unhideTextInstance:xg,clearContainer:Pg,detachDeletedInstance:Eg,getCurrentEventPriority:kg,now:zi.exports.unstable_now,idlePriority:zi.exports.unstable_IdlePriority,run:zi.exports.unstable_runWithPriority},Symbol.toStringTag,{value:"Module"}));var Rg=Object.defineProperty,Ag=Object.defineProperties,Mg=Object.getOwnPropertyDescriptors,$l=Object.getOwnPropertySymbols,Lg=Object.prototype.hasOwnProperty,Ng=Object.prototype.propertyIsEnumerable,eh=(l,e,n)=>e in l?Rg(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,th=(l,e)=>{for(var n in e||(e={}))Lg.call(e,n)&&eh(l,n,e[n]);if($l)for(var n of $l(e))Ng.call(e,n)&&eh(l,n,e[n]);return l},Ig=(l,e)=>Ag(l,Mg(e));function Os(l,e,n){if(!l)return;if(n(l)===!0)return l;let i=e?l.return:l.child;for(;i;){const s=Os(i,e,n);if(s)return s;i=e?null:i.sibling}}function Fh(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const Ds=Fh(it.exports.createContext(null));class Hh extends it.exports.Component{render(){return Ot(Ds.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:Og,ReactCurrentDispatcher:Dg}=it.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Gg(){const l=it.exports.useContext(Ds);if(!l)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=it.exports.useId();return it.exports.useMemo(()=>{var i;return(i=Og.current)!=null?i:Os(l,!1,s=>{let h=s.memoizedState;for(;h;){if(h.memoizedState===e)return!0;h=h.next}})},[l,e])}const wn=[],rh=new WeakMap;function zg(){var l;const e=Gg();wn.splice(0,wn.length),Os(e,!0,n=>{var i;const s=(i=n.type)==null?void 0:i._context;s&&s!==Ds&&wn.push(Fh(s))});for(const n of wn){const i=(l=Dg.current)==null?void 0:l.readContext(n);rh.set(n,i)}return it.exports.useMemo(()=>wn.reduce((n,i)=>s=>it.exports.createElement(n,null,it.exports.createElement(i.Provider,Ig(th({},s),{value:rh.get(i)}))),n=>Ot(Hh,{...th({},n)})),[])}function Fg(l){const e=Yt.useRef();return Yt.useLayoutEffect(()=>{e.current=l}),e.current}const Hg=l=>{const e=Yt.useRef(),n=Yt.useRef(),i=Yt.useRef(),s=Fg(l),h=zg(),u=f=>{const{forwardedRef:c}=l;!c||(typeof c=="function"?c(f):c.current=f)};return Yt.useLayoutEffect(()=>(n.current=new Sr.Stage({width:l.width,height:l.height,container:e.current}),u(n.current),i.current=kn.createContainer(n.current,Ns.exports.LegacyRoot,!1,null),kn.updateContainer(Ot(h,{children:l.children}),i.current),()=>{!Sr.isBrowser||(u(null),kn.updateContainer(null,i.current,null),n.current.destroy())}),[]),Yt.useLayoutEffect(()=>{u(n.current),Xi(n.current,l,s),kn.updateContainer(Ot(h,{children:l.children}),i.current,null)}),Ot("div",{ref:e,accessKey:l.accessKey,className:l.className,role:l.role,style:l.style,tabIndex:l.tabIndex,title:l.title})},Bg="Layer",bg="Line",kn=bc(Tg);kn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Yt.version,rendererPackageName:"react-konva"});const Wg=Yt.forwardRef((l,e)=>Ot(Hh,{children:Ot(Hg,{...l,forwardedRef:e})}));class Ug extends Ql.Group{constructor(){super(...arguments);ls(this,"line");ls(this,"pointsCount",0)}attach(n){this.line=n,n.on("pointsChange",()=>{this.update()}),this.update()}update(){let n=this.line.points(),i=-1;for(let s=0;s<n.length/2;s++)this.get(s,"anchor").setAttrs({x:n[s*2],y:n[s*2+1]}),i!==-1&&this.get(s,"control").setAttrs({x:n[s*2]+(n[i*2]-n[s*2])/2,y:n[s*2+1]+(n[i*2+1]-n[s*2+1])/2}),i=s;for(let s=n.length/2;s<this.pointsCount;s++)this.findOne(`.${s}-anchor`).destroy(),this.findOne(`.${s}-control`).destroy();this.pointsCount=n.length/2}get(n,i){return this.findOne(`.${n}-${i}`)||this.create(n,i)}create(n,i){let s=new Ql.Circle({name:`${n}-${i}`,radius:10,draggable:!0,fill:"red"});return i==="anchor"?s.on("dragmove",h=>{let u=this.line.points();u[n*2]=h.target.x(),u[n*2+1]=h.target.y(),this.line.points(u)}).on("dblclick",h=>{let u=this.line.points();u.splice(n*2,2),this.line.points(u)}).setAttrs({fill:"red"}):s.on("dragmove",h=>{let u=this.line.points();u.splice(n*2,0,h.target.x(),h.target.y()),this.line.points(u),h.target.stopDrag(),h.target.getParent().findOne(`.${n}-anchor`).startDrag(h)}).setAttrs({radius:8,fill:"blue"}),this.add(s),s}}const jg=()=>{const l=it.exports.useRef(null),e=it.exports.useRef(null),n=new Ug;return it.exports.useEffect(()=>{l.current&&e.current&&(n.attach(l.current),e.current.add(n))},[]),Ot(Wg,{width:window.innerWidth,height:window.innerHeight,children:Ot(Bg,{ref:e,children:Ot(bg,{ref:l,points:[30,75,125,234,315,225,104,127],strokeWidth:4,stroke:"black"})})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{jg as \u6837\u5F0F};
